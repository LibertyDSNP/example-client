"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const js_sha3_1 = require("js-sha3");
const publisher_1 = require("./publisher");
const subscription_1 = require("./subscription");
const sdkTestConfig_1 = require("../../test/sdkTestConfig");
const hardhatRPC_1 = require("../../test/hardhatRPC");
const config_1 = require("../../config");
const utilities_1 = require("../../test/utilities");
describe("subscription", () => {
    hardhatRPC_1.setupSnapshot();
    beforeEach(() => {
        sdkTestConfig_1.setupConfig();
    });
    afterEach(() => __awaiter(void 0, void 0, void 0, function* () {
        jest.resetAllMocks();
    }));
    describe("subscribeToBatchPublications", () => {
        jest.setTimeout(70000);
        const testUrl = "http://www.testconst.com";
        const hash = "0x" + js_sha3_1.keccak256("test");
        it("listen and retrieve batch publication events", () => __awaiter(void 0, void 0, void 0, function* () {
            const provider = config_1.requireGetProvider();
            const mock = jest.fn();
            const removeListener = yield subscription_1.subscribeToBatchPublications(mock);
            const publications = [{ dsnpType: 2, url: testUrl, hash: hash }];
            yield (yield publisher_1.publish(publications)).wait(1);
            const numberOfCalls = yield utilities_1.checkNumberOfFunctionCalls(mock, 30, 1);
            const filter = yield publisher_1.dsnpBatchFilter();
            expect(numberOfCalls).toBeTruthy();
            expect(mock.mock.calls[0][0].dsnpType).toEqual(2);
            expect(mock.mock.calls[0][0].dsnpUrl).toEqual(testUrl);
            expect(mock.mock.calls[0][0].dsnpHash).toEqual(hash);
            yield removeListener();
            expect(provider.listeners(filter).length).toEqual(0);
        }));
        it("calls the callback on each event", () => __awaiter(void 0, void 0, void 0, function* () {
            const provider = config_1.requireGetProvider();
            const testUrl1 = "http://www.testconst111.com";
            const hash1 = "0x" + js_sha3_1.keccak256("test111");
            const testUrl2 = "http://www.testconst222.com";
            const hash2 = "0x" + js_sha3_1.keccak256("test222");
            const mock = jest.fn();
            const removeListener = yield subscription_1.subscribeToBatchPublications(mock);
            const publications = [{ dsnpType: 2, url: testUrl1, hash: hash1 }];
            const publications1 = [{ dsnpType: 2, url: testUrl2, hash: hash2 }];
            yield (yield publisher_1.publish(publications)).wait(1);
            yield (yield publisher_1.publish(publications1)).wait(1);
            const numberOfCalls = yield utilities_1.checkNumberOfFunctionCalls(mock, 10, 2);
            expect(numberOfCalls).toBeTruthy();
            expect(mock).toHaveBeenCalledTimes(2);
            yield removeListener();
            const filter = yield publisher_1.dsnpBatchFilter();
            expect(provider.listeners(filter).length).toEqual(0);
        }));
        describe("when listener is removed", () => {
            it("does not retrieve events", () => __awaiter(void 0, void 0, void 0, function* () {
                const provider = config_1.requireGetProvider();
                const filter = yield publisher_1.dsnpBatchFilter();
                const mock1 = jest.fn();
                const removeListener = yield subscription_1.subscribeToBatchPublications(mock1);
                expect(provider.listeners(filter).length).toEqual(1);
                yield removeListener();
                expect(provider.listeners(filter).length).toEqual(0);
            }));
        });
    });
    describe("BatchPublication events with custom filter", () => {
        it("returns events that matches filters", () => __awaiter(void 0, void 0, void 0, function* () {
            const provider = config_1.requireGetProvider();
            const mock = jest.fn((opts) => {
                return opts;
            });
            const testUrl3 = "http://www.testconst333.com";
            const hash3 = "0x" + js_sha3_1.keccak256("test333");
            const testUrl4 = "http://www.testconst333.com";
            const hash4 = "0x" + js_sha3_1.keccak256("test333");
            const removeListener = yield subscription_1.subscribeToBatchPublications(mock, { dsnpType: 2 });
            const publications = [{ dsnpType: 2, url: testUrl3, hash: hash3 }];
            const publications1 = [{ dsnpType: 4, url: testUrl4, hash: hash4 }];
            yield (yield publisher_1.publish(publications)).wait(1);
            yield (yield publisher_1.publish(publications1)).wait(1);
            yield utilities_1.checkNumberOfFunctionCalls(mock, 10, 1);
            const filter = yield publisher_1.dsnpBatchFilter();
            expect(mock).toHaveBeenCalledTimes(1);
            expect(mock.mock.calls[0][0].dsnpType).toEqual(2);
            expect(mock.mock.calls[0][0].dsnpUrl).toEqual(testUrl3);
            expect(mock.mock.calls[0][0].dsnpHash).toEqual(hash3);
            yield removeListener();
            expect(provider.listeners(filter).length).toEqual(0);
        }));
    });
    describe("get past events from start block", () => {
        it("retrieves past events based on given start block", () => __awaiter(void 0, void 0, void 0, function* () {
            const provider = config_1.requireGetProvider();
            const mock = jest.fn();
            const testUrl3 = "http://www.testconst333.com";
            const hash3 = "0x" + js_sha3_1.keccak256("test333");
            const testUrl4 = "http://www.testconst444.com";
            const hash4 = "0x" + js_sha3_1.keccak256("test444");
            const testUrl5 = "http://www.testconst555.com";
            const hash5 = "0x" + js_sha3_1.keccak256("test555");
            const testUrl6 = "http://www.testconst666.com";
            const hash6 = "0x" + js_sha3_1.keccak256("test666");
            const publications = [{ dsnpType: 2, url: testUrl3, hash: hash3 }];
            const publications1 = [{ dsnpType: 2, url: testUrl4, hash: hash4 }];
            const publications2 = [{ dsnpType: 2, url: testUrl5, hash: hash5 }];
            const publications3 = [{ dsnpType: 2, url: testUrl6, hash: hash6 }];
            yield (yield publisher_1.publish(publications)).wait(1);
            const blockNumber = (yield provider.getBlockNumber()) + 1;
            yield (yield publisher_1.publish(publications1)).wait(1);
            const removeListener = yield subscription_1.subscribeToBatchPublications(mock, { dsnpType: 2, fromBlock: blockNumber });
            yield (yield publisher_1.publish(publications2)).wait(1);
            yield (yield publisher_1.publish(publications3)).wait(1);
            yield utilities_1.checkNumberOfFunctionCalls(mock, 10, 3);
            expect(mock).toHaveBeenCalledTimes(3);
            expect(mock.mock.calls[0][0]).toEqual(expect.objectContaining({
                dsnpUrl: publications1[0].url,
                dsnpHash: publications1[0].hash,
                dsnpType: publications1[0].dsnpType,
            }));
            expect(mock.mock.calls[1][0]).toEqual(expect.objectContaining({
                dsnpUrl: publications2[0].url,
                dsnpHash: publications2[0].hash,
                dsnpType: publications2[0].dsnpType,
            }));
            expect(mock.mock.calls[2][0]).toEqual(expect.objectContaining({
                dsnpUrl: publications3[0].url,
                dsnpHash: publications3[0].hash,
                dsnpType: publications3[0].dsnpType,
            }));
            const filter = yield publisher_1.dsnpBatchFilter();
            yield removeListener();
            expect(provider.listeners(filter).length).toEqual(0);
        }));
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Vic2NyaXB0aW9uLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29yZS9jb250cmFjdHMvc3Vic2NyaXB0aW9uLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxxQ0FBb0M7QUFFcEMsMkNBQW9FO0FBQ3BFLGlEQUE4RDtBQUM5RCw0REFBdUQ7QUFDdkQsc0RBQXNEO0FBQ3RELHlDQUFrRDtBQUNsRCxvREFBa0U7QUFHbEUsUUFBUSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7SUFDNUIsMEJBQWEsRUFBRSxDQUFDO0lBRWhCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCwyQkFBVyxFQUFFLENBQUM7SUFDaEIsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsR0FBUyxFQUFFO1FBQ25CLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUEsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtRQUM1QyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3ZCLE1BQU0sT0FBTyxHQUFHLDBCQUEwQixDQUFDO1FBQzNDLE1BQU0sSUFBSSxHQUFHLElBQUksR0FBRyxtQkFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXRDLEVBQUUsQ0FBQyw4Q0FBOEMsRUFBRSxHQUFTLEVBQUU7WUFDNUQsTUFBTSxRQUFRLEdBQUcsMkJBQWtCLEVBQUUsQ0FBQztZQUN0QyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7WUFFdkIsTUFBTSxjQUFjLEdBQUcsTUFBTSwyQ0FBNEIsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNoRSxNQUFNLFlBQVksR0FBa0IsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FB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