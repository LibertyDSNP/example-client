"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const activityPub_1 = require("./activityPub");
describe("activityPub", () => {
    describe("#create", () => {
        it("returns an activity pub object with the given parameters", () => {
            const activityPub = activityPub_1.create({
                attributedTo: "0x0123456789ABCDEF",
                content: "Look at these cats!",
                name: "Some Cats",
                url: "http://placekitten.com",
                inReplyTo: "0x0123456789ABCDEF",
            });
            expect(activityPub).toMatchObject({
                "@context": "https://www.w3.org/ns/activitystreams",
                attributedTo: "0x0123456789ABCDEF",
                content: "Look at these cats!",
                inReplyTo: "0x0123456789ABCDEF",
                name: "Some Cats",
                type: "Note",
                url: "http://placekitten.com",
            });
        });
        it("returns an activity pub object with a valid published timestamp", () => {
            const activityPub = activityPub_1.create({
                content: "Look at the time!",
                name: "Time",
            });
            expect(activityPub["published"]).toMatch(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);
        });
    });
    describe("#isValid", () => {
        it("return true for valid activity pub objects with valid published fields", () => {
            const activityPub = {
                "@context": "https://www.w3.org/ns/activitystreams",
                type: "Note",
                url: "http://placekitten.com",
                published: "2015-02-10T15:04:55Z",
            };
            expect(activityPub_1.isValid(activityPub)).toBeTruthy();
        });
        it("return true for valid activity pub objects with no published field", () => {
            const activityPub = {
                "@context": "https://www.w3.org/ns/activitystreams",
                type: "Note",
                url: "http://placekitten.com",
            };
            expect(activityPub_1.isValid(activityPub)).toBeTruthy();
        });
        it("return false for activity pubs with incorrect published fields", () => {
            const activityPub = {
                "@context": "https://www.w3.org/ns/activitystreams",
                type: "Note",
                url: "http://placekitten.com",
                published: "Yesterday",
            };
            expect(activityPub_1.isValid(activityPub)).toBeFalsy();
        });
        it("return false for activity pubs with incorrect contexts fields", () => {
            const activityPub = {
                "@context": "https://www.w3.org/ns/activitystream",
                type: "Note",
                url: "http://placekitten.com",
            };
            expect(activityPub_1.isValid(activityPub)).toBeFalsy();
        });
        it("return false for activity pubs with missing types", () => {
            const activityPub = {
                "@context": "https://www.w3.org/ns/activitystream",
                url: "http://placekitten.com",
            };
            expect(activityPub_1.isValid(activityPub)).toBeFalsy();
        });
    });
    describe("#validateReply", () => {
        it("return true for valid activity pub objects with an inReplyTo field", () => {
            const activityPub = {
                "@context": "https://www.w3.org/ns/activitystreams",
                type: "Note",
                url: "http://placekitten.com",
                inReplyTo: "dsnp://0123456789ABCDEF/0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF",
            };
            expect(activityPub_1.isValid(activityPub)).toBeTruthy();
        });
        it("return false for activity pubs without an inReplyTo field", () => {
            const activityPub = {
                "@context": "https://www.w3.org/ns/activitystreams",
                type: "Note",
                url: "http://placekitten.com",
                published: "Yesterday",
            };
            expect(activityPub_1.isValid(activityPub)).toBeFalsy();
        });
    });
    describe("#isValidProfile", () => {
        it("return true for valid activity pub objects with an inReplyTo field", () => {
            const activityPub = {
                "@context": "https://www.w3.org/ns/activitystreams",
                type: "Person",
                name: "Rose Karr",
                preferredUsername: "rosalinekarr",
            };
            expect(activityPub_1.isValid(activityPub)).toBeTruthy();
        });
        it("return false for activity pubs with wrong type", () => {
            const activityPub = {
                "@context": "https://www.w3.org/ns/activitystreams",
                type: "Note",
                url: "http://placekitten.com",
                published: "Yesterday",
            };
            expect(activityPub_1.isValid(activityPub)).toBeFalsy();
        });
    });
    describe("#serialize", () => {
        it("returns a serialized version of the activity pub object", () => {
            const sampleActivityPub = {
                "@context": "https://www.w3.org/ns/activitystreams",
                type: "Person",
                id: "https://social.example/alyssa/",
                name: "Alyssa P. Hacker",
                preferredUsername: "alyssa",
            };
            expect(activityPub_1.serialize(sampleActivityPub)).toEqual('{"@context":"https://www.w3.org/ns/activitystreams","id":"https://social.example/alyssa/","name":"Alyssa P. Hacker","preferredUsername":"alyssa","type":"Person"}');
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aXZpdHlQdWIudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb3JlL2FjdGl2aXR5UHViL2FjdGl2aXR5UHViLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQ0FBd0U7QUFFeEUsUUFBUSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7SUFDM0IsUUFBUSxDQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUU7UUFDdkIsRUFBRSxDQUFDLDBEQUEwRCxFQUFFLEdBQUcsRUFBRTtZQUNsRSxNQUFNLFdBQVcsR0FBRyxvQkFBTSxDQUFDO2dCQUN6QixZQUFZLEVBQUUsb0JBQW9CO2dCQUNsQyxPQUFPLEVBQUUscUJBQXFCO2dCQUM5QixJQUFJLEVBQUUsV0FBVztnQkFDakIsR0FBRyxFQUFFLHdCQUF3QjtnQkFDN0IsU0FBUyxFQUFFLG9CQUFvQjthQUNoQyxDQUFDLENBQUM7WUFFSCxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsYUFBYSxDQUFDO2dCQUNoQyxVQUFVLEVBQUUsdUNBQXVDO2dCQUNuRCxZQUFZLEVBQUUsb0JBQW9CO2dCQUNsQyxPQUFPLEVBQUUscUJBQXFCO2dCQUM5QixTQUFTLEVBQUUsb0JBQW9CO2dCQUMvQixJQUFJLEVBQUUsV0FBVztnQkFDakIsSUFBSSxFQUFFLE1BQU07Z0JBQ1osR0FBRyxFQUFFLHdCQUF3QjthQUM5QixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxpRUFBaUUsRUFBRSxHQUFHLEVBQUU7WUFDekUsTUFBTSxXQUFXLEdBQUcsb0JBQU0sQ0FBQztnQkFDekIsT0FBTyxFQUFFLG1CQUFtQjtnQkFDNUIsSUFBSSxFQUFFLE1BQU07YUFDYixDQUFDLENBQUM7WUFFSCxNQUFNLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGlEQUFpRCxDQUFDLENBQUM7UUFDOUYsQ0FBQyxDQUFDLENBQUM7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