"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.serialize = exports.isValidProfile = exports.isValidReply = exports.isValid = exports.create = void 0;
const json_1 = require("../utilities/json");
const ISO8601_REGEX = /(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})([+-](\d{2}):(\d{2}))?/;
const create = (options) => (Object.assign({ "@context": "https://www.w3.org/ns/activitystreams", type: "Note", published: new Date().toISOString() }, options));
exports.create = create;
const isValid = (activityPub) => {
    if (activityPub["@context"] !== "https://www.w3.org/ns/activitystreams")
        return false;
    if (!activityPub.type || typeof activityPub.type !== "string")
        return false;
    if (activityPub.published && !activityPub.published.match(ISO8601_REGEX))
        return false;
    return true;
};
exports.isValid = isValid;
const isValidReply = (activityPub) => {
    if (!exports.isValid(activityPub))
        return false;
    if (!activityPub["inReplyTo"])
        return false;
    return true;
};
exports.isValidReply = isValidReply;
const isValidProfile = (activityPub) => {
    if (!exports.isValid(activityPub))
        return false;
    if (activityPub["type"] !== "Person")
        return false;
    return true;
};
exports.isValidProfile = isValidProfile;
const serialize = (data) => {
    const sortedData = json_1.sortObject(data);
    return JSON.stringify(sortedData);
};
exports.serialize = serialize;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aXZpdHlQdWIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29yZS9hY3Rpdml0eVB1Yi9hY3Rpdml0eVB1Yi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw0Q0FBK0M7QUFFL0MsTUFBTSxhQUFhLEdBQUcsdUVBQXVFLENBQUM7QUF5Q3ZGLE1BQU0sTUFBTSxHQUFHLENBQUMsT0FBd0IsRUFBZSxFQUFFLENBQzlELENBQUMsZ0JBQ0MsVUFBVSxFQUFFLHVDQUF1QyxFQUNuRCxJQUFJLEVBQUUsTUFBTSxFQUNaLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxJQUNoQyxPQUFPLENBQ0ssQ0FBQSxDQUFDO0FBTlAsUUFBQSxNQUFNLFVBTUM7QUFTYixNQUFNLE9BQU8sR0FBRyxDQUFDLFdBQXdCLEVBQVcsRUFBRTtJQUMzRCxJQUFJLFdBQVcsQ0FBQyxVQUFVLENBQUMsS0FBSyx1Q0FBdUM7UUFBRSxPQUFPLEtBQUssQ0FBQztJQUN0RixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksSUFBSSxPQUFPLFdBQVcsQ0FBQyxJQUFJLEtBQUssUUFBUTtRQUFFLE9BQU8sS0FBSyxDQUFDO0lBQzVFLElBQUksV0FBVyxDQUFDLFNBQVMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQztRQUFFLE9BQU8sS0FBSyxDQUFDO0lBRXZGLE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyxDQUFDO0FBTlcsUUFBQSxPQUFPLFdBTWxCO0FBU0ssTUFBTSxZQUFZLEdBQUcsQ0FBQyxXQUF3QixFQUFXLEVBQUU7SUFDaEUsSUFBSSxDQUFDLGVBQU8sQ0FBQyxXQUFXLENBQUM7UUFBRSxPQUFPLEtBQUssQ0FBQztJQUN4QyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQztRQUFFLE9BQU8sS0FBSyxDQUFDO0lBRTVDLE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyxDQUFDO0FBTFcsUUFBQSxZQUFZLGdCQUt2QjtBQVNLLE1BQU0sY0FBYyxHQUFHLENBQUMsV0FBd0IsRUFBVyxFQUFFO0lBQ2xFLElBQUksQ0FBQyxlQUFPLENBQUMsV0FBVyxDQUFDO1FBQUUsT0FBTyxLQUFLLENBQUM7SUFDeEMsSUFBSSxXQUFXLENBQUMsTUFBTSxDQUFDLEtBQUssUUFBUTtRQUFFLE9BQU8sS0FBSyxDQUFDO0lBRW5ELE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyxDQUFDO0FBTFcsUUFBQSxjQUFjLGtCQUt6QjtBQVNLLE1BQU0sU0FBUyxHQUFHLENBQUMsSUFBaUIsRUFBVSxFQUFFO0lBQ3JELE1BQU0sVUFBVSxHQUFJLGlCQUFVLENBQUUsSUFBMkMsQ0FBNEIsQ0FBQztJQUN4RyxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDcEMsQ0FBQyxDQUFDO0FBSFcsUUFBQSxTQUFTLGFBR3BCIn0=