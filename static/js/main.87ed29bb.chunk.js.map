{"version":3,"sources":["redux/hooks.ts","services/wallets/metamask/ethereum.ts","services/wallets/wallet.ts","services/wallets/metamask/metamask.ts","services/wallets/metamask/index.ts","services/wallets/torus/tweb3.ts","services/wallets/torus/torus.ts","services/wallets/torus/index.ts","components/PostList.tsx","services/session.ts","redux/slices/userSlice.ts","redux/slices/feedSlice.ts","redux/slices/profileSlice.ts","services/utilities.ts","utilities/activityContent.ts","services/Storage.ts","redux/slices/graphSlice.ts","services/sdk.ts","components/LoginButton.tsx","components/UserAvatar.tsx","components/RegistrationModal.tsx","components/Login.tsx","components/Header.tsx","images/Camera.svg","components/NewPostImageUpload.tsx","components/FromTitle.tsx","components/NewPost.tsx","components/PostMedia.tsx","components/RelativeTime.tsx","components/PostHashDropdown.tsx","components/Reply.tsx","components/ReplyInput.tsx","components/BlankReply.tsx","components/ReplyBlock.tsx","components/Post.tsx","components/BlankPost.tsx","components/Feed.tsx","components/ConnectionsListProfiles.tsx","components/LoginSetupInstructions.tsx","components/ConnectionsList.tsx","components/Profile.tsx","components/ProfileBlock.tsx","App.tsx","serviceWorker.ts","redux/store.ts","index.tsx"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","ethereum","window","autoRefreshOnNetworkChange","WalletType","mmweb3","Web3","isInstalled","Boolean","isMetaMask","getWalletAddress","a","request","method","response","Error","result","metamaskWallet","icon","login","metamask","logout","reload","getAddress","getWeb3","torusSettings","popupStyling","theme","isDark","colors","torusBrand1","torusGray2","logoDark","logoLight","web3Torus","web3","torus","initialized","setweb3","provider","web3Inst","this","setProvider","initialize","buildEnv","Torus","init","process","network","host","chainId","Number","networkName","showTorusButton","whiteLabel","verifier","undefined","clearInit","verifiers","enableTorus","isInitialized","getUserInfo","userInfo","getPublicAddress","verifierId","isExtended","typedVerifier","getTypedVerifier","walletAddressHolder","address","untypedVerifier","find","includes","torusWallet","cleanUp","then","sessionStorage","setItem","FeedTypes","wallet","walletType","NONE","noWallet","TORUS","METAMASK","saveSession","sessionData","JSON","stringify","loadSession","getItem","parse","e","initialState","id","session","userSlice","createSlice","name","reducers","userLogin","state","action","payload","userLogout","_state","userUpdateId","userUpdateWalletType","actions","feedItems","isPostLoading","loading","currentUserId","isReplyLoading","parent","newPostLoadingState","item","fromId","newReplyLoadingState","inReplyTo","feedSlice","addFeedItem","newFeedItem","clearFeedItems","postLoading","isLoading","replyLoading","profileSlice","profiles","upsertProfile","b","key","oldProfile","newProfile","blockNumber","blockIndex","batchIndex","removeProfile","isFunction","o","isUint8Array","constructor","Uint8Array","createMediaAttachment","extension","path","extname","replace","URL","activityContentHashes","createHash","test","link","createVideoLink","createVideoAttachment","createAudioAttachment","createAudioLink","createImageAttachment","createImageLink","noteToActivityContentNote","note","uriList","activityContent","type","mediaType","content","published","Date","toISOString","map","createNote","activityPubNote","newPostFeedItem","Store","targetPath","_content","Promise","resolve","doWriteToStream","ws","ServerWriteStream","chunk","param1","param2","cb","chunks","push","fileLength","reduce","m","s","length","file","ArrayBuffer","bytes","i","offset","set","fetch","encodeURIComponent","mode","body","res","status","statusText","graphSlice","following","followers","upsertGraph","follower","followee","unfollow","newFollows","newFollowed","getSocialIdentities","core","contracts","registry","getRegistrationsByWalletAddress","createNewDSNPRegistration","createRegistration","batchAnnouncement","hash","announcement","batch","createFile","batchData","publication","buildPublication","announcements","AnnouncementType","Broadcast","publisher","publish","sendPost","post","storeActivityContent","buildAndSignPostAnnouncement","sendReply","reply","buildAndSignReplyAnnouncement","saveProfile","profile","buildAndSignProfile","startSubscriptions","dispatch","subscription","subscribeToBatchPublications","handleBatchAnnouncement","fromBlock","unsubscribeToBatchPublications","subscribeToRegistryUpdates","handleRegistryUpdate","unsubscribeToRegistryUpdate","setupProvider","eth","currentProvider","providers","Web3Provider","setConfig","signer","getSigner","store","announcementType","fileUrl","url","toString","fileHash","dispatchActivityContent","message","isActivityContentNoteType","dispatchFeedItem","isActivityContentProfileType","dispatchProfile","decoder","TextDecoder","decode","contentHash","uri","Reply","update","createProfile","identifiers","convertDSNPUserURIToDSNPUserId","dsnpUserURI","handle","fetchAndDispatchContent","json","console","log","openURL","reader","readFile","announcementRow","GraphChange","graphChange","objectId","changeType","DSNPGraphChangeType","Unfollow","dispatchGraphChange","obj","Profile","isBroadcastAnnouncement","catch","err","keccak256","serialize","createBroadcast","signature","replyFromId","replyInReplyTo","createReply","LoginButton","popoverVisible","setPopoverVisible","loginWalletOptions","loginWithWalletType","setWalletType","wtype","curSession","upsertSessionWalletType","HeaderLoginButton","placement","trigger","visible","onVisibleChange","className","onClick","aria-label","size","QuickStartLoginButton","avatarSizeOptions","Map","UserAvatar","profileAddress","avatarSize","iconURL","blockies","seed","toDataURL","alt","src","get","RegistrationModal","children","registrations","walletAddress","onIdResolved","React","useState","hasRegistrations","setHasRegistrations","isCreatingRegistration","setIsCreatingRegistration","registrationError","setRegistrationError","selectedRegistration","setRegistration","register","formValues","sdk","userURI","error","iconForRegistration","registration","href","registerNewHandleForm","initialValues","remember","onFinish","Item","rules","required","preventDefault","htmlType","selectHandleContent","disabled","Login","startLoading","registrationVisible","setRegistrationVisible","setWalletAddress","setRegistrations","userId","user","currentWalletType","setUserID","fromURI","newId","selectedType","waddr","removeItem","count","WalletOutlined","style","color","Header","NewPostImageUpload","onNewPostImageUpload","previewLoading","setPreviewLoading","urlErrorMsg","setUrlErrorMsg","newUri","setNewUri","setUriList","hasValidPostURI","match","image","index","onLoad","CloseCircleTwoTone","toBeDeletedIndex","deletedImageArray","splice","deleteImage","twoToneColor","spinning","cameraIcon","placeholder","value","onChange","target","newUriList","FromTitle","atHandle","primary","secondary","NewPost","onSuccess","onCancel","saving","setSaving","postMessage","setPostMessage","isValidPost","setIsValidPost","createPost","width","centered","title","footer","TextArea","handleMessageInputChange","rows","PostMedia","attachment","nextArrow","RightOutlined","prevArrow","LeftOutlined","dots","toLowerCase","rel","controls","playsinline","height","muted","RelativeTime","postStyle","postTime","monthNum","timeOfPost","secondsPast","getTime","Math","floor","getMonth","getDate","getFullYear","getRelativeTime","PostHashDropdown","isReply","isCopied","setIsCopied","isVisible","setIsVisible","menu","setTimeout","CheckCircleOutlined","navigator","clipboard","writeText","overlay","EllipsisOutlined","cachedProfiles","fromProfile","setFromProfile","useEffect","ReplyInput","replyValue","setReplyValue","event","newReplyFeedItem","autoSize","onPressEnter","BlankReply","ReplyBlock","replyFeed","feed","filter","Post","feedItem","noteContent","attachments","bordered","Meta","avatar","description","BlankPost","PostList","feedType","myGraph","graphs","initialFeed","sort","firstFeedItem","secondFeedItem","sortFeed","currentFeed","MY_FEED","MY_POSTS","ListStatus","Feed","isModalOpen","setIsModalOpen","DISCOVER","setFeedType","feedNavClassName","navItemType","LoginSetupInstructions","defaultActiveKey","TabPane","tab","ConnectionsListProfiles","listStatus","userRelationship","userProfile","profileForId","createdAt","connectionsList","FOLLOWERS","Object","keys","FOLLOWING","ConnectionsList","CLOSED","selectedListTitle","setSelectedListTitle","handleClick","listTitle","getClassName","newName","setNewName","newHandle","setNewHandle","didEditProfile","setDidEditProfile","profileName","sectionName","isEditing","setIsEditing","saveEditProfile","ProfileBlock","App","unsubscribeFunctions","values","forEach","unsubscribe","location","hostname","configureStore","reducer","ReactDOM","render","document","getElementById","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.87ed29bb.chunk.js","sourcesContent":["import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport type { RootState, AppDispatch } from \"./store\";\n\n// Typed hooks to use instead of useDispatch and useSelector\n\n// Disable explicit module boundaries so that the dispatch types can all be correctly inferred.\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { JsonRpcPayload, JsonRpcResponse } from \"web3-core-helpers\";\n\ninterface ConnectInfo {\n  chainId: string;\n}\n\ninterface ProviderRpcError extends Error {\n  message: string;\n  code: number;\n  data?: unknown;\n}\n\ninterface ProviderMessage {\n  type: string;\n  data: unknown;\n}\n\ninterface RequestArguments {\n  method: string;\n  params?: unknown[] | Record<string, unknown>;\n  from?: string;\n}\n\ninterface Callback<ResultType> {\n  (error: Error): void;\n  (error: null, val: ResultType): void;\n}\n\nexport interface EthereumProvider {\n  isMetaMask?: boolean;\n  autoRefreshOnNetworkChange: boolean;\n  chainId: number;\n\n  isConnected(): boolean;\n\n  on(event: \"accountsChanged\", handler: (addresses: string[]) => void): void;\n  on(event: \"chainChanged\", handler: (chainId: string) => void): void;\n  on(event: \"connect\", handler: (connectInfo: ConnectInfo) => void): void;\n  on(event: \"disconnect\", handler: (error: ProviderRpcError) => void): void;\n  on(event: \"message\", handler: (message: ProviderMessage) => void): void;\n\n  request(request: RequestArguments): Promise<any>;\n\n  sendAsync(\n    payload: JsonRpcPayload,\n    callback: (error: Error | null, result?: JsonRpcResponse) => void\n  ): void;\n  send(payload: JsonRpcPayload, callback: Callback<JsonRpcResponse>): any;\n}\n// eip-1193\nconst ethereum = (window as any).ethereum as\n  | EthereumProvider\n  | null\n  | undefined;\n\nif (ethereum) (ethereum as EthereumProvider).autoRefreshOnNetworkChange = false;\n\nexport default ethereum;\n","import { HexString } from \"../../utilities/types\";\nimport metamaskWallet from \"./metamask\";\nimport torusWallet from \"./torus\";\nimport Web3 from \"web3\";\n\n// HOW TO ADD A WALLET\n// Add the new wallet to the enum and switch/case\n// Both places are marked with a comment\n// Then, create a Folder for the new wallet with it's implementation\n// code. create an index.ts file in the folder that implements\n// the Wallet interface below. Look at torus or metamask for\n// an example.\n\nexport enum WalletType {\n  NONE = \"NONE\",\n  TORUS = \"TORUS\",\n  METAMASK = \"METAMASK\",\n  // Add new WalletTypes Here\n}\n\nexport const wallet = (walletType: WalletType): Wallet => {\n  switch (walletType) {\n    case WalletType.NONE:\n      return noWallet;\n    case WalletType.TORUS:\n      return torusWallet;\n    case WalletType.METAMASK:\n      return metamaskWallet;\n    // Add new WalletTypes Here\n  }\n};\n\nexport interface Wallet {\n  icon: string;\n  login: () => Promise<HexString>;\n  logout: () => void;\n  reload: () => void;\n  getAddress: () => Promise<HexString>;\n  getWeb3: () => Web3;\n}\n\nconst noWallet: Wallet = {\n  icon:\n    \"https://icons.veryicon.com/png/o/business/business-style-icon/wallet-62.png\",\n  login: async () => await \"\",\n  logout: () => {\n    return;\n  },\n  reload: () => {\n    return;\n  },\n  getAddress: async () => await \"\",\n  getWeb3: () => new Web3(),\n};\n","import Web3 from \"web3\";\nimport { HexString } from \"../../../utilities/types\";\nimport ethereum, { EthereumProvider } from \"./ethereum\";\n\nconst mmweb3 = new Web3(ethereum as EthereumProvider);\n\nexport const getWeb3 = (): Web3 => {\n  if (!isInstalled()) throw new Error(\"Metamask not installed\");\n  return mmweb3;\n};\n\nexport const isInstalled = (): boolean => {\n  return Boolean(ethereum?.isMetaMask);\n};\n\nexport const getWalletAddress = async (): Promise<HexString> => {\n  const response = await ethereum?.request({ method: \"eth_requestAccounts\" });\n  if (!response) throw new Error(\"Metamask not installed\");\n  return response.result ? response.result[0] : response[0];\n};\n","import * as metamask from \"./metamask\";\nimport { Wallet } from \"../wallet\";\n\nconst metamaskWallet: Wallet = {\n  icon:\n    \"https://cdn.iconscout.com/icon/free/png-512/metamask-2728406-2261817.png\",\n  login: async () => {\n    if (!metamask.isInstalled()) throw new Error(\"Metamask not installed\");\n    return metamask.getWalletAddress();\n  },\n  logout: () => {\n    return;\n  },\n  reload: () => {\n    return;\n  },\n  getAddress: async () => {\n    return metamask.getWalletAddress();\n  },\n  getWeb3: () => {\n    return metamask.getWeb3();\n  },\n};\n\nexport default metamaskWallet;\n","import Web3 from \"web3\";\nimport Torus from \"@toruslabs/torus-embed\";\nimport { provider } from \"web3-core\";\n\nexport type BuildEnvironment =\n  | \"production\"\n  | \"development\"\n  | \"binance\"\n  | \"testing\"\n  | \"lrc\"\n  | \"beta\"\n  | undefined;\n\n// interface TorusCtorArgs in torus-embeded types\nconst torusSettings = {\n  //buttonPosition?: 'top-left' | 'top-right' | 'bottom-right' | 'bottom-left'\n  //modalZIndex?: number\n  //apiKey?: string\n};\n\n// interface WhiteLabelParams in torus-embeded types\n// example data structure here: https://github.com/torusresearch/torus-embed/blob/master/examples/vue-app/src/data.js\nconst popupStyling = {\n  theme: {\n    isDark: false,\n    colors: {\n      torusBrand1: \"#000000\",\n      torusGray2: \"#FBF7F3\",\n    },\n  },\n  logoDark: \"https://avatars.githubusercontent.com/u/78103996?s=200&v=4\",\n  logoLight: \"https://avatars.githubusercontent.com/u/78103996?s=200&v=4\",\n  //topupHide?: boolean\n  //featuredBillboardHide?: boolean\n  //disclaimerHide?: boolean\n  //tncLink?: LocaleLinks<string>\n  //privacyPolicy?: LocaleLinks<string>\n  //contactLink?: LocaleLinks<string>\n  //customTranslations?: LocaleLinks<any>\n};\n\n// interface TorusParams in trous-embeded types\nconst initSettings = (buildEnv: BuildEnvironment) => {\n  return {\n    buildEnv:\n      (process.env.REACT_APP_TORUS_BUILD_ENV as BuildEnvironment) ||\n      buildEnv ||\n      \"production\",\n    network: {\n      host: process.env.REACT_APP_CHAIN_HOST || \"http://localhost:8545\",\n      chainId: Number(process.env.REACT_APP_CHAIN_ID) || 1337,\n      networkName: process.env.REACT_APP_CHAIN_NAME || \"Localchain\",\n    },\n    showTorusButton: true,\n    whiteLabel: popupStyling,\n  };\n};\n\nconst web3Torus = {\n  web3: new Web3(),\n  torus: null as Torus | null,\n  initialized: false,\n  setweb3: function (provider: provider): void {\n    const web3Inst = new Web3(provider);\n    web3Torus.web3 = web3Inst;\n    this.web3.setProvider(provider);\n  },\n  initialize: async function (buildEnv: BuildEnvironment): Promise<void> {\n    const torus = new Torus(torusSettings);\n    await torus.init(initSettings(buildEnv));\n    this.initialized = true;\n    try {\n      await torus.login({ verifier: undefined });\n      web3Torus.setweb3(torus.provider);\n      web3Torus.torus = torus;\n    } catch (error) {\n      torus.clearInit();\n      this.initialized = false;\n      throw new Error(\"Login Cancelled\");\n    }\n  },\n};\n\nexport default web3Torus;\n","import Web3 from \"web3\";\nimport { HexString } from \"../../../utilities/types\";\nimport web3Torus, { BuildEnvironment } from \"./tweb3\";\n\n// Torus doesn't give us access to their internal verifier types\n// They also don't enforce their own verifier system consistently\n// This means we need to create our own and update it.\n// This verifiers array is our list of approved verifiers based\n// off their internal list. That list can be found here:\n// https://github.com/torusresearch/torus-embed/blob/master/types/embed.d.ts\nconst verifiers = [\"google\", \"reddit\", \"discord\"] as const;\ntype VerifierTypes = typeof verifiers[number];\ntype AddressType = undefined | string | { address: string };\n\ninterface UserInfo {\n  email: string;\n  name: string;\n  profileImage: string;\n  verifier: string;\n  verifierId: string;\n}\n\nexport const enableTorus = async (\n  buildEnv?: BuildEnvironment\n): Promise<void> => {\n  await web3Torus.initialize(buildEnv || \"production\");\n};\n\nexport const isInitialized = (): boolean => {\n  return web3Torus.initialized;\n};\n\nexport const getUserInfo = async (): Promise<UserInfo> => {\n  const userInfo = await web3Torus.torus?.getUserInfo(\n    \"This site is requesting your information\"\n  );\n  if (!userInfo) throw new Error(\"Unable to find user's info\");\n  return userInfo;\n};\n\nexport const logout = (): void => {\n  web3Torus.torus?.cleanUp().then(() => {\n    sessionStorage.setItem(\"pageUsingTorus\", \"false\");\n  });\n};\n\nexport const getPublicAddress = async (\n  verifier: VerifierTypes,\n  verifierId: string\n): Promise<AddressType> => {\n  return await web3Torus.torus?.getPublicAddress({\n    verifier,\n    verifierId,\n    isExtended: true,\n  });\n};\n\nexport const getWalletAddress = async (): Promise<HexString> => {\n  const { verifier, verifierId } = await getUserInfo();\n  const typedVerifier: VerifierTypes = getTypedVerifier(verifier);\n  const walletAddressHolder = await getPublicAddress(typedVerifier, verifierId);\n  if (!walletAddressHolder) throw new Error(\"No Wallet Address found for User\");\n  if (typeof walletAddressHolder === \"string\") return walletAddressHolder;\n  return walletAddressHolder.address;\n};\n\nconst getTypedVerifier = (untypedVerifier: string): VerifierTypes => {\n  const typedVerifier = verifiers.find((verifier) => {\n    return untypedVerifier.includes(verifier);\n  });\n\n  if (!typedVerifier) throw new Error(\"Unknown Verifier\");\n  return typedVerifier as VerifierTypes;\n};\n\nexport const getWeb3 = (): Web3 => {\n  return web3Torus.web3;\n};\n","import * as torus from \"./torus\";\nimport { Wallet } from \"../wallet\";\n\nconst torusWallet: Wallet = {\n  icon:\n    \"data:image/jpeg;base64,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\",\n  login: async () => {\n    await torus.enableTorus();\n    return await torus.getWalletAddress();\n  },\n  logout: () => {\n    if (torus.isInitialized()) {\n      torus.logout();\n    }\n  },\n  reload: async () => {\n    if (torus.isInitialized()) return;\n    await torus.enableTorus();\n  },\n  getAddress: async () => {\n    return await torus.getWalletAddress();\n  },\n  getWeb3: () => {\n    return torus.getWeb3();\n  },\n};\n\nexport default torusWallet;\n","import React from \"react\";\nimport Post from \"./Post\";\nimport { FeedItem } from \"../utilities/types\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\nimport BlankPost from \"./BlankPost\";\n\nenum FeedTypes {\n  MY_FEED,\n  MY_POSTS,\n  DISCOVER,\n}\n\ninterface PostListProps {\n  feedType: FeedTypes;\n}\n\nconst sortFeed = (feed: FeedItem[]): FeedItem[] => {\n  feed.sort(\n    (firstFeedItem: FeedItem, secondFeedItem: FeedItem) =>\n      secondFeedItem.blockNumber - firstFeedItem.blockNumber\n  );\n  return feed;\n};\n\nconst PostList = ({ feedType }: PostListProps): JSX.Element => {\n  const userId: DSNPUserId | undefined = useAppSelector(\n    (state) => state.user.id\n  );\n  const myGraph: Record<DSNPUserId, boolean> = useAppSelector(\n    (state) => (userId ? state.graphs.following[userId] : undefined) || {}\n  );\n\n  const initialFeed: FeedItem[] = useAppSelector(\n    (state) => state.feed.feedItems\n  ).filter(\n    (post) => post?.content?.type === \"Note\" && post?.inReplyTo === undefined\n  );\n  const loading: boolean = useAppSelector(\n    (state) => state.feed.isPostLoading.loading\n  );\n\n  const feed: FeedItem[] = sortFeed(initialFeed);\n\n  let currentFeed: FeedItem[] = [];\n\n  if (feedType === FeedTypes.MY_FEED) {\n    currentFeed = feed.filter(\n      (post) => post?.fromId === userId || post?.fromId in myGraph\n    );\n  } else if (feedType === FeedTypes.MY_POSTS) {\n    currentFeed = feed.filter((post) => userId === post?.fromId);\n  } else {\n    currentFeed = feed;\n  }\n\n  return (\n    <div className=\"PostList__block\">\n      {loading && <BlankPost />}\n      {currentFeed.length > 0 ? (\n        <>\n          {currentFeed.map((post, index) => (\n            <Post key={index} feedItem={post} />\n          ))}\n        </>\n      ) : (\n        \"Empty Feed!\"\n      )}\n    </div>\n  );\n};\n\nexport default PostList;\n","import { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\nimport { WalletType } from \"./wallets/wallet\";\n\ninterface SessionData {\n  id: DSNPUserId | undefined;\n  walletType: WalletType;\n}\n\nconst saveSession = (sessionData: SessionData): SessionData => {\n  sessionStorage.setItem(\"session\", JSON.stringify(sessionData));\n  return sessionData;\n};\n\nexport const clearSession = (): void => {\n  sessionStorage.removeItem(\"session\");\n};\n\nexport const loadSession = (): SessionData | null => {\n  try {\n    const sessionData = sessionStorage.getItem(\"session\");\n    return sessionData ? JSON.parse(sessionData) : null;\n  } catch (e) {\n    return null;\n  }\n};\n\nexport const upsertSessionWalletType = (wtype: WalletType): void => {\n  const curSession = loadSession() || {\n    id: undefined,\n    walletType: WalletType.NONE,\n  };\n\n  saveSession({ ...curSession, walletType: wtype });\n};\n\nexport const upsertSessionUserId = (newId: DSNPUserId): void => {\n  const curSession = loadSession() || {\n    id: undefined,\n    walletType: WalletType.NONE,\n  };\n  saveSession({ ...curSession, id: newId });\n};\n\nexport const hasSession = (): boolean => !!sessionStorage.getItem(\"session\");\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport * as wallet from \"../../services/wallets/wallet\";\nimport * as session from \"../../services/session\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\n\ninterface UserState {\n  id?: DSNPUserId;\n  walletType: wallet.WalletType;\n}\n\nconst initialState: UserState = {\n  id: session.hasSession() ? session.loadSession()?.id : undefined,\n  walletType: session.loadSession()?.walletType ?? wallet.WalletType.NONE,\n};\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    userLogin: (state, action: PayloadAction<UserState>) => ({\n      ...state,\n      ...action.payload,\n    }),\n    userLogout: (_state) => ({ walletType: wallet.WalletType.NONE }),\n    userUpdateId: (state, action: PayloadAction<DSNPUserId>) => ({\n      ...state,\n      id: action.payload,\n    }),\n    userUpdateWalletType: (\n      state,\n      action: PayloadAction<wallet.WalletType>\n    ) => ({\n      ...state,\n      walletType: action.payload,\n    }),\n  },\n});\nexport const {\n  userLogin,\n  userLogout,\n  userUpdateId,\n  userUpdateWalletType,\n} = userSlice.actions;\nexport default userSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { FeedItem, HexString } from \"../../utilities/types\";\n\ninterface isPostLoadingType {\n  loading: boolean;\n  currentUserId: HexString | undefined;\n}\n\ninterface isReplyLoadingType {\n  loading: boolean;\n  parent: HexString | undefined;\n}\n\ninterface feedState {\n  feedItems: FeedItem[];\n  isPostLoading: isPostLoadingType;\n  isReplyLoading: isReplyLoadingType;\n}\n\nconst initialState: feedState = {\n  feedItems: [],\n  isPostLoading: { loading: false, currentUserId: undefined },\n  isReplyLoading: { loading: false, parent: undefined },\n};\n\nconst newPostLoadingState = (\n  state: isPostLoadingType,\n  item: FeedItem\n): isPostLoadingType => {\n  if (state.loading && state.currentUserId === item.fromId)\n    return { loading: false, currentUserId: undefined };\n  return state;\n};\n\nconst newReplyLoadingState = (\n  state: isReplyLoadingType,\n  item: FeedItem\n): isReplyLoadingType => {\n  if (state.loading && state.parent === item.inReplyTo) {\n    return { loading: false, parent: undefined };\n  }\n  return state;\n};\n\nexport const feedSlice = createSlice({\n  name: \"feed\",\n  initialState,\n  reducers: {\n    addFeedItem: (state, action: PayloadAction<FeedItem>) => {\n      const newFeedItem = action.payload;\n      return {\n        ...state,\n        feedItems: [...state.feedItems, newFeedItem],\n        isPostLoading: newPostLoadingState(state.isPostLoading, newFeedItem),\n        isReplyLoading: newReplyLoadingState(state.isReplyLoading, newFeedItem),\n      };\n    },\n    clearFeedItems: (state) => {\n      return {\n        ...state,\n        feedItems: [],\n      };\n    },\n    postLoading: (state, isLoading: PayloadAction<isPostLoadingType>) => {\n      return {\n        ...state,\n        isPostLoading: {\n          loading: isLoading.payload.loading,\n          currentUserId: isLoading.payload.currentUserId,\n        },\n      };\n    },\n    replyLoading: (state, isLoading: PayloadAction<isReplyLoadingType>) => {\n      return {\n        ...state,\n        isReplyLoading: {\n          loading: isLoading.payload.loading,\n          parent: isLoading.payload.parent,\n        },\n      };\n    },\n  },\n});\n\nexport const {\n  addFeedItem,\n  clearFeedItems,\n  postLoading,\n  replyLoading,\n} = feedSlice.actions;\n\nexport default feedSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { HexString, Profile } from \"../../utilities/types\";\n\ninterface profileState {\n  profiles: Record<HexString, Profile>;\n}\n\nconst initialState: profileState = {\n  profiles: {},\n};\n\n// choose latest profile comparing by blockNumber then blockIndex then batchIndex\nconst latestProfile = (a: Profile, b: Profile): Profile => {\n  if (!a || a.blockNumber === undefined) return b;\n  if (!b || b.blockNumber === undefined) return a;\n  if (b.blockNumber !== a.blockNumber) {\n    return b.blockNumber > a.blockNumber ? b : a;\n  } else if (b.blockIndex !== a.blockIndex) {\n    return b.blockIndex > a.blockIndex ? b : a;\n  }\n  return b.batchIndex > a.batchIndex ? b : a;\n};\n\nexport const profileSlice = createSlice({\n  name: \"profiles\",\n  initialState,\n  reducers: {\n    upsertProfile: (state, action: PayloadAction<Profile>) => {\n      const key = action.payload.fromId;\n      const oldProfile = state.profiles[key];\n      const newProfile = oldProfile\n        ? { ...oldProfile, ...action.payload }\n        : action.payload;\n      return {\n        profiles: {\n          ...state.profiles,\n          [key]: latestProfile(oldProfile, newProfile),\n        },\n      };\n    },\n    removeProfile: (state, action: PayloadAction<HexString>) => {\n      const { [action.payload]: _, ...newProfiles } = state.profiles;\n      return { profiles: newProfiles };\n    },\n  },\n});\nexport const { upsertProfile, removeProfile } = profileSlice.actions;\nexport default profileSlice.reducer;\n","export const isFunction = (o: unknown): boolean => typeof o == \"function\";\nexport const isUint8Array = (o: unknown): boolean =>\n  typeof o == \"object\" && (o as any).constructor === Uint8Array;\n","import path from \"path\";\nimport {\n  ActivityContentNote,\n  ActivityContentAttachment,\n  createVideoLink,\n  createVideoAttachment,\n  ActivityContentHash,\n  createImageAttachment,\n  createImageLink,\n  createHash,\n  createAudioLink,\n  createAudioAttachment,\n} from \"@dsnp/sdk/core/activityContent\";\n\nconst createMediaAttachment = (item: string): ActivityContentAttachment => {\n  const extension = path.extname(item).replace(\".\", \"\");\n\n  const host = new URL(item).host;\n\n  const supportedVideoDomains = /(youtu\\.be|youtube\\.com|vimeo\\.com|soundcloud.com)$/;\n\n  const contentHash = createHash(item);\n  const activityContentHashes: Array<ActivityContentHash> = [contentHash];\n\n  if (supportedVideoDomains.test(host)) {\n    const link = createVideoLink(item, \"text/html\", activityContentHashes);\n    return createVideoAttachment([link]);\n  } else {\n    switch (extension) {\n      case \"mp4\":\n        return createVideoAttachment([\n          createVideoLink(item, \"video/mp4\", activityContentHashes),\n        ]);\n      case \"wmv\":\n        return createVideoAttachment([\n          createVideoLink(item, \"video/x-ms-wmv\", activityContentHashes),\n        ]);\n      case \"mov\":\n        return createVideoAttachment([\n          createVideoLink(item, \"video/quicktime\", activityContentHashes),\n        ]);\n      case \"webm\":\n        return createVideoAttachment([\n          createVideoLink(item, \"video/webm\", activityContentHashes),\n        ]);\n      case \"mp3\":\n        return createAudioAttachment([\n          createAudioLink(item, \"audio/mpeg\", activityContentHashes),\n        ]);\n      case \"ogg\":\n        return createAudioAttachment([\n          createAudioLink(item, \"audio/ogg\", activityContentHashes),\n        ]);\n      default:\n        return createImageAttachment([\n          createImageLink(item, `image/${extension}`, activityContentHashes),\n        ]);\n    }\n  }\n};\n\nexport const noteToActivityContentNote = (\n  note: string,\n  uriList: string[]\n): ActivityContentNote => {\n  const activityContent: ActivityContentNote = {\n    \"@context\": \"https://www.w3.org/ns/activitystreams\",\n    type: \"Note\",\n    mediaType: \"text/plain\",\n    content: note,\n    published: new Date().toISOString(),\n  };\n  if (uriList) {\n    activityContent[\"attachment\"] = uriList.map(createMediaAttachment);\n  }\n  return activityContent;\n};\n","import { FeedItem } from \"../utilities/types\";\nimport {\n  Content,\n  WriteStreamCallback,\n  WriteStream,\n  StoreInterface,\n} from \"@dsnp/sdk/core/store\";\nimport { isFunction, isUint8Array } from \"./utilities\";\nimport { ActivityContentNote } from \"@dsnp/sdk/core/activityContent\";\nimport { noteToActivityContentNote } from \"../utilities/activityContent\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\n\nexport const createNote = async (\n  note: string,\n  uriList: string[],\n  fromId: DSNPUserId | undefined\n): Promise<FeedItem> => {\n  // send content to api\n  const activityPubNote: ActivityContentNote = noteToActivityContentNote(\n    note,\n    uriList\n  );\n  const newPostFeedItem: Partial<FeedItem> = {\n    fromId: fromId,\n    content: activityPubNote,\n  };\n  return newPostFeedItem;\n};\n\nexport class Store implements StoreInterface {\n  put(targetPath: string, _content: Content): Promise<URL> {\n    return Promise.resolve(\n      new URL(`${process.env.REACT_APP_UPLOAD_HOST}/${targetPath}`)\n    );\n  }\n\n  async putStream(\n    targetPath: string,\n    doWriteToStream: WriteStreamCallback\n  ): Promise<URL> {\n    const ws = new ServerWriteStream(targetPath);\n    await doWriteToStream(ws);\n    return new URL(`${process.env.REACT_APP_UPLOAD_HOST}/${targetPath}`);\n  }\n}\n\ntype WriteCallback = (error: Error | null | undefined) => void;\ntype EndCallback = () => void;\n\n/* eslint-disable no-dupe-class-members */\nclass ServerWriteStream implements WriteStream {\n  chunks: Uint8Array[] = [];\n  targetPath: string;\n\n  constructor(path: string) {\n    this.targetPath = path;\n  }\n\n  write(chunk: unknown, encoding?: string, callback?: WriteCallback): boolean;\n  write(chunk: unknown, cb?: WriteCallback): boolean;\n\n  write(\n    chunk: unknown,\n    param1?: string | WriteCallback,\n    param2?: WriteCallback\n  ): boolean {\n    const cb = typeof param1 == \"string\" ? param2 : param1;\n\n    this.chunks.push(chunk as Uint8Array);\n\n    if (cb) cb(null);\n    return true;\n  }\n\n  end(cb?: EndCallback): void;\n  end(chunk: unknown, cb?: EndCallback): void;\n  end(chunk: unknown, encoding?: string, cb?: EndCallback): void;\n\n  end(...args: any): void {\n    if (isUint8Array(args[0])) {\n      this.chunks.push(args[0] as Uint8Array);\n    }\n\n    let cb: () => void;\n    if (isFunction(args[0])) {\n      cb = args[0] as EndCallback;\n    } else if (isFunction(args[1])) {\n      cb = args[1] as EndCallback;\n    } else {\n      cb = args[2] as EndCallback;\n    }\n\n    const fileLength = this.chunks.reduce((m, s) => m + s.length, 0);\n    const file = new ArrayBuffer(fileLength);\n    const bytes = new Uint8Array(file);\n    for (let i = 0, offset = 0; i < this.chunks.length; i++) {\n      bytes.set(this.chunks[i], offset);\n      offset += this.chunks[i].length;\n    }\n\n    fetch(\n      `${\n        process.env.REACT_APP_UPLOAD_HOST\n      }/upload?filename=${encodeURIComponent(this.targetPath)}`,\n      {\n        method: \"POST\",\n        mode: \"cors\",\n        body: file,\n      }\n    ).then((res: Response) => {\n      if (res.status !== 201) {\n        throw Error(`failed to post stream: ${res.status} ${res.statusText}`);\n      }\n      if (cb) cb();\n    });\n  }\n}\n","import { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { GraphChange } from \"../../utilities/types\";\n\ninterface graphState {\n  following: Record<DSNPUserId, Record<DSNPUserId, boolean>>;\n  followers: Record<DSNPUserId, Record<DSNPUserId, boolean>>;\n}\n\nconst initialState: graphState = {\n  following: {},\n  followers: {},\n};\n\nexport const graphSlice = createSlice({\n  name: \"graphs\",\n  initialState,\n  reducers: {\n    upsertGraph: (state, action: PayloadAction<GraphChange>) => {\n      const { follower, followee } = action.payload;\n      if (action.payload.unfollow) {\n        // unfollow\n        const { [followee]: _a, ...newFollows } =\n          state.following[follower] || {};\n        const { [follower]: _b, ...newFollowed } =\n          state.followers[followee] || {};\n        return {\n          following: { ...state.following, [follower]: newFollows },\n          followers: { ...state.followers, [followee]: newFollowed },\n        };\n      } else {\n        // follow\n        return {\n          following: {\n            ...state.following,\n            [follower]: {\n              ...(state.following[follower] || {}),\n              [followee]: true,\n            },\n          },\n          followers: {\n            ...state.followers,\n            [followee]: {\n              ...(state.followers[followee] || {}),\n              [follower]: true,\n            },\n          },\n        };\n      }\n    },\n  },\n});\nexport const { upsertGraph } = graphSlice.actions;\nexport default graphSlice.reducer;\n","import { FeedItem, HexString, Profile, Reply } from \"../utilities/types\";\nimport * as fakesdk from \"./fakesdk\";\nimport { setConfig, createRegistration, core } from \"@dsnp/sdk\";\nimport { Publication } from \"@dsnp/sdk/core/contracts/publisher\";\nimport { RegistryUpdateLogData } from \"@dsnp/sdk/core/contracts/registry\";\nimport { providers } from \"ethers\";\nimport { keccak256 } from \"web3-utils\";\nimport { addFeedItem, clearFeedItems } from \"../redux/slices/feedSlice\";\nimport { upsertProfile } from \"../redux/slices/profileSlice\";\nimport { AnyAction, ThunkDispatch } from \"@reduxjs/toolkit\";\nimport { Store } from \"./Storage\";\nimport {\n  ActivityContentNote,\n  ActivityContentProfile,\n  isActivityContentNoteType,\n  isActivityContentProfileType,\n  createProfile,\n} from \"@dsnp/sdk/core/activityContent\";\nimport {\n  BroadcastAnnouncement,\n  AnnouncementType,\n  SignedBroadcastAnnouncement,\n  SignedReplyAnnouncement,\n  ReplyAnnouncement,\n  GraphChangeAnnouncement,\n  DSNPGraphChangeType,\n  SignedProfileAnnouncement,\n  SignedAnnouncement,\n} from \"@dsnp/sdk/core/announcements\";\nimport { BatchPublicationLogData } from \"@dsnp/sdk/core/contracts/subscription\";\nimport { WalletType } from \"./wallets/wallet\";\nimport torusWallet from \"./wallets/torus\";\nimport { upsertGraph } from \"../redux/slices/graphSlice\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\n\ninterface BatchFileData {\n  url: URL;\n  hash: HexString;\n}\n\ntype Dispatch = ThunkDispatch<any, Record<string, any>, AnyAction>;\n\nexport const getSocialIdentities =\n  core.contracts.registry.getRegistrationsByWalletAddress;\n\nexport const createNewDSNPRegistration = createRegistration;\n\nexport const getProfile = async (fromId: HexString): Promise<Profile> => {\n  const profile = await fakesdk.getProfileFromSocialIdentity(fromId);\n  if (!profile) throw new Error(\"Invalid Social Identity Address\");\n  return profile;\n};\n\nconst batchAnnouncement = async (\n  hash: HexString,\n  announcement: SignedAnnouncement\n): Promise<void> => {\n  const batchData = await core.batch.createFile(hash + \".parquet\", [\n    announcement,\n  ]);\n\n  const publication = buildPublication(\n    batchData,\n    core.announcements.AnnouncementType.Broadcast\n  );\n\n  await core.contracts.publisher.publish([publication]);\n};\n\nexport const sendPost = async (post: FeedItem): Promise<void> => {\n  if (!post.content) return;\n  const hash = await storeActivityContent(post.content);\n  const announcement = await buildAndSignPostAnnouncement(hash, post);\n\n  await batchAnnouncement(hash, announcement);\n};\n\nexport const sendReply = async (\n  reply: Reply,\n  inReplyTo: HexString\n): Promise<void> => {\n  if (!reply.content || !inReplyTo) return;\n\n  const hash = await storeActivityContent(reply.content);\n  const announcement = await buildAndSignReplyAnnouncement(\n    hash,\n    reply.fromId,\n    inReplyTo\n  );\n\n  await batchAnnouncement(hash, announcement);\n};\n\nexport const saveProfile = async (\n  fromId: DSNPUserId,\n  profile: ActivityContentProfile\n): Promise<void> => {\n  const hash = await storeActivityContent(profile);\n  const announcement = await buildAndSignProfile(fromId, hash);\n\n  await batchAnnouncement(hash, announcement);\n};\n\nexport const startSubscriptions = async (\n  dispatch: ThunkDispatch<any, Record<string, any>, AnyAction>\n): Promise<Record<string, any>> => {\n  dispatch(clearFeedItems());\n\n  // subscribe to all announcements\n  let blockNumber: number;\n  let blockIndex = 0;\n  const unsubscribeToBatchPublications = await core.contracts.subscription.subscribeToBatchPublications(\n    (announcement: BatchPublicationLogData) => {\n      if (announcement.blockNumber !== blockNumber) {\n        blockNumber = announcement.blockNumber;\n        blockIndex = 0;\n      } else {\n        blockIndex++;\n      }\n      handleBatchAnnouncement(dispatch, announcement, blockIndex);\n    },\n    {\n      fromBlock: 1,\n    }\n  );\n\n  // subscribe to registry events\n  const unsubscribeToRegistryUpdate = await core.contracts.subscription.subscribeToRegistryUpdates(\n    handleRegistryUpdate(dispatch),\n    {\n      fromBlock: 1,\n    }\n  );\n\n  return {\n    unsubscribeToRegistryUpdate,\n    unsubscribeToBatchPublications,\n  };\n};\n\nexport const setupProvider = (walletType: WalletType): void => {\n  let eth;\n\n  if (walletType === WalletType.TORUS) {\n    eth = torusWallet.getWeb3().currentProvider;\n  } else if (walletType === WalletType.METAMASK) {\n    const global: any = window;\n    eth = global.ethereum;\n\n    if (!eth) {\n      throw new Error(\n        \"Could not create provider, because ethereum has not been set\"\n      );\n    }\n  } else {\n    throw new Error(\n      `Unknown walletType attempting to setup provider: ${walletType}`\n    );\n  }\n\n  const provider = new providers.Web3Provider(eth);\n  setConfig({\n    provider: provider,\n    signer: provider.getSigner(),\n    store: new Store(),\n  });\n};\n\nconst buildPublication = (\n  batchData: BatchFileData,\n  type: AnnouncementType.Broadcast | AnnouncementType.Reply\n): Publication => {\n  return {\n    announcementType: type,\n    fileUrl: batchData.url.toString(),\n    fileHash: batchData.hash,\n  };\n};\n\n// TODO: move this dispatch code into a callback for subscribe\nconst dispatchActivityContent = (\n  dispatch: Dispatch,\n  message: BroadcastAnnouncement,\n  activityContent: ActivityContentNote | ActivityContentProfile,\n  blockNumber: number,\n  blockIndex: number,\n  batchIndex: number\n) => {\n  if (isActivityContentNoteType(activityContent)) {\n    return dispatchFeedItem(\n      dispatch,\n      message,\n      activityContent as ActivityContentNote,\n      blockNumber\n    );\n  } else if (isActivityContentProfileType(activityContent)) {\n    return dispatchProfile(\n      dispatch,\n      message,\n      activityContent as ActivityContentProfile,\n      blockNumber,\n      blockIndex,\n      batchIndex\n    );\n  }\n};\n\nconst dispatchFeedItem = (\n  dispatch: Dispatch,\n  message: BroadcastAnnouncement | ReplyAnnouncement,\n  content: ActivityContentNote,\n  blockNumber: number\n) => {\n  const decoder = new TextDecoder();\n  dispatch(\n    addFeedItem({\n      fromId: decoder.decode((message.fromId as any) as Uint8Array),\n      blockNumber: blockNumber,\n      hash: decoder.decode((message.contentHash as any) as Uint8Array),\n      published: content.published,\n      uri: decoder.decode((message.url as any) as Uint8Array),\n      content: content,\n      inReplyTo:\n        message.announcementType === core.announcements.AnnouncementType.Reply\n          ? decoder.decode((message.inReplyTo as any) as Uint8Array)\n          : undefined,\n    })\n  );\n};\n\nconst dispatchProfile = (\n  dispatch: Dispatch,\n  message: BroadcastAnnouncement,\n  profile: ActivityContentProfile,\n  blockNumber: number,\n  blockIndex: number,\n  batchIndex: number\n) => {\n  const decoder = new TextDecoder();\n\n  dispatch(\n    upsertProfile({\n      ...profile,\n      fromId: decoder.decode((message.fromId as any) as Uint8Array),\n      blockNumber,\n      blockIndex,\n      batchIndex,\n    } as Profile)\n  );\n};\n\nconst handleRegistryUpdate = (dispatch: Dispatch) => (\n  update: RegistryUpdateLogData\n) => {\n  dispatch(\n    upsertProfile({\n      ...createProfile(),\n      fromId: core.identifiers.convertDSNPUserURIToDSNPUserId(\n        update.dsnpUserURI\n      ),\n      handle: update.handle,\n    } as Profile)\n  );\n};\n\nexport const isGraphChangeAnnouncement = (\n  obj: unknown\n): obj is GraphChangeAnnouncement => {\n  return (\n    (obj as Record<string, unknown>)[\"announcementType\"] ===\n    AnnouncementType.GraphChange\n  );\n};\n\nexport const isBroadcastAnnouncement = (\n  obj: unknown\n): obj is BroadcastAnnouncement => {\n  const type = (obj as Record<string, unknown>)[\"announcementType\"];\n  return (\n    type === AnnouncementType.Profile ||\n    type === AnnouncementType.Broadcast ||\n    type === AnnouncementType.Reply\n  );\n};\n\nconst fetchAndDispatchContent = async (\n  dispatch: Dispatch,\n  message: BroadcastAnnouncement,\n  blockNumber: number,\n  blockIndex: number,\n  batchIndex: number\n) => {\n  const decoder = new TextDecoder();\n\n  try {\n    const url = decoder.decode((message.url as any) as Uint8Array);\n    const res = await fetch(url);\n    const activityContent = await res.json();\n    dispatchActivityContent(\n      dispatch,\n      message,\n      activityContent,\n      blockNumber,\n      blockIndex,\n      batchIndex\n    );\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst dispatchGraphChange = (\n  dispatch: Dispatch,\n  graphChange: GraphChangeAnnouncement\n) => {\n  const decoder = new TextDecoder();\n  dispatch(\n    upsertGraph({\n      follower: decoder.decode((graphChange.fromId as any) as Uint8Array),\n      followee: decoder.decode((graphChange.objectId as any) as Uint8Array),\n      unfollow: graphChange.changeType === DSNPGraphChangeType.Unfollow,\n    })\n  );\n};\n\nconst handleBatchAnnouncement = (\n  dispatch: Dispatch,\n  batchAnnouncement: BatchPublicationLogData,\n  blockIndex: number\n) => {\n  let batchIndex = 0;\n  core.batch\n    .openURL((batchAnnouncement.fileUrl.toString() as any) as URL)\n    .then((reader: any) =>\n      core.batch.readFile(reader, (announcementRow: AnnouncementType) => {\n        const announcement = announcementRow as unknown;\n        if (isGraphChangeAnnouncement(announcement)) {\n          dispatchGraphChange(dispatch, announcement);\n        } else if (isBroadcastAnnouncement(announcement)) {\n          fetchAndDispatchContent(\n            dispatch,\n            announcement,\n            batchAnnouncement.blockNumber,\n            blockIndex,\n            batchIndex++\n          );\n        }\n      })\n    )\n    .catch((err) => console.log(err));\n};\n\nconst storeActivityContent = async (\n  content: ActivityContentNote | ActivityContentProfile\n): Promise<string> => {\n  const hash = keccak256(core.activityContent.serialize(content));\n  await fetch(\n    `${process.env.REACT_APP_UPLOAD_HOST}/upload?filename=${encodeURIComponent(\n      hash + \".json\"\n    )}`,\n    {\n      method: \"POST\",\n      mode: \"cors\",\n      body: JSON.stringify(content),\n    }\n  );\n  return hash;\n};\n\nconst buildAndSignPostAnnouncement = async (\n  hash: string,\n  post: FeedItem\n): Promise<SignedBroadcastAnnouncement> => ({\n  ...core.announcements.createBroadcast(\n    post.fromId,\n    `${process.env.REACT_APP_UPLOAD_HOST}/${hash}.json`,\n    hash\n  ),\n  signature: \"0x00000000\", // TODO: call out to wallet to get this signed\n});\n\nconst buildAndSignReplyAnnouncement = async (\n  hash: string,\n  replyFromId: HexString,\n  replyInReplyTo: HexString\n): Promise<SignedReplyAnnouncement> => ({\n  ...core.announcements.createReply(\n    replyFromId,\n    `${process.env.REACT_APP_UPLOAD_HOST}/${hash}.json`,\n    hash,\n    replyInReplyTo\n  ),\n  signature: \"0x00000000\", // TODO: call out to wallet to get this signed\n});\n\nconst buildAndSignProfile = async (\n  fromId: DSNPUserId,\n  hash: string\n): Promise<SignedProfileAnnouncement> => ({\n  ...core.announcements.createProfile(\n    fromId,\n    `${process.env.REACT_APP_UPLOAD_HOST}/${hash}.json`,\n    hash\n  ),\n  signature: \"0x00000000\", // TODO: call out to wallet to get this signed\n});\n","import { Button, Popover, Spin } from \"antd\";\nimport * as wallet from \"../services/wallets/wallet\";\nimport React from \"react\";\nimport { userUpdateWalletType } from \"../redux/slices/userSlice\";\nimport { useAppDispatch } from \"../redux/hooks\";\nimport { upsertSessionWalletType } from \"../services/session\";\n\ninterface LoginButtonProps {\n  popoverVisible: boolean;\n  setPopoverVisible: any;\n  loginWalletOptions: wallet.WalletType;\n  loading: boolean;\n  loginWithWalletType: (wallet: wallet.WalletType) => void;\n}\n\nconst LoginButton = ({\n  popoverVisible,\n  setPopoverVisible,\n  loginWalletOptions,\n  loading,\n  loginWithWalletType,\n}: LoginButtonProps): JSX.Element => {\n  const handleVisibleChange = (visible: boolean) => {\n    setPopoverVisible(visible);\n  };\n\n  const dispatch = useAppDispatch();\n\n  const setWalletType = (wtype: wallet.WalletType) => {\n    dispatch(userUpdateWalletType(wtype));\n    upsertSessionWalletType(wtype);\n    loginWithWalletType(wtype);\n  };\n\n  const HeaderLoginButton = (\n    <Popover\n      placement=\"bottomRight\"\n      trigger=\"click\"\n      visible={popoverVisible}\n      onVisibleChange={handleVisibleChange}\n      content={\n        <div className=\"LoginButton__loginOptions\">\n          <Button\n            className=\"LoginButton__loginTorus\"\n            onClick={() => setWalletType(wallet.WalletType.TORUS)}\n          >\n            Torus\n          </Button>\n          <Button\n            className=\"LoginButton__loginMetamask\"\n            onClick={() => setWalletType(wallet.WalletType.METAMASK)}\n          >\n            MetaMask\n          </Button>\n        </div>\n      }\n    >\n      <Button className=\"LoginButton__loginButton\" aria-label=\"Login\">\n        Log In\n        {loading && <Spin className=\"LoginButton__spinner\" size=\"small\" />}\n      </Button>\n    </Popover>\n  );\n\n  const QuickStartLoginButton = (\n    <Button\n      className=\"LoginButton__loginButton LoginButton__loginButton--quickStart\"\n      aria-label=\"Login\"\n      onClick={() => loginWithWalletType(loginWalletOptions)}\n    >\n      Log In With {loginWalletOptions}\n      {loading && <Spin className=\"LoginButton__spinner\" size=\"small\" />}\n    </Button>\n  );\n\n  return (\n    <>\n      {loginWalletOptions === wallet.WalletType.NONE\n        ? HeaderLoginButton\n        : QuickStartLoginButton}\n    </>\n  );\n};\nexport default LoginButton;\n","import React from \"react\";\nimport { Avatar } from \"antd\";\nimport { HexString } from \"../utilities/types\";\nimport * as blockies from \"blockies-ts\";\n\nconst avatarSizeOptions = new Map([\n  [\"small\", 32],\n  [\"medium\", 50],\n  [\"large\", 100],\n]);\n\ninterface UserAvatarProps {\n  icon: string | undefined;\n  profileAddress: HexString | undefined;\n  avatarSize: string;\n}\n\nconst UserAvatar = ({\n  icon,\n  profileAddress,\n  avatarSize,\n}: UserAvatarProps): JSX.Element => {\n  const iconURL =\n    icon ||\n    (profileAddress && blockies.create({ seed: profileAddress }).toDataURL());\n  return (\n    <Avatar\n      className=\"UserAvatar\"\n      alt={profileAddress || \"anonymous\"}\n      src={iconURL}\n      size={avatarSizeOptions.get(avatarSize)}\n    />\n  );\n};\n\nexport default UserAvatar;\n","import React from \"react\";\nimport { Alert, Button, Form, Input, Popover } from \"antd\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport UserAvatar from \"./UserAvatar\";\nimport { core } from \"@dsnp/sdk\";\nimport * as sdk from \"../services/sdk\";\nimport * as registry from \"@dsnp/sdk/core/contracts/registry\";\nimport { HexString, Profile } from \"../utilities/types\";\nimport { Registration } from \"@dsnp/sdk/core/contracts/registry\";\nimport { DSNPUserURI } from \"@dsnp/sdk/dist/types/core/identifiers\";\n\ninterface RegistrationModalProps {\n  children: JSX.Element;\n  visible: boolean;\n  registrations: registry.Registration[];\n  walletAddress: HexString;\n  onIdResolved: (uri: DSNPUserURI) => void;\n}\n\nconst RegistrationModal = ({\n  children,\n  visible,\n  registrations,\n  walletAddress,\n  onIdResolved,\n}: RegistrationModalProps): JSX.Element => {\n  const [hasRegistrations, setHasRegistrations] = React.useState<boolean>(\n    false\n  );\n\n  const [\n    isCreatingRegistration,\n    setIsCreatingRegistration,\n  ] = React.useState<boolean>(true);\n\n  const [registrationError, setRegistrationError] = React.useState<\n    string | undefined\n  >(undefined);\n\n  const [selectedRegistration, setRegistration] = React.useState<\n    registry.Registration | undefined\n  >(undefined);\n\n  const profiles: Record<HexString, Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n\n  // Flip to select registration if we see registrations increase\n  if (registrations.length && !hasRegistrations) {\n    setHasRegistrations(true);\n    setIsCreatingRegistration(false);\n  }\n\n  // convert registration to uri before calling callback\n  const commitRegistration = () => {\n    if (!selectedRegistration) return;\n    onIdResolved(selectedRegistration.dsnpUserURI);\n  };\n\n  // create new DSNP registration\n  const register = async (formValues: { handle: string }) => {\n    try {\n      const userURI = await sdk.createNewDSNPRegistration(\n        walletAddress,\n        formValues.handle\n      );\n      onIdResolved(core.identifiers.convertDSNPUserURIToDSNPUserId(userURI));\n    } catch (error) {\n      console.error(error);\n      setRegistrationError(\n        `Error registering: ${error.message || error.toString()}`\n      );\n    }\n  };\n\n  // Find the profile photo a given DSNP registration\n  const iconForRegistration = (\n    registration: registry.Registration\n  ): string | undefined =>\n    profiles[\n      core.identifiers.convertDSNPUserURIToDSNPUserId(registration.dsnpUserURI)\n    ]?.icon?.[0].href;\n\n  /**\n   * New Registration Form\n   */\n  const registerNewHandleForm = (\n    <Form\n      name=\"createHandle\"\n      className=\"RegistrationModal__createHandle\"\n      initialValues={{\n        remember: true,\n      }}\n      onFinish={register}\n    >\n      {registrationError && <Alert message={registrationError} type=\"error\" />}\n      <p>Please create a handle:</p>\n      <Form.Item\n        name=\"handle\"\n        className=\"RegistrationModal__handleInput\"\n        rules={[\n          {\n            required: true,\n            message: \"Handle cannot be blank\",\n          },\n        ]}\n      >\n        <Input />\n      </Form.Item>\n      <div className=\"RegistrationModal__footer\">\n        {hasRegistrations && (\n          <button\n            onClick={(e) => {\n              e.preventDefault();\n              setIsCreatingRegistration(false);\n            }}\n            className=\"RegisrationModal__changeMode\"\n          >\n            Select Existing Handle\n          </button>\n        )}\n        <Button\n          type=\"primary\"\n          htmlType=\"submit\"\n          className=\"RegistrationModal__footerBtn\"\n        >\n          Choose handle\n        </Button>\n      </div>\n    </Form>\n  );\n\n  /**\n   * Select Existing Handle UI\n   */\n  const selectHandleContent = (\n    <div>\n      <p>You have multiple handles associated with your account.</p>\n      <h3>Select an account:</h3>\n      <div className=\"RegistrationModal__registrations\">\n        {registrations.map((registration: Registration) => (\n          <button\n            className={`RegistrationModal__registration${\n              registration === selectedRegistration\n                ? \" RegistrationModal__registration--selected\"\n                : \"\"\n            }`}\n            onClick={() => setRegistration(registration)}\n            key={registration.dsnpUserURI}\n          >\n            <UserAvatar\n              icon={iconForRegistration(registration)}\n              profileAddress={registration.dsnpUserURI}\n              avatarSize=\"small\"\n            />\n            {`@${registration.handle}`}\n          </button>\n        ))}\n      </div>\n      <div className=\"RegistrationModal__footer\">\n        <button\n          onClick={() => setIsCreatingRegistration(true)}\n          className=\"RegisrationModal__changeMode\"\n        >\n          Create New Handle\n        </button>\n        <Button\n          className=\"RegistrationModal__footerBtn\"\n          key=\"post\"\n          type=\"primary\"\n          disabled={!selectedRegistration}\n          onClick={commitRegistration}\n        >\n          Select Handle\n        </Button>\n      </div>\n    </div>\n  );\n\n  /**\n   * Create a popover with either registration or handle selection UI.\n   */\n  return (\n    <Popover\n      placement=\"bottomRight\"\n      visible={visible}\n      content={\n        <div className=\"RegistrationModal\">\n          <h2>Welcome!</h2>\n          {isCreatingRegistration ? registerNewHandleForm : selectHandleContent}\n        </div>\n      }\n    >\n      {children}\n    </Popover>\n  );\n};\n\nexport default RegistrationModal;\n","import React from \"react\";\nimport { Badge, Button } from \"antd\";\nimport { WalletOutlined } from \"@ant-design/icons\";\nimport { useAppDispatch, useAppSelector } from \"../redux/hooks\";\nimport { userLogout, userUpdateId } from \"../redux/slices/userSlice\";\nimport * as sdk from \"../services/sdk\";\nimport * as wallet from \"../services/wallets/wallet\";\nimport * as session from \"../services/session\";\nimport LoginButton from \"./LoginButton\";\nimport { Registration } from \"@dsnp/sdk/core/contracts/registry\";\nimport RegistrationModal from \"./RegistrationModal\";\nimport { core } from \"@dsnp/sdk\";\n\ninterface LoginProps {\n  loginWalletOptions: wallet.WalletType;\n}\n\nconst Login = ({ loginWalletOptions }: LoginProps): JSX.Element => {\n  const [loading, startLoading] = React.useState<boolean>(false);\n  const [popoverVisible, setPopoverVisible] = React.useState<boolean>(false);\n  const [registrationVisible, setRegistrationVisible] = React.useState<boolean>(\n    false\n  );\n\n  const [walletAddress, setWalletAddress] = React.useState<string>(\"\");\n  const [registrations, setRegistrations] = React.useState<Registration[]>([]);\n\n  const dispatch = useAppDispatch();\n  const userId = useAppSelector((state) => state.user.id);\n  const currentWalletType = useAppSelector((state) => state.user.walletType);\n\n  const setUserID = (fromURI: string) => {\n    const fromId = core.identifiers.convertDSNPUserURIToDSNPUserId(fromURI);\n    dispatch(userUpdateId(fromId));\n    session.upsertSessionUserId(fromId);\n    setRegistrationVisible(false);\n  };\n\n  const login = async (selectedType: wallet.WalletType) => {\n    if (loading) return;\n    startLoading(true);\n    try {\n      const waddr = await wallet.wallet(selectedType).login();\n      setWalletAddress(waddr);\n      sdk.setupProvider(selectedType);\n      const registrations = await sdk.getSocialIdentities(waddr);\n      if (registrations.length === 1) {\n        setUserID(registrations[0].dsnpUserURI);\n      } else {\n        setRegistrations(registrations);\n        setRegistrationVisible(true);\n      }\n    } catch (error) {\n      logout();\n    } finally {\n      setPopoverVisible(false);\n      startLoading(false);\n    }\n  };\n\n  const logout = () => {\n    session.clearSession();\n    setRegistrationVisible(false);\n    setWalletAddress(\"\");\n    if (currentWalletType !== wallet.WalletType.NONE) {\n      wallet.wallet(currentWalletType).logout();\n    }\n    dispatch(userLogout());\n  };\n\n  return (\n    <div className=\"Login__block\">\n      {!userId ? (\n        <RegistrationModal\n          visible={registrationVisible}\n          registrations={registrations}\n          onIdResolved={setUserID}\n          walletAddress={walletAddress}\n        >\n          <LoginButton\n            popoverVisible={popoverVisible}\n            setPopoverVisible={setPopoverVisible}\n            loginWalletOptions={loginWalletOptions}\n            loading={loading}\n            loginWithWalletType={login}\n          />\n        </RegistrationModal>\n      ) : (\n        <>\n          <Badge\n            count={<WalletOutlined style={{ color: \"#52C41A\" }} />}\n            offset={[-48, 8]}\n          >\n            <img\n              className=\"Login__walletIcon\"\n              src={wallet.wallet(currentWalletType).icon}\n              alt=\"Wallet Symbol\"\n            />\n          </Badge>\n\n          <Button\n            className=\"Login__logOutButton\"\n            aria-label=\"Logout\"\n            onClick={logout}\n          >\n            Log Out\n          </Button>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Login;\n","import React from \"react\";\nimport Login from \"./Login\";\nimport * as wallet from \"../services/wallets/wallet\";\n\nconst Header = (): JSX.Element => {\n  return (\n    <div className=\"Header__block\">\n      <h1 className=\"Header__title\">Example Client</h1>\n      <Login loginWalletOptions={wallet.WalletType.NONE} />\n    </div>\n  );\n};\nexport default Header;\n","export default __webpack_public_path__ + \"static/media/Camera.a7abe56b.svg\";","import { Alert, Input, Spin } from \"antd\";\nimport { CloseCircleTwoTone } from \"@ant-design/icons\";\nimport React from \"react\";\nimport cameraIcon from \"../images/Camera.svg\";\nimport { HexString } from \"../utilities/types\";\nimport { Button } from \"antd\";\n\ninterface NewPostImageUploadProps {\n  onNewPostImageUpload: (uris: string[]) => void;\n}\n\nconst NewPostImageUpload = ({\n  onNewPostImageUpload,\n}: NewPostImageUploadProps): JSX.Element => {\n  const [previewLoading, setPreviewLoading] = React.useState<boolean>(false);\n  const [urlErrorMsg, setUrlErrorMsg] = React.useState<string | null>(null);\n  const [newUri, setNewUri] = React.useState<string>(\"\");\n  const [uriList, setUriList] = React.useState<string[]>([]);\n  const hasValidPostURI = newUri && newUri.match(/.+\\..+\\//);\n\n  const newContentItem = (value: HexString) => {\n    setNewUri(value);\n    setUrlErrorMsg(null);\n  };\n\n  const addContentToList = () => {\n    if (hasValidPostURI) {\n      const newUriList = [...uriList, newUri];\n      setUriList(newUriList);\n      onNewPostImageUpload(newUriList);\n      setNewUri(\"\");\n    } else {\n      setUrlErrorMsg(\"Invalid URL.\");\n    }\n  };\n\n  const deleteImage = (toBeDeletedIndex: number) => {\n    const deletedImageArray = [...uriList];\n    deletedImageArray.splice(toBeDeletedIndex, 1);\n    setUriList(deletedImageArray);\n    onNewPostImageUpload(deletedImageArray);\n  };\n  return (\n    <>\n      <div className=\"NewPostImageUpload__cover\">\n        {uriList &&\n          uriList.map((image, index) => {\n            return (\n              <div className=\"NewPostImageUpload__imageBlock\" key={index}>\n                <img\n                  alt=\"\"\n                  className=\"NewPostImageUpload__image\"\n                  src={image}\n                  onLoad={() => setPreviewLoading(false)}\n                />\n                <CloseCircleTwoTone\n                  className=\"NewPostImageUpload__imageDelete\"\n                  onClick={() => deleteImage(index)}\n                  twoToneColor=\"#9e9e9e\"\n                />\n              </div>\n            );\n          })}\n        {newUri && (\n          <Spin\n            className=\"NewPostImageUpload__spinner\"\n            spinning={previewLoading}\n          />\n        )}\n      </div>\n      <div className=\"NewPostImageUpload__urlInputBlock\">\n        <img\n          className=\"NewPostImageUpload__icon\"\n          src={cameraIcon}\n          alt=\"camera\"\n        />\n        <Input\n          className=\"NewPostImageUpload__urlInput\"\n          placeholder=\"Image URL\"\n          value={newUri || \"\"}\n          onChange={(e) => {\n            setPreviewLoading(true);\n            newContentItem(e.target.value);\n          }}\n        />\n        <Button\n          className=\"NewPostImageUpload__urlInputBtn\"\n          onClick={addContentToList}\n        >\n          Add\n        </Button>\n      </div>\n      {urlErrorMsg && (\n        <Alert\n          className=\"NewPostImageUpload__alert\"\n          type=\"error\"\n          message={urlErrorMsg}\n        />\n      )}\n    </>\n  );\n};\nexport default NewPostImageUpload;\n","import React from \"react\";\nimport { Profile } from \"../utilities/types\";\n\ninterface FromTitleProps {\n  profile: Partial<Profile>;\n}\n\nexport const FromTitle = ({ profile }: FromTitleProps): JSX.Element => {\n  const atHandle = profile.handle && \"@\" + profile.handle;\n  const primary = profile.name || atHandle || profile.fromId;\n  const secondary = profile.name ? atHandle : undefined;\n\n  return (\n    <span>\n      {primary}\n      {secondary && <span className=\"FromLine__secondary\">{secondary}</span>}\n    </span>\n  );\n};\n","import React from \"react\";\nimport { Button, Space, Spin, Modal, Input } from \"antd\";\nimport { useAppDispatch, useAppSelector } from \"../redux/hooks\";\nimport UserAvatar from \"./UserAvatar\";\nimport NewPostImageUpload from \"./NewPostImageUpload\";\nimport { FeedItem, HexString, Profile } from \"../utilities/types\";\nimport { createNote } from \"../services/Storage\";\nimport { sendPost } from \"../services/sdk\";\nimport { createProfile } from \"@dsnp/sdk/core/activityContent\";\nimport { FromTitle } from \"./FromTitle\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\nimport { postLoading } from \"../redux/slices/feedSlice\";\n\ninterface NewPostProps {\n  onSuccess: () => void;\n  onCancel: () => void;\n}\n\nconst NewPost = ({ onSuccess, onCancel }: NewPostProps): JSX.Element => {\n  const dispatch = useAppDispatch();\n  const [saving, setSaving] = React.useState<boolean>(false);\n  const [uriList, setUriList] = React.useState<string[]>([]);\n  const [postMessage, setPostMessage] = React.useState<string>(\"\");\n  const [isValidPost, setIsValidPost] = React.useState<boolean>(false);\n\n  const userId: DSNPUserId | undefined = useAppSelector(\n    (state) => state.user.id\n  );\n\n  const profiles: Record<HexString, Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n\n  const profile = (userId && profiles[userId]) || {\n    ...createProfile(),\n    fromId: userId || \"\",\n  };\n\n  const success = () => {\n    setSaving(false);\n    onSuccess();\n  };\n\n  const createPost = async () => {\n    if (!profile) return;\n    const newPostFeedItem: FeedItem = await createNote(\n      postMessage,\n      uriList,\n      userId\n    );\n    await sendPost(newPostFeedItem);\n    dispatch(postLoading({ loading: true, currentUserId: userId }));\n    success();\n  };\n\n  const handleMessageInputChange = (\n    e: React.ChangeEvent<HTMLTextAreaElement>\n  ) => {\n    if (saving) return;\n    e.target.value !== \"\" ? setIsValidPost(true) : setIsValidPost(false);\n    setPostMessage(e.target.value);\n  };\n\n  return (\n    <Modal\n      className=\"NewPost\"\n      visible={true}\n      onCancel={onCancel}\n      width=\"535px\"\n      centered={true}\n      title={\"Create a post\"}\n      footer={[\n        <Spin spinning={saving} key={1}>\n          <Space>\n            <Button\n              className=\"NewPost__footerBtn\"\n              key=\"post\"\n              type=\"primary\"\n              disabled={!isValidPost || saving}\n              onClick={createPost}\n            >\n              Post\n            </Button>\n          </Space>\n        </Spin>,\n      ]}\n    >\n      <div className=\"NewPost__profileBlock\">\n        <UserAvatar\n          icon={profile?.icon?.[0]?.href}\n          profileAddress={userId}\n          avatarSize={\"small\"}\n        />\n        <h3 className=\"NewPost__profileBlockName\">\n          <FromTitle profile={profile}></FromTitle>\n        </h3>\n      </div>\n      <Input.TextArea\n        className=\"NewPost__textArea\"\n        placeholder=\"Message\"\n        value={postMessage || \"\"}\n        onChange={(e) => handleMessageInputChange(e)}\n        rows={6}\n      />\n      <NewPostImageUpload onNewPostImageUpload={setUriList} />\n    </Modal>\n  );\n};\n\nexport default NewPost;\n","import React from \"react\";\nimport ReactPlayer from \"react-player\";\nimport { Carousel } from \"antd\";\nimport { RightOutlined, LeftOutlined } from \"@ant-design/icons\";\nimport {\n  ActivityContentAttachment,\n  ActivityContentImage,\n  ActivityContentVideo,\n  ActivityContentAudio,\n} from \"@dsnp/sdk/core/activityContent\";\n\ninterface PostMediaProps {\n  attachment: ActivityContentAttachment[];\n}\n\nconst PostMedia = ({ attachment }: PostMediaProps): JSX.Element => {\n  const getPostMediaItems = () => {\n    return attachment.map((item, index) => {\n      const type = item?.type?.toLowerCase();\n      return (\n        <div key={index} className=\"PostMedia__cover\">\n          {type === \"image\" && (\n            <a\n              href={(item as ActivityContentImage).url[0].href}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <img\n                alt={item.name}\n                className=\"PostMedia__img\"\n                src={(item as ActivityContentImage).url[0].href}\n              />\n            </a>\n          )}\n          {(type === \"video\" || type === \"audio\") && (\n            <ReactPlayer\n              controls\n              playsinline\n              className=\"PostMedia__img\"\n              url={\n                (item as ActivityContentVideo | ActivityContentAudio).url[0]\n                  .href\n              }\n              width={670}\n              height={type === \"video\" ? 400 : 55}\n              muted\n            />\n          )}\n        </div>\n      );\n    });\n  };\n\n  return (\n    <Carousel\n      nextArrow={<RightOutlined />}\n      prevArrow={<LeftOutlined />}\n      dots={true}\n    >\n      {getPostMediaItems()}\n    </Carousel>\n  );\n};\nexport default PostMedia;\n","import React from \"react\";\n\nconst getMonthName = (monthNum: number) => {\n  monthNum--;\n  const months = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sept\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n  return months[monthNum];\n};\n\nconst getRelativeTime = (postTime: string) => {\n  const timeOfPost = new Date(postTime);\n  const currentTime = new Date();\n  const secondsPast = (currentTime.getTime() - timeOfPost.getTime()) / 1000;\n  if (secondsPast < 60) {\n    return Math.floor(secondsPast) + \"s \";\n  }\n  if (secondsPast < 3600) {\n    return Math.floor(secondsPast / 60) + \"m \";\n  }\n  if (secondsPast <= 86400) {\n    return Math.floor(secondsPast / 3600) + \"h \";\n  }\n  if (secondsPast > 86400) {\n    return `${getMonthName(\n      timeOfPost.getMonth()\n    )} ${timeOfPost.getDate()}, ${timeOfPost.getFullYear()} `;\n  }\n};\n\ninterface RelativeTimeProps {\n  published: string;\n  postStyle: boolean;\n}\n\nconst RelativeTime = ({\n  published,\n  postStyle,\n}: RelativeTimeProps): JSX.Element => {\n  return (\n    <p className={`RelativeTime ${postStyle ? \"RelativeTime--post\" : \"\"}`}>\n      {getRelativeTime(published)}\n    </p>\n  );\n};\n\nexport default RelativeTime;\n","import React, { useState } from \"react\";\nimport { Menu, Dropdown } from \"antd\";\nimport { CheckCircleOutlined, EllipsisOutlined } from \"@ant-design/icons\";\nimport { HexString } from \"../utilities/types\";\n\ninterface PostHashDropdownProps {\n  hash: HexString;\n  isReply?: boolean;\n}\n\nconst PostHashDropdown = ({\n  hash,\n  isReply,\n}: PostHashDropdownProps): JSX.Element => {\n  const [isCopied, setIsCopied] = useState<boolean>(false);\n  const [isVisible, setIsVisible] = useState<boolean>(false);\n  const menu = (\n    <Menu onClick={() => setIsVisible(true)}>\n      <Menu.Item\n        key=\"valid\"\n        onClick={() => {\n          setIsCopied(true);\n          setTimeout(function () {\n            setIsCopied(false);\n          }, 2000);\n        }}\n      >\n        {isCopied ? (\n          <div>\n            <CheckCircleOutlined /> Copied!\n          </div>\n        ) : (\n          <div\n            className=\"PostHashDropdown__menuHash\"\n            onClick={() => navigator.clipboard.writeText(hash)}\n          >\n            Hash: {hash}\n          </div>\n        )}\n      </Menu.Item>\n    </Menu>\n  );\n  return (\n    <Dropdown\n      className={\n        isReply ? \"PostHashDropdown__replyBlock\" : \"PostHashDropdown__block\"\n      }\n      overlay={menu}\n      visible={isVisible}\n      onVisibleChange={(e) => setIsVisible(e)}\n      placement=\"bottomRight\"\n    >\n      <button\n        className=\"PostHashDropdown__button\"\n        onClick={(e) => e.preventDefault()}\n      >\n        <EllipsisOutlined />\n      </button>\n    </Dropdown>\n  );\n};\n\nexport default PostHashDropdown;\n","import React, { useEffect, useState } from \"react\";\nimport * as types from \"../utilities/types\";\nimport UserAvatar from \"./UserAvatar\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport PostHashDropdown from \"./PostHashDropdown\";\n\ninterface ReplyProps {\n  reply: types.Reply;\n}\n\nconst Reply = ({ reply }: ReplyProps): JSX.Element => {\n  const cachedProfiles: Record<string, types.Profile> = useAppSelector(\n    (state) => state.profiles.profiles\n  );\n  const [fromProfile, setFromProfile] = useState<types.Profile | undefined>(\n    undefined\n  );\n\n  useEffect(() => {\n    setFromProfile(cachedProfiles[reply.fromId]);\n  }, [cachedProfiles, reply]);\n\n  return (\n    <div className=\"Reply__block\">\n      <PostHashDropdown hash={reply.hash} isReply={true} />\n      <UserAvatar\n        icon={fromProfile?.icon?.[0]?.href}\n        profileAddress={reply.fromId}\n        avatarSize=\"small\"\n      />\n      <div className=\"Reply__message\">\n        <div className=\"Reply__name\">\n          {fromProfile?.name || fromProfile?.fromId}\n        </div>\n        {reply.content.content}\n      </div>\n    </div>\n  );\n};\n\nexport default Reply;\n","import { Input } from \"antd\";\nimport React, { useState } from \"react\";\nimport { createNote } from \"../services/Storage\";\nimport { sendReply } from \"../services/sdk\";\nimport { HexString } from \"../utilities/types\";\nimport { useAppDispatch, useAppSelector } from \"../redux/hooks\";\nimport { replyLoading } from \"../redux/slices/feedSlice\";\n\ninterface ReplyInputProps {\n  parent: HexString;\n}\n\nconst ReplyInput = ({ parent }: ReplyInputProps): JSX.Element => {\n  const dispatch = useAppDispatch();\n  const userId = useAppSelector((state) => state.user.id);\n  const [saving, setSaving] = React.useState<boolean>(false);\n  const [replyValue, setReplyValue] = useState<string>(\"\");\n\n  const createReply = async (\n    event: React.KeyboardEvent<HTMLTextAreaElement>\n  ) => {\n    event.preventDefault();\n    if (!userId) return;\n    setSaving(true);\n    const newReplyFeedItem = await createNote(replyValue, [], userId);\n    await sendReply(newReplyFeedItem, parent);\n    dispatch(replyLoading({ loading: true, parent: parent }));\n    setReplyValue(\"\");\n    setSaving(false);\n  };\n\n  return (\n    <div className=\"ReplyInput__newReplyBlock\">\n      <Input.TextArea\n        className=\"ReplyInput__input\"\n        placeholder=\"Reply...\"\n        value={replyValue}\n        onChange={(e) => {\n          if (saving) return;\n          setReplyValue(e.target.value);\n        }}\n        autoSize={true}\n        onPressEnter={(event) => createReply(event)}\n      />\n    </div>\n  );\n};\n\nexport default ReplyInput;\n","import React from \"react\";\nimport UserAvatar from \"./UserAvatar\";\n\nconst BlankReply = (): JSX.Element => {\n  return (\n    <div className=\"BlankReply__block\">\n      <UserAvatar\n        icon={undefined}\n        profileAddress={undefined}\n        avatarSize=\"small\"\n      />\n      <div className=\"BlankReply__messageBlock\">\n        <div className=\"BlankReply__name\"> </div>\n        <div className=\"BlankReply__message\"> </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BlankReply;\n","import React from \"react\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport { FeedItem, HexString } from \"../utilities/types\";\nimport Reply from \"./Reply\";\nimport ReplyInput from \"./ReplyInput\";\nimport BlankReply from \"./BlankReply\";\n\ninterface isReplyLoadingType {\n  loading: boolean;\n  parent: HexString | undefined;\n}\n\ninterface ReplyBlockProps {\n  parent: HexString;\n}\n\nconst ReplyBlock = ({ parent }: ReplyBlockProps): JSX.Element => {\n  const replyFeed: FeedItem[] = useAppSelector(\n    (state) => state.feed.feedItems\n  ).filter((reply) => {\n    return reply?.content?.type === \"Note\" && reply?.inReplyTo === parent;\n  }) as FeedItem[];\n\n  const loading: isReplyLoadingType = useAppSelector(\n    (state) => state.feed.isReplyLoading\n  );\n\n  return (\n    <>\n      {(parent === loading?.parent || replyFeed.length > 0) && (\n        <div className=\"ReplyBlock__repliesList\">\n          {replyFeed.length > 0 && (\n            <>\n              {replyFeed.map((reply, index) => (\n                <Reply reply={reply} key={index} />\n              ))}\n            </>\n          )}\n          {parent === loading?.parent && <BlankReply />}\n        </div>\n      )}\n      <ReplyInput parent={parent} />\n    </>\n  );\n};\n\nexport default ReplyBlock;\n","import React from \"react\";\nimport { Card } from \"antd\";\nimport { FeedItem, HexString, Profile } from \"../utilities/types\";\nimport UserAvatar from \"./UserAvatar\";\nimport PostMedia from \"./PostMedia\";\nimport RelativeTime from \"./RelativeTime\";\nimport ReplyBlock from \"./ReplyBlock\";\nimport PostHashDropdown from \"./PostHashDropdown\";\nimport { ActivityContentImage } from \"@dsnp/sdk/core/activityContent\";\nimport { FromTitle } from \"./FromTitle\";\nimport { useAppSelector } from \"../redux/hooks\";\n\ninterface PostProps {\n  feedItem: FeedItem;\n}\n\nconst Post = ({ feedItem }: PostProps): JSX.Element => {\n  const noteContent = feedItem.content;\n  const attachments = noteContent.attachment;\n\n  const profiles: Record<HexString, Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n\n  const profile: Profile = profiles[feedItem.fromId] || {\n    fromId: feedItem.fromId,\n  };\n\n  return (\n    <Card key={feedItem.hash} className=\"Post__block\" bordered={false}>\n      <Card.Meta\n        avatar={\n          <UserAvatar\n            icon={profile.icon?.[0]?.href}\n            profileAddress={feedItem.fromId}\n            avatarSize={\"medium\"}\n          />\n        }\n        title={<FromTitle profile={profile} />}\n        description={\n          noteContent.published && (\n            <RelativeTime published={noteContent.published} postStyle={true} />\n          )\n        }\n      />\n      <PostHashDropdown hash={feedItem.hash} />\n      <div className=\"Post__caption\">{noteContent.content}</div>\n      {attachments && (\n        <PostMedia attachment={attachments as ActivityContentImage[]} />\n      )}\n      <ReplyBlock parent={feedItem.hash} />\n    </Card>\n  );\n};\n\nexport default Post;\n","import React from \"react\";\nimport { Card } from \"antd\";\nimport UserAvatar from \"./UserAvatar\";\n\nconst BlankPost = (): JSX.Element => {\n  return (\n    <Card className=\"BlankPost__block\" bordered={false}>\n      <Card.Meta\n        avatar={\n          <UserAvatar\n            icon={undefined}\n            profileAddress={undefined}\n            avatarSize={\"medium\"}\n          />\n        }\n        title={<div className=\"BlankPost__title\"> </div>}\n        description={<div className=\"BlankPost__description\"> </div>}\n      />\n      <div className=\"BlankPost__contentLine1\"> </div>\n      <div className=\"BlankPost__contentLine2\"> </div>\n      <div className=\"BlankPost__contentLine3\"> </div>\n    </Card>\n  );\n};\n\nexport default BlankPost;\n","import React, { useState } from \"react\";\nimport NewPost from \"./NewPost\";\nimport PostList from \"./PostList\";\nimport { Button } from \"antd\";\nimport { useAppSelector } from \"../redux/hooks\";\n\nenum FeedTypes {\n  MY_FEED,\n  MY_POSTS,\n  DISCOVER,\n}\n\nconst Feed = (): JSX.Element => {\n  const userId = useAppSelector((state) => state.user.id);\n  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\n  const [feedType, setFeedType] = useState<FeedTypes>(FeedTypes.DISCOVER);\n\n  const feedNavClassName = (navItemType: FeedTypes) =>\n    feedType === navItemType\n      ? \"Feed__navigationItem Feed__navigationItem--active\"\n      : \"Feed__navigationItem\";\n\n  return (\n    <div className=\"Feed__block\">\n      <div className=\"Feed__header\">\n        <nav className=\"Feed__navigation\">\n          <div\n            className={feedNavClassName(FeedTypes.DISCOVER)}\n            onClick={() => setFeedType(FeedTypes.DISCOVER)}\n          >\n            Discover\n          </div>\n          <div className=\"Feed__navigationSpacer\"></div>\n          <div\n            className={feedNavClassName(FeedTypes.MY_FEED)}\n            onClick={() => setFeedType(FeedTypes.MY_FEED)}\n          >\n            My Feed\n          </div>\n          <div className=\"Feed__navigationSpacer\"></div>\n          <div\n            className={feedNavClassName(FeedTypes.MY_POSTS)}\n            onClick={() => setFeedType(FeedTypes.MY_POSTS)}\n          >\n            My Posts\n          </div>\n        </nav>\n        {userId && (\n          <Button\n            className=\"Feed__newPostButton\"\n            onClick={() => setIsModalOpen(true)}\n          >\n            New Post\n          </Button>\n        )}\n        {isModalOpen && (\n          <NewPost\n            onSuccess={() => setIsModalOpen(false)}\n            onCancel={() => setIsModalOpen(false)}\n          />\n        )}\n      </div>\n      <PostList feedType={feedType} />\n    </div>\n  );\n};\nexport default Feed;\n","import React from \"react\";\nimport UserAvatar from \"./UserAvatar\";\nimport { Button } from \"antd\";\nimport { Profile } from \"../utilities/types\";\nimport { HexString } from \"@dsnp/sdk/dist/types/types/Strings\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\nimport { createProfile } from \"@dsnp/sdk/core/activityContent\";\nimport { AnnouncementType } from \"@dsnp/sdk/core/announcements\";\n\nenum ListStatus {\n  CLOSED,\n  FOLLOWERS,\n  FOLLOWING,\n}\n\ninterface ConnectionsListProfilesProps {\n  listStatus: ListStatus;\n  following: Record<DSNPUserId, boolean>;\n  followers: Record<DSNPUserId, boolean>;\n}\n\nconst ConnectionsListProfiles = ({\n  listStatus,\n  following,\n  followers,\n}: ConnectionsListProfilesProps): JSX.Element => {\n  const userRelationship = (userProfile: Profile) =>\n    following[userProfile.fromId] ? \"Unfollow\" : \"Follow\";\n\n  const profiles: Record<HexString, Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n\n  const profileForId = (userId: DSNPUserId): Profile =>\n    profiles[userId] || {\n      ...createProfile({ name: \"Anonymous\" }),\n      contentHash: \"\",\n      url: \"\",\n      announcementType: AnnouncementType.Profile,\n      fromId: userId,\n      handle: \"unknown\",\n      createdAt: new Date().getTime(),\n    };\n\n  const connectionsList =\n    listStatus === ListStatus.FOLLOWERS\n      ? Object.keys(followers).map(profileForId)\n      : listStatus === ListStatus.FOLLOWING\n      ? Object.keys(following).map(profileForId)\n      : [];\n\n  return (\n    <>\n      {connectionsList.map((userProfile) => (\n        <div\n          className=\"ConnectionsListProfiles__profile\"\n          key={userProfile.fromId}\n        >\n          <UserAvatar\n            icon={profiles[userProfile.fromId]?.icon?.[0]?.href}\n            avatarSize=\"small\"\n            profileAddress={userProfile.fromId}\n          />\n          <div className=\"ConnectionsListProfiles__name\">\n            {userProfile.name || userProfile.fromId || \"Anonymous\"}\n          </div>\n          <Button\n            className=\"ConnectionsListProfiles__button\"\n            name={userRelationship(userProfile)}\n          >\n            {userRelationship(userProfile)}\n            <div\n              className={\n                userRelationship(userProfile) === \"Follow\"\n                  ? \"ConnectionsListProfiles__buttonFollowIcon\"\n                  : \"ConnectionsListProfiles__buttonUnfollowIcon\"\n              }\n            >\n              &#10005;\n            </div>\n          </Button>\n        </div>\n      ))}\n    </>\n  );\n};\nexport default ConnectionsListProfiles;\n","import { Tabs } from \"antd\";\nimport { isInstalled } from \"../services/wallets/metamask/metamask\";\nimport Login from \"./Login\";\nimport * as wallet from \"../services/wallets/wallet\";\nimport React from \"react\";\n\nconst LoginSetupInstructions = (): JSX.Element => {\n  return (\n    <>\n      <div className=\"ProfileBlock__loginHeaderText\"> Login Quick Start</div>\n      <p>\n        To use the Example Client, you must log in with either MetaMask or\n        Torus. Read the guides below to get started!\n      </p>\n      <Tabs defaultActiveKey=\"1\">\n        <Tabs.TabPane tab=\"MetaMask\" key=\"1\">\n          <div className=\"ProfileBlock__loginTitleText\">\n            MetaMask Log In Guide\n          </div>\n          {isInstalled() ? (\n            <>\n              <p>\n                You already have MetaMask installed! Just click the{\" \"}\n                <code>Log In &#8594; MetaMask</code> button.\n              </p>\n              <Login loginWalletOptions={wallet.WalletType.METAMASK} />\n            </>\n          ) : (\n            <>\n              <p>\n                Before we can access the browser we need to install MetaMask to\n                give us a cryptowallet. MetaMask is a browser extension Chrome\n                or Firefox are recommended. Download them from your chosen\n                browsers extension manager. Pin MetaMask to your extension bar.\n              </p>\n              <p>\n                Once{\" \"}\n                <a href=\"https://metamask.io/download.html\" target=\"__blank\">\n                  installed correctly\n                </a>\n                , setup MetaMask by following these steps:\n              </p>\n              <ul>\n                <li>Use an existing account do not create a new one.</li>\n                <li>\n                  For account data use the following seed:{\" \"}\n                  <code>\n                    stove ankle number crucial clay heavy toilet entire bid\n                    betray cluster degree\n                  </code>\n                </li>\n                <li>\n                  Connect to a new Custom RPC.\n                  <ul>\n                    <li>Connect to a new Custom RPC.</li>\n                    <li>\n                      Name: <code>*determined by user</code>\n                    </li>\n                    <li>\n                      New RPC URL: <code>http://localhost:8545</code>\n                    </li>\n                    <li>\n                      ChainID: <code>1337</code>\n                    </li>\n                  </ul>\n                </li>\n                <li>Once setup, select/connect to that Custom RPC.</li>\n              </ul>\n              <Login loginWalletOptions={wallet.WalletType.METAMASK} />\n            </>\n          )}\n        </Tabs.TabPane>\n        <Tabs.TabPane tab=\"Torus\" key=\"2\">\n          <div className=\"ProfileBlock__loginTitleText\">Torus Log In Guide</div>\n          <p>\n            There is no setup required for Torus. Just click the{\" \"}\n            <code>Log In &#8594; Torus</code> button.\n          </p>\n          <Login loginWalletOptions={wallet.WalletType.TORUS} />\n        </Tabs.TabPane>\n      </Tabs>\n    </>\n  );\n};\n\nexport default LoginSetupInstructions;\n","import React, { useState } from \"react\";\nimport { Button } from \"antd\";\nimport ConnectionsListProfiles from \"./ConnectionsListProfiles\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\n\nenum ListStatus {\n  CLOSED,\n  FOLLOWERS,\n  FOLLOWING,\n}\n\nconst ConnectionsList = (): JSX.Element => {\n  const userId: DSNPUserId | undefined = useAppSelector(\n    (state) => state.user.id\n  );\n  const following = useAppSelector(\n    (state) => (userId && state.graphs.following[userId]) || {}\n  );\n  const followers = useAppSelector(\n    (state) => (userId && state.graphs.followers[userId]) || {}\n  );\n\n  const [selectedListTitle, setSelectedListTitle] = useState<ListStatus>(\n    ListStatus.CLOSED\n  );\n\n  const handleClick = (listTitle: ListStatus) => {\n    if (selectedListTitle === listTitle)\n      setSelectedListTitle(ListStatus.CLOSED);\n    else {\n      setSelectedListTitle(listTitle);\n    }\n  };\n\n  const getClassName = (name: ListStatus) => {\n    return selectedListTitle === name\n      ? \"ConnectionsList__button ConnectionsList__button--active\"\n      : \"ConnectionsList__button\";\n  };\n\n  return (\n    <div className=\"ConnectionsList__block\">\n      <div className=\"ConnectionsList__buttonBlock\">\n        <Button\n          className={getClassName(ListStatus.FOLLOWERS)}\n          onClick={() => handleClick(ListStatus.FOLLOWERS)}\n        >\n          <div className=\"ConnectionsList__buttonCount\">\n            {Object.keys(followers).length}\n          </div>\n          Followers\n        </Button>\n\n        {selectedListTitle === ListStatus.CLOSED && (\n          <div className=\"ConnectionsList__buttonSeparator\"> </div>\n        )}\n        <Button\n          className={getClassName(ListStatus.FOLLOWING)}\n          onClick={() => handleClick(ListStatus.FOLLOWING)}\n        >\n          <div className=\"ConnectionsList__buttonCount\">\n            {Object.keys(following).length}\n          </div>\n          Following\n        </Button>\n      </div>\n      <ConnectionsListProfiles\n        listStatus={selectedListTitle}\n        following={following}\n        followers={followers}\n      />\n    </div>\n  );\n};\n\nexport default ConnectionsList;\n","import UserAvatar from \"./UserAvatar\";\nimport { Button } from \"antd\";\nimport ConnectionsList from \"./ConnectionsList\";\nimport React, { useEffect, useState } from \"react\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport * as types from \"../utilities/types\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\nimport { saveProfile } from \"../services/sdk\";\nimport { core } from \"@dsnp/sdk\";\n\nconst Profile = (): JSX.Element => {\n  const userId: DSNPUserId | undefined = useAppSelector(\n    (state) => state.user.id\n  );\n  const profiles: Record<types.HexString, types.Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n\n  const profile: types.Profile | undefined = userId\n    ? profiles[userId]\n    : undefined;\n\n  const handle = profile?.handle;\n  const [newName, setNewName] = useState<string | undefined>();\n  const [newHandle, setNewHandle] = useState<string | undefined>();\n  const [didEditProfile, setDidEditProfile] = useState<boolean>(false);\n\n  const profileName = profile?.name || \"Anonymous\";\n\n  useEffect(() => {\n    if (\n      (newName && newName !== profileName) ||\n      (newHandle && newHandle !== handle)\n    ) {\n      setDidEditProfile(true);\n      return;\n    }\n    setDidEditProfile(false);\n  }, [newName, newHandle, profileName, handle]);\n  const [isEditing, setIsEditing] = useState<boolean>(false);\n\n  const getClassName = (sectionName: string) => {\n    return isEditing\n      ? `ProfileBlock__${sectionName} ProfileBlock__editing`\n      : `ProfileBlock__${sectionName}`;\n  };\n\n  const saveEditProfile = async () => {\n    setIsEditing(!isEditing);\n    if (userId === undefined || newName === undefined) return;\n    const newProfile = core.activityContent.createProfile({\n      name: newName,\n      icon: profile?.icon,\n    });\n    await saveProfile(userId, newProfile);\n  };\n\n  const cancelEditProfile = () => {\n    setIsEditing(!isEditing);\n    setNewName(undefined);\n    setNewHandle(undefined);\n  };\n\n  return (\n    <>\n      <div className=\"ProfileBlock__personalInfoBlock\">\n        <div className=\"ProfileBlock__avatarBlock\">\n          <UserAvatar\n            icon={(profile?.icon || [])[0]?.href}\n            profileAddress={userId}\n            avatarSize=\"large\"\n          />\n          {isEditing ? (\n            <>\n              <Button\n                className=\"ProfileBlock__editButton\"\n                onClick={() => saveEditProfile()}\n                disabled={!didEditProfile}\n              >\n                save\n              </Button>\n              <Button\n                className=\"ProfileBlock__editButton\"\n                onClick={() => cancelEditProfile()}\n              >\n                cancel\n              </Button>\n            </>\n          ) : (\n            <Button\n              className=\"ProfileBlock__editButton\"\n              onClick={() => setIsEditing(!isEditing)}\n            >\n              edit\n            </Button>\n          )}\n        </div>\n        <div className=\"ProfileBlock__personalInfo\">\n          <label className=\"ProfileBlock__personalInfoLabel\">NAME</label>\n          <input\n            className={getClassName(\"name\")}\n            value={newName || newName === \"\" ? newName : profileName}\n            onChange={(e) => setNewName(e.target.value)}\n            disabled={!isEditing}\n          />\n          <label className=\"ProfileBlock__personalInfoLabel\">HANDLE</label>\n          <input\n            className=\"ProfileBlock__handle\"\n            value={newHandle || newHandle === \"\" ? newHandle : handle}\n            onChange={(e) => setNewHandle(e.target.value)}\n            disabled={true}\n          />\n          <label className=\"ProfileBlock__personalInfoLabel\">\n            SOCIAL ADDRESS\n          </label>\n          <input\n            className=\"ProfileBlock__dsnpUserId\"\n            value={userId || \"Anonymous\"}\n            disabled={true}\n          />\n        </div>\n      </div>\n      <ConnectionsList />\n    </>\n  );\n};\n\nexport default Profile;\n","import React from \"react\";\nimport LoginSetupInstructions from \"./LoginSetupInstructions\";\nimport Profile from \"./Profile\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\n\nconst ProfileBlock = (): JSX.Element => {\n  const userId: DSNPUserId | undefined = useAppSelector(\n    (state) => state.user.id\n  );\n  return (\n    <div className=\"ProfileBlock__block\">\n      {userId ? <Profile /> : <LoginSetupInstructions />}\n    </div>\n  );\n};\nexport default ProfileBlock;\n","import React, { useEffect } from \"react\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport \"./App.scss\";\nimport \"antd/dist/antd.less\";\nimport Header from \"./components/Header\";\nimport Feed from \"./components/Feed\";\nimport ProfileBlock from \"./components/ProfileBlock\";\nimport * as wallet from \"./services/wallets/wallet\";\nimport { useAppDispatch, useAppSelector } from \"./redux/hooks\";\nimport { setupProvider, startSubscriptions } from \"./services/sdk\";\n\nconst App = (): JSX.Element => {\n  const dispatch = useAppDispatch();\n\n  const walletType = useAppSelector((state) => state.user.walletType);\n  useEffect(() => {\n    if (!walletType) return;\n    if (walletType === wallet.WalletType.NONE) return;\n    let unsubscribeFunctions: Record<string, any>;\n\n    (async () => {\n      await wallet.wallet(walletType).reload();\n      setupProvider(walletType);\n\n      unsubscribeFunctions = await dispatch(startSubscriptions);\n    })();\n\n    return () => {\n      if (!unsubscribeFunctions) return;\n\n      Object.values(unsubscribeFunctions).forEach((unsubscribe: any) =>\n        unsubscribe()\n      );\n    };\n  });\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Header />\n        <main className=\"App__content\">\n          <Feed />\n          <ProfileBlock />\n        </main>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport userSlice from \"./slices/userSlice\";\nimport profileSlice from \"./slices/profileSlice\";\nimport graphSlice from \"./slices/graphSlice\";\nimport feedSlice from \"./slices/feedSlice\";\n\nconst store = configureStore({\n  reducer: {\n    user: userSlice,\n    profiles: profileSlice,\n    graphs: graphSlice,\n    feed: feedSlice,\n  },\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}