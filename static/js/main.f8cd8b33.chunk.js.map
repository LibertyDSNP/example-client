{"version":3,"sources":["redux/hooks.ts","services/wallets/metamask/ethereum.ts","services/wallets/wallet.ts","services/wallets/metamask/metamask.ts","services/wallets/metamask/index.ts","services/wallets/torus/tweb3.ts","services/wallets/torus/torus.ts","services/wallets/torus/index.ts","redux/slices/graphSlice.ts","services/session.ts","redux/slices/userSlice.ts","services/utilities.ts","utilities/activityContent.ts","services/Storage.ts","utilities/buildBaseUploadHostUrl.ts","services/dsnp.ts","components/LoginButton.tsx","components/UserAvatar.tsx","components/RegistrationModal.tsx","components/Login.tsx","components/Header.tsx","images/Camera.svg","components/NewPostImageUpload.tsx","redux/slices/feedSlice.ts","utilities/sort.ts","redux/slices/profileSlice.ts","components/PostList.tsx","services/content.ts","components/FromTitle.tsx","components/NewPost.tsx","components/PostMedia.tsx","components/RelativeTime.tsx","components/PostHashDropdown.tsx","components/Reply.tsx","components/ReplyInput.tsx","components/BlankReply.tsx","components/ReplyBlock.tsx","components/Post.tsx","components/BlankPost.tsx","components/Feed.tsx","components/ConnectionsListProfiles.tsx","components/LoginSetupInstructions.tsx","components/GraphChangeButton.tsx","components/ConnectionsList.tsx","components/Profile.tsx","components/ProfileBlock.tsx","App.tsx","serviceWorker.ts","redux/store.ts","index.tsx"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","ethereum","window","autoRefreshOnNetworkChange","WalletType","mmweb3","Web3","isInstalled","Boolean","isMetaMask","getWalletAddress","a","request","method","response","Error","result","metamaskWallet","icon","login","metamask","logout","reload","getAddress","getWeb3","torusSettings","popupStyling","theme","isDark","colors","torusBrand1","torusGray2","logoDark","logoLight","web3Torus","web3","torus","initialized","setweb3","provider","web3Inst","this","setProvider","initialize","buildEnv","Torus","init","process","network","host","chainId","Number","networkName","showTorusButton","whiteLabel","verifier","undefined","clearInit","verifiers","enableTorus","isInitialized","getUserInfo","userInfo","getPublicAddress","verifierId","isExtended","typedVerifier","getTypedVerifier","walletAddressHolder","address","untypedVerifier","find","includes","torusWallet","cleanUp","then","sessionStorage","setItem","RelationshipStatus","wallet","walletType","NONE","noWallet","TORUS","METAMASK","saveSession","sessionData","JSON","stringify","loadSession","getItem","parse","e","upsertSessionWalletType","wtype","curSession","id","hasSession","initialState","session","displayId","userSlice","createSlice","name","reducers","userLogin","state","action","payload","userLogout","_state","userUpdateId","userUpdateWalletType","setDisplayId","actions","isFunction","o","isUint8Array","constructor","Uint8Array","createMediaAttachment","item","extension","path","extname","replace","URL","activityContentHashes","createHash","test","link","createVideoLink","createVideoAttachment","createAudioAttachment","createAudioLink","createImageAttachment","createImageLink","noteToActivityContentNote","note","uriList","activityContent","type","mediaType","content","published","Date","toISOString","map","createNote","fromId","activityPubNote","newPostFeedItem","BigInt","Store","targetPath","_content","Promise","resolve","doWriteToStream","ws","ServerWriteStream","chunk","param1","param2","cb","chunks","push","fileLength","reduce","m","s","length","file","ArrayBuffer","bytes","i","offset","set","fetch","encodeURIComponent","mode","body","res","status","statusText","setupProvider","eth","currentProvider","providers","Web3Provider","setConfig","signer","getSigner","store","getSocialIdentities","core","contracts","registry","getRegistrationsByWalletAddress","createNewDSNPRegistration","createRegistration","startSubscriptions","batchHandler","registryHandler","subscription","subscribeToBatchPublications","announcement","fromBlock","unsubscribeToBatchPublications","subscribeToRegistryUpdates","unsubscribeToRegistryUpdate","readBatchFile","batchAnnouncement","rowHandler","batchIndex","batch","openURL","fileUrl","toString","reader","readFile","announcementRow","filename","createFile","batchData","publisher","publish","announcementType","announcements","AnnouncementType","Broadcast","url","fileHash","hash","buildAndSignPostAnnouncement","sign","createBroadcast","identifiers","convertToDSNPUserURI","buildAndSignReplyAnnouncement","inReplyTo","createReply","buildAndSignProfile","createProfile","buildAndSignFollowAnnouncement","followee","createFollowGraphChange","buildAndSignUnfollowAnnouncement","createUnfollowGraphChange","LoginButton","popoverVisible","setPopoverVisible","loginWalletOptions","loading","loginWithWalletType","dispatch","setWalletType","HeaderLoginButton","placement","trigger","visible","onVisibleChange","className","onClick","aria-label","size","QuickStartLoginButton","avatarSizeOptions","Map","UserAvatar","profileAddress","avatarSize","iconURL","blockies","seed","toDataURL","alt","src","get","RegistrationModal","children","registrations","walletAddress","onIdResolved","onCancel","React","useState","hasRegistrations","setHasRegistrations","isCreatingRegistration","setIsCreatingRegistration","registrationError","setRegistrationError","selectedRegistration","setRegistration","profiles","register","formValues","dsnp","handle","userURI","convertToDSNPUserId","console","error","message","iconForRegistration","registration","dsnpUserURI","href","registerNewHandleForm","initialValues","remember","onFinish","Item","rules","required","preventDefault","htmlType","selectHandleContent","key","disabled","Login","isPrimary","startLoading","registrationVisible","setRegistrationVisible","setWalletAddress","setRegistrations","userId","user","currentWalletType","setUserID","fromURI","newId","loginWithWalletAddress","waddr","selectedType","removeItem","handleAccountsChange","waddrs","removeAllListeners","on","count","WalletOutlined","style","color","Header","NewPostImageUpload","onNewPostImageUpload","previewLoading","setPreviewLoading","urlErrorMsg","setUrlErrorMsg","newUri","setNewUri","setUriList","hasValidPostURI","match","image","index","onLoad","CloseCircleTwoTone","toBeDeletedIndex","deletedImageArray","splice","deleteImage","twoToneColor","spinning","cameraIcon","placeholder","value","onChange","target","newUriList","feedItems","isPostLoading","currentUserId","isReplyLoading","parent","newPostLoadingState","newReplyLoadingState","feedSlice","addFeedItem","newFeedItem","clearFeedItems","postLoading","isLoading","replyLoading","latestBatchedMessage","b","blockNumber","blockIndex","profileSlice","upsertProfile","oldProfile","newProfile","removeProfile","FeedTypes","graphSlice","following","followers","upsertGraph","follower","unfollow","follows","nextState","UNFOLLOWING","FOLLOWING","updateRelationshipStatus","oldState","UPDATING","batchNumber","newState","handleBatchAnnouncement","handleRegistryUpdate","sendPost","post","storeActivityContent","sendReply","reply","saveProfile","profile","followUser","serialize","unfollowUser","dispatchActivityContent","isActivityContentNoteType","dispatchFeedItem","isActivityContentProfileType","dispatchProfile","contentHash","uri","Reply","update","transactionIndex","fetchAndDispatchContent","json","log","GraphChange","graphChange","objectId","changeType","DSNPGraphChangeType","Unfollow","dispatchGraphChange","obj","Profile","err","keccak256","FromTitle","isHoveringProfile","atHandle","primary","secondary","NewPost","onSuccess","saving","setSaving","postMessage","setPostMessage","isValidPost","setIsValidPost","createPost","width","centered","title","footer","TextArea","handleMessageInputChange","rows","PostMedia","attachment","nextArrow","RightOutlined","prevArrow","LeftOutlined","dots","toLowerCase","rel","controls","playsinline","height","muted","RelativeTime","postStyle","postTime","monthNum","timeOfPost","secondsPast","getTime","Math","floor","getMonth","getDate","getFullYear","getRelativeTime","PostHashDropdown","isReply","isCopied","setIsCopied","isVisible","setIsVisible","announcementURI","buildDSNPAnnouncementURI","menu","setTimeout","CheckCircleOutlined","navigator","clipboard","writeText","overlay","EllipsisOutlined","cachedProfiles","fromProfile","setFromProfile","useEffect","ReplyInput","replyValue","setReplyValue","event","newReplyFeedItem","autoSize","onPressEnter","BlankReply","ReplyBlock","replyFeed","feed","filter","Post","feedItem","noteContent","attachments","setIsHoveringProfile","bordered","onMouseEnter","onMouseLeave","Meta","avatar","description","BlankPost","PostList","feedType","myGraph","graphs","initialFeed","sort","firstFeedItem","secondFeedItem","sortFeed","currentFeed","MY_FEED","MY_POSTS","DISPLAY_ID_POSTS","ListStatus","Feed","isModalOpen","setIsModalOpen","DISCOVER","setFeedType","showDisplayIdNav","setShowDisplayIdNav","feedNavClassName","navItemType","ArrowLeftOutlined","LoginSetupInstructions","defaultActiveKey","TabPane","tab","GraphChangeButton","isFollowing","isFollowingUpdating","buttonText","changeGraphState","ConnectionsListProfiles","listStatus","followedByDisplayUser","followingDisplayUser","followedByCurrentUser","relations","FOLLOWERS","connectionsList","Object","keys","createdAt","ConnectionsList","CLOSED","selectedListTitle","setSelectedListTitle","handleClick","listTitle","getClassName","followedByCurrentuser","newName","setNewName","newHandle","setNewHandle","didEditProfile","setDidEditProfile","profileName","sectionName","isEditing","setIsEditing","saveEditProfile","ProfileBlock","App","unsubscribeFunctions","values","forEach","unsubscribe","location","hostname","configureStore","reducer","ReactDOM","render","document","getElementById","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.f8cd8b33.chunk.js","sourcesContent":["import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport type { RootState, AppDispatch } from \"./store\";\n\n// Typed hooks to use instead of useDispatch and useSelector\n\n// Disable explicit module boundaries so that the dispatch types can all be correctly inferred.\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { JsonRpcPayload, JsonRpcResponse } from \"web3-core-helpers\";\n\ninterface ConnectInfo {\n  chainId: string;\n}\n\ninterface ProviderRpcError extends Error {\n  message: string;\n  code: number;\n  data?: unknown;\n}\n\ninterface ProviderMessage {\n  type: string;\n  data: unknown;\n}\n\ninterface RequestArguments {\n  method: string;\n  params?: unknown[] | Record<string, unknown>;\n  from?: string;\n}\n\ninterface Callback<ResultType> {\n  (error: Error): void;\n  (error: null, val: ResultType): void;\n}\n\nexport interface EthereumProvider {\n  isMetaMask?: boolean;\n  autoRefreshOnNetworkChange: boolean;\n  chainId: number;\n\n  isConnected(): boolean;\n\n  on(event: \"accountsChanged\", handler: (addresses: string[]) => void): void;\n  on(event: \"chainChanged\", handler: (chainId: string) => void): void;\n  on(event: \"connect\", handler: (connectInfo: ConnectInfo) => void): void;\n  on(event: \"disconnect\", handler: (error: ProviderRpcError) => void): void;\n  on(event: \"message\", handler: (message: ProviderMessage) => void): void;\n\n  removeAllListeners(event: string): EthereumProvider;\n\n  request(request: RequestArguments): Promise<any>;\n\n  sendAsync(\n    payload: JsonRpcPayload,\n    callback: (error: Error | null, result?: JsonRpcResponse) => void\n  ): void;\n  send(payload: JsonRpcPayload, callback: Callback<JsonRpcResponse>): any;\n}\n// eip-1193\nconst ethereum = (window as any).ethereum as\n  | EthereumProvider\n  | null\n  | undefined;\n\nif (ethereum) (ethereum as EthereumProvider).autoRefreshOnNetworkChange = false;\n\nexport default ethereum;\n","import { HexString } from \"../../utilities/types\";\nimport metamaskWallet from \"./metamask\";\nimport torusWallet from \"./torus\";\nimport Web3 from \"web3\";\n\n// HOW TO ADD A WALLET\n// Add the new wallet to the enum and switch/case\n// Both places are marked with a comment\n// Then, create a Folder for the new wallet with it's implementation\n// code. create an index.ts file in the folder that implements\n// the Wallet interface below. Look at torus or metamask for\n// an example.\n\nexport enum WalletType {\n  NONE = \"NONE\",\n  TORUS = \"TORUS\",\n  METAMASK = \"METAMASK\",\n  // Add new WalletTypes Here\n}\n\nexport const wallet = (walletType: WalletType): Wallet => {\n  switch (walletType) {\n    case WalletType.NONE:\n      return noWallet;\n    case WalletType.TORUS:\n      return torusWallet;\n    case WalletType.METAMASK:\n      return metamaskWallet;\n    // Add new WalletTypes Here\n  }\n};\n\nexport interface Wallet {\n  icon: string;\n  login: () => Promise<HexString>;\n  logout: () => void;\n  reload: () => void;\n  getAddress: () => Promise<HexString>;\n  getWeb3: () => Web3;\n}\n\nconst noWallet: Wallet = {\n  icon:\n    \"https://icons.veryicon.com/png/o/business/business-style-icon/wallet-62.png\",\n  login: async () => await \"\",\n  logout: () => {\n    return;\n  },\n  reload: () => {\n    return;\n  },\n  getAddress: async () => await \"\",\n  getWeb3: () => new Web3(),\n};\n","import Web3 from \"web3\";\nimport { HexString } from \"../../../utilities/types\";\nimport ethereum, { EthereumProvider } from \"./ethereum\";\n\nconst mmweb3 = new Web3(ethereum as EthereumProvider);\n\nexport const getWeb3 = (): Web3 => {\n  if (!isInstalled()) throw new Error(\"Metamask not installed\");\n  return mmweb3;\n};\n\nexport const isInstalled = (): boolean => {\n  return Boolean(ethereum?.isMetaMask);\n};\n\nexport const getWalletAddress = async (): Promise<HexString> => {\n  const response = await ethereum?.request({ method: \"eth_requestAccounts\" });\n  if (!response) throw new Error(\"Metamask not installed\");\n  return response.result ? response.result[0] : response[0];\n};\n","import * as metamask from \"./metamask\";\nimport { Wallet } from \"../wallet\";\n\nconst metamaskWallet: Wallet = {\n  icon:\n    \"https://cdn.iconscout.com/icon/free/png-512/metamask-2728406-2261817.png\",\n  login: async () => {\n    if (!metamask.isInstalled()) throw new Error(\"Metamask not installed\");\n    return metamask.getWalletAddress();\n  },\n  logout: () => {\n    return;\n  },\n  reload: () => {\n    return;\n  },\n  getAddress: async () => {\n    return metamask.getWalletAddress();\n  },\n  getWeb3: () => {\n    return metamask.getWeb3();\n  },\n};\n\nexport default metamaskWallet;\n","import Web3 from \"web3\";\nimport Torus from \"@toruslabs/torus-embed\";\nimport { provider } from \"web3-core\";\n\nexport type BuildEnvironment =\n  | \"production\"\n  | \"development\"\n  | \"binance\"\n  | \"testing\"\n  | \"lrc\"\n  | \"beta\"\n  | undefined;\n\n// interface TorusCtorArgs in torus-embeded types\nconst torusSettings = {\n  //buttonPosition?: 'top-left' | 'top-right' | 'bottom-right' | 'bottom-left'\n  //modalZIndex?: number\n  //apiKey?: string\n};\n\n// interface WhiteLabelParams in torus-embeded types\n// example data structure here: https://github.com/torusresearch/torus-embed/blob/master/examples/vue-app/src/data.js\nconst popupStyling = {\n  theme: {\n    isDark: false,\n    colors: {\n      torusBrand1: \"#000000\",\n      torusGray2: \"#FBF7F3\",\n    },\n  },\n  logoDark: \"https://avatars.githubusercontent.com/u/78103996?s=200&v=4\",\n  logoLight: \"https://avatars.githubusercontent.com/u/78103996?s=200&v=4\",\n  //topupHide?: boolean\n  //featuredBillboardHide?: boolean\n  //disclaimerHide?: boolean\n  //tncLink?: LocaleLinks<string>\n  //privacyPolicy?: LocaleLinks<string>\n  //contactLink?: LocaleLinks<string>\n  //customTranslations?: LocaleLinks<any>\n};\n\n// interface TorusParams in trous-embeded types\nconst initSettings = (buildEnv: BuildEnvironment) => {\n  return {\n    buildEnv:\n      (process.env.REACT_APP_TORUS_BUILD_ENV as BuildEnvironment) ||\n      buildEnv ||\n      \"production\",\n    network: {\n      host: process.env.REACT_APP_CHAIN_HOST || \"http://localhost:8545\",\n      chainId: Number(process.env.REACT_APP_CHAIN_ID) || 1337,\n      networkName: process.env.REACT_APP_CHAIN_NAME || \"Localchain\",\n    },\n    showTorusButton: true,\n    whiteLabel: popupStyling,\n  };\n};\n\nconst web3Torus = {\n  web3: new Web3(),\n  torus: null as Torus | null,\n  initialized: false,\n  setweb3: function (provider: provider): void {\n    const web3Inst = new Web3(provider);\n    web3Torus.web3 = web3Inst;\n    this.web3.setProvider(provider);\n  },\n  initialize: async function (buildEnv: BuildEnvironment): Promise<void> {\n    const torus = new Torus(torusSettings);\n    await torus.init(initSettings(buildEnv));\n    this.initialized = true;\n    try {\n      await torus.login({ verifier: undefined });\n      web3Torus.setweb3(torus.provider);\n      web3Torus.torus = torus;\n    } catch (error) {\n      torus.clearInit();\n      this.initialized = false;\n      throw new Error(\"Login Cancelled\");\n    }\n  },\n};\n\nexport default web3Torus;\n","import Web3 from \"web3\";\nimport { HexString } from \"../../../utilities/types\";\nimport web3Torus, { BuildEnvironment } from \"./tweb3\";\n\n// Torus doesn't give us access to their internal verifier types\n// They also don't enforce their own verifier system consistently\n// This means we need to create our own and update it.\n// This verifiers array is our list of approved verifiers based\n// off their internal list. That list can be found here:\n// https://github.com/torusresearch/torus-embed/blob/master/types/embed.d.ts\nconst verifiers = [\"google\", \"reddit\", \"discord\"] as const;\ntype VerifierTypes = typeof verifiers[number];\ntype AddressType = undefined | string | { address: string };\n\ninterface UserInfo {\n  email: string;\n  name: string;\n  profileImage: string;\n  verifier: string;\n  verifierId: string;\n}\n\nexport const enableTorus = async (\n  buildEnv?: BuildEnvironment\n): Promise<void> => {\n  await web3Torus.initialize(buildEnv || \"production\");\n};\n\nexport const isInitialized = (): boolean => {\n  return web3Torus.initialized;\n};\n\nexport const getUserInfo = async (): Promise<UserInfo> => {\n  const userInfo = await web3Torus.torus?.getUserInfo(\n    \"This site is requesting your information\"\n  );\n  if (!userInfo) throw new Error(\"Unable to find user's info\");\n  return userInfo;\n};\n\nexport const logout = (): void => {\n  web3Torus.torus?.cleanUp().then(() => {\n    sessionStorage.setItem(\"pageUsingTorus\", \"false\");\n  });\n};\n\nexport const getPublicAddress = async (\n  verifier: VerifierTypes,\n  verifierId: string\n): Promise<AddressType> => {\n  return await web3Torus.torus?.getPublicAddress({\n    verifier,\n    verifierId,\n    isExtended: true,\n  });\n};\n\nexport const getWalletAddress = async (): Promise<HexString> => {\n  const { verifier, verifierId } = await getUserInfo();\n  const typedVerifier: VerifierTypes = getTypedVerifier(verifier);\n  const walletAddressHolder = await getPublicAddress(typedVerifier, verifierId);\n  if (!walletAddressHolder) throw new Error(\"No Wallet Address found for User\");\n  if (typeof walletAddressHolder === \"string\") return walletAddressHolder;\n  return walletAddressHolder.address;\n};\n\nconst getTypedVerifier = (untypedVerifier: string): VerifierTypes => {\n  const typedVerifier = verifiers.find((verifier) => {\n    return untypedVerifier.includes(verifier);\n  });\n\n  if (!typedVerifier) throw new Error(\"Unknown Verifier\");\n  return typedVerifier as VerifierTypes;\n};\n\nexport const getWeb3 = (): Web3 => {\n  return web3Torus.web3;\n};\n","import * as torus from \"./torus\";\nimport { Wallet } from \"../wallet\";\n\nconst torusWallet: Wallet = {\n  icon:\n    \"data:image/jpeg;base64,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\",\n  login: async () => {\n    await torus.enableTorus();\n    return await torus.getWalletAddress();\n  },\n  logout: () => {\n    if (torus.isInitialized()) {\n      torus.logout();\n    }\n  },\n  reload: async () => {\n    if (torus.isInitialized()) return;\n    await torus.enableTorus();\n  },\n  getAddress: async () => {\n    return await torus.getWalletAddress();\n  },\n  getWeb3: () => {\n    return torus.getWeb3();\n  },\n};\n\nexport default torusWallet;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { latestBatchedMessage } from \"../../utilities/sort\";\nimport { GraphChange } from \"../../utilities/types\";\n\nexport enum RelationshipStatus {\n  FOLLOWING,\n  UNFOLLOWING,\n  UPDATING,\n}\n\nexport interface RelationshipState {\n  status: RelationshipStatus;\n  blockNumber: number;\n  blockIndex: number;\n  batchIndex: number;\n}\n\nexport interface graphState {\n  following: Record<string, Record<string, RelationshipState>>;\n  followers: Record<string, Record<string, RelationshipState>>;\n}\n\nexport interface RelationshipStatusUpdate {\n  follower: string;\n  followee: string;\n  status: RelationshipStatus;\n}\n\nconst initialState: graphState = {\n  following: {},\n  followers: {},\n};\n\nexport const graphSlice = createSlice({\n  name: \"graphs\",\n  initialState,\n  reducers: {\n    upsertGraph: (state, action: PayloadAction<GraphChange>) => {\n      const { follower, followee, unfollow } = action.payload;\n\n      const follows = state.following[follower] || {};\n      const followers = state.followers[followee] || {};\n\n      // new state is latest of new and existing changes\n      const nextState = latestBatchedMessage(\n        {\n          status: unfollow\n            ? RelationshipStatus.UNFOLLOWING\n            : RelationshipStatus.FOLLOWING,\n          blockNumber: action.payload.blockNumber,\n          blockIndex: action.payload.blockIndex,\n          batchIndex: action.payload.batchIndex,\n        },\n        follows[followee]\n      );\n\n      // short circuit if message is stale\n      if (nextState === follows[followee]) return state;\n\n      return {\n        following: {\n          ...state.following,\n          [follower]: { ...follows, [followee]: nextState },\n        },\n        followers: {\n          ...state.followers,\n          [followee]: { ...followers, [follower]: nextState },\n        },\n      };\n    },\n    updateRelationshipStatus: (\n      state,\n      action: PayloadAction<RelationshipStatusUpdate>\n    ) => {\n      const { follower, followee, status } = action.payload;\n\n      const follows = state.following[follower] || {};\n\n      const oldState: RelationshipState = follows[follower] || {\n        status: RelationshipStatus.UPDATING,\n        blockNumber: -1,\n        blockIndex: -1,\n        batchNumber: -1,\n      };\n      const newState = { ...oldState, status };\n\n      return {\n        following: {\n          ...state.following,\n          [follower]: {\n            ...(state.following[follower] || {}),\n            [followee]: newState,\n          },\n        },\n        followers: {\n          ...state.followers,\n          [followee]: {\n            ...(state.followers[followee] || {}),\n            [follower]: newState,\n          },\n        },\n      };\n    },\n  },\n});\nexport const { upsertGraph, updateRelationshipStatus } = graphSlice.actions;\nexport default graphSlice.reducer;\n","import { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\nimport { WalletType } from \"./wallets/wallet\";\n\ninterface SessionData {\n  id: string | undefined;\n  walletType: WalletType;\n}\n\nconst saveSession = (sessionData: SessionData): SessionData => {\n  sessionStorage.setItem(\"session\", JSON.stringify(sessionData));\n  return sessionData;\n};\n\nexport const clearSession = (): void => {\n  sessionStorage.removeItem(\"session\");\n};\n\nexport const loadSession = (): SessionData | null => {\n  try {\n    const sessionData = sessionStorage.getItem(\"session\");\n    return sessionData ? JSON.parse(sessionData) : null;\n  } catch (e) {\n    return null;\n  }\n};\n\nexport const upsertSessionWalletType = (wtype: WalletType): void => {\n  const curSession = loadSession() || {\n    id: undefined,\n    walletType: WalletType.NONE,\n  };\n\n  saveSession({ ...curSession, walletType: wtype });\n};\n\nexport const upsertSessionUserId = (newId: DSNPUserId): void => {\n  const curSession = loadSession() || {\n    id: undefined,\n    walletType: WalletType.NONE,\n  };\n  saveSession({ ...curSession, id: newId.toString() });\n};\n\nexport const hasSession = (): boolean => !!sessionStorage.getItem(\"session\");\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport * as wallet from \"../../services/wallets/wallet\";\nimport * as session from \"../../services/session\";\n\ninterface UserState {\n  id?: string;\n  walletType: wallet.WalletType;\n  displayId?: string;\n}\n\nconst initialState: UserState = {\n  id: session.hasSession() ? session.loadSession()?.id : undefined,\n  displayId: session.hasSession() ? session.loadSession()?.id : undefined,\n  walletType: session.loadSession()?.walletType ?? wallet.WalletType.NONE,\n};\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    userLogin: (state, action: PayloadAction<UserState>) => ({\n      ...state,\n      ...action.payload,\n    }),\n    userLogout: (_state) => ({\n      walletType: wallet.WalletType.NONE,\n    }),\n    userUpdateId: (state, action: PayloadAction<string>) => ({\n      ...state,\n      id: action.payload,\n      displayId: action.payload,\n    }),\n    userUpdateWalletType: (\n      state,\n      action: PayloadAction<wallet.WalletType>\n    ) => ({\n      ...state,\n      walletType: action.payload,\n    }),\n    setDisplayId: (state, action: PayloadAction<string>) => ({\n      ...state,\n      displayId: action.payload,\n    }),\n  },\n});\nexport const {\n  userLogin,\n  userLogout,\n  userUpdateId,\n  userUpdateWalletType,\n  setDisplayId,\n} = userSlice.actions;\nexport default userSlice.reducer;\n","export const isFunction = (o: unknown): boolean => typeof o == \"function\";\nexport const isUint8Array = (o: unknown): boolean =>\n  typeof o == \"object\" && (o as any).constructor === Uint8Array;\n","import path from \"path\";\nimport {\n  ActivityContentNote,\n  ActivityContentAttachment,\n  createVideoLink,\n  createVideoAttachment,\n  ActivityContentHash,\n  createImageAttachment,\n  createImageLink,\n  createHash,\n  createAudioLink,\n  createAudioAttachment,\n} from \"@dsnp/sdk/core/activityContent\";\n\nconst createMediaAttachment = (item: string): ActivityContentAttachment => {\n  const extension = path.extname(item).replace(\".\", \"\");\n\n  const host = new URL(item).host;\n\n  const supportedVideoDomains = /(youtu\\.be|youtube\\.com|vimeo\\.com|soundcloud.com)$/;\n\n  const contentHash = createHash(item);\n  const activityContentHashes: Array<ActivityContentHash> = [contentHash];\n\n  if (supportedVideoDomains.test(host)) {\n    const link = createVideoLink(item, \"text/html\", activityContentHashes);\n    return createVideoAttachment([link]);\n  } else {\n    switch (extension) {\n      case \"mp4\":\n        return createVideoAttachment([\n          createVideoLink(item, \"video/mp4\", activityContentHashes),\n        ]);\n      case \"wmv\":\n        return createVideoAttachment([\n          createVideoLink(item, \"video/x-ms-wmv\", activityContentHashes),\n        ]);\n      case \"mov\":\n        return createVideoAttachment([\n          createVideoLink(item, \"video/quicktime\", activityContentHashes),\n        ]);\n      case \"webm\":\n        return createVideoAttachment([\n          createVideoLink(item, \"video/webm\", activityContentHashes),\n        ]);\n      case \"mp3\":\n        return createAudioAttachment([\n          createAudioLink(item, \"audio/mpeg\", activityContentHashes),\n        ]);\n      case \"ogg\":\n        return createAudioAttachment([\n          createAudioLink(item, \"audio/ogg\", activityContentHashes),\n        ]);\n      default:\n        return createImageAttachment([\n          createImageLink(item, `image/${extension}`, activityContentHashes),\n        ]);\n    }\n  }\n};\n\nexport const noteToActivityContentNote = (\n  note: string,\n  uriList: string[]\n): ActivityContentNote => {\n  const activityContent: ActivityContentNote = {\n    \"@context\": \"https://www.w3.org/ns/activitystreams\",\n    type: \"Note\",\n    mediaType: \"text/plain\",\n    content: note,\n    published: new Date().toISOString(),\n  };\n  if (uriList) {\n    activityContent[\"attachment\"] = uriList.map(createMediaAttachment);\n  }\n  return activityContent;\n};\n","import { FeedItem } from \"../utilities/types\";\nimport {\n  Content,\n  WriteStreamCallback,\n  WriteStream,\n  StoreInterface,\n} from \"@dsnp/sdk/core/store\";\nimport { isFunction, isUint8Array } from \"./utilities\";\nimport { ActivityContentNote } from \"@dsnp/sdk/core/activityContent\";\nimport { noteToActivityContentNote } from \"../utilities/activityContent\";\nimport { buildBaseUploadHostUrl } from \"../utilities/buildBaseUploadHostUrl\";\n\nexport const createNote = async (\n  note: string,\n  uriList: string[],\n  fromId: string\n): Promise<FeedItem> => {\n  // send content to api\n  const activityPubNote: ActivityContentNote = noteToActivityContentNote(\n    note,\n    uriList\n  );\n  const newPostFeedItem: Partial<FeedItem> = {\n    fromId: BigInt(fromId),\n    content: activityPubNote,\n  };\n  return newPostFeedItem;\n};\n\nexport class Store implements StoreInterface {\n  put(targetPath: string, _content: Content): Promise<URL> {\n    return Promise.resolve(\n      new URL(`${buildBaseUploadHostUrl()}/${targetPath}`)\n    );\n  }\n\n  async putStream(\n    targetPath: string,\n    doWriteToStream: WriteStreamCallback\n  ): Promise<URL> {\n    const ws = new ServerWriteStream(targetPath);\n    await doWriteToStream(ws);\n    return new URL(`${buildBaseUploadHostUrl()}/${targetPath}`);\n  }\n}\n\ntype WriteCallback = (error: Error | null | undefined) => void;\ntype EndCallback = () => void;\n\n/* eslint-disable no-dupe-class-members */\nclass ServerWriteStream implements WriteStream {\n  chunks: Uint8Array[] = [];\n  targetPath: string;\n\n  constructor(path: string) {\n    this.targetPath = path;\n  }\n\n  write(chunk: unknown, encoding?: string, callback?: WriteCallback): boolean;\n  write(chunk: unknown, cb?: WriteCallback): boolean;\n\n  write(\n    chunk: unknown,\n    param1?: string | WriteCallback,\n    param2?: WriteCallback\n  ): boolean {\n    const cb = typeof param1 == \"string\" ? param2 : param1;\n\n    this.chunks.push(chunk as Uint8Array);\n\n    if (cb) cb(null);\n    return true;\n  }\n\n  end(cb?: EndCallback): void;\n  end(chunk: unknown, cb?: EndCallback): void;\n  end(chunk: unknown, encoding?: string, cb?: EndCallback): void;\n\n  end(...args: any): void {\n    if (isUint8Array(args[0])) {\n      this.chunks.push(args[0] as Uint8Array);\n    }\n\n    let cb: () => void;\n    if (isFunction(args[0])) {\n      cb = args[0] as EndCallback;\n    } else if (isFunction(args[1])) {\n      cb = args[1] as EndCallback;\n    } else {\n      cb = args[2] as EndCallback;\n    }\n\n    const fileLength = this.chunks.reduce((m, s) => m + s.length, 0);\n    const file = new ArrayBuffer(fileLength);\n    const bytes = new Uint8Array(file);\n    for (let i = 0, offset = 0; i < this.chunks.length; i++) {\n      bytes.set(this.chunks[i], offset);\n      offset += this.chunks[i].length;\n    }\n\n    fetch(\n      `${buildBaseUploadHostUrl()}/upload?filename=${encodeURIComponent(\n        this.targetPath\n      )}`,\n      {\n        method: \"POST\",\n        mode: \"cors\",\n        body: file,\n      }\n    ).then((res: Response) => {\n      if (res.status !== 201) {\n        throw Error(`failed to post stream: ${res.status} ${res.statusText}`);\n      }\n      if (cb) cb();\n    });\n  }\n}\n","export const buildBaseUploadHostUrl = (): string => {\n  return (\n    process.env.REACT_APP_UPLOAD_HOST ||\n    `${window.location.protocol}//${window.location.host}`\n  );\n};\n","import { HexString } from \"../utilities/types\";\nimport { setConfig, createRegistration, core } from \"@dsnp/sdk\";\nimport { RegistryUpdateLogData } from \"@dsnp/sdk/core/contracts/registry\";\nimport { providers } from \"ethers\";\nimport { Store } from \"./Storage\";\nimport {\n  BroadcastAnnouncement,\n  AnnouncementType,\n  SignedBroadcastAnnouncement,\n  SignedReplyAnnouncement,\n  GraphChangeAnnouncement,\n  SignedProfileAnnouncement,\n  SignedAnnouncement,\n  SignedGraphChangeAnnouncement,\n} from \"@dsnp/sdk/core/announcements\";\nimport { BatchPublicationLogData } from \"@dsnp/sdk/core/contracts/subscription\";\nimport { WalletType } from \"./wallets/wallet\";\nimport torusWallet from \"./wallets/torus\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\n\n//\n// DSNP Package\n// This package is a wrapper around the DSNP SDK that provides example-client specific functionality.\n//\n\n//\n// Parameter types\n//\n\ntype RegistryUpdateHandler = (update: RegistryUpdateLogData) => void;\n\ntype BatchAnnouncementHandler = (announcment: BatchPublicationLogData) => void;\n\ntype AnnouncementRowHandler = (\n  announcementRow: SignedAnnouncement,\n  batchIndex: number\n) => void;\n\nexport type UnsubscribeFunction = () => void;\n\n//\n// Exported Functions\n//\n\n/**\n * setupProvider initializes the DSNP sdk with an ethereum provider.\n * This function must be called with a Metamask or Torus WalletType before\n * any other DSNP functionality is used (including subscriptions).\n * @param walletType which wallet plugin we should use to retrieve the chain provider.\n * @throws if walletType is unrecognized or wallet plugin cannot supply a provider.\n */\nexport const setupProvider = (walletType: WalletType): void => {\n  let eth;\n\n  if (walletType === WalletType.TORUS) {\n    eth = torusWallet.getWeb3().currentProvider;\n  } else if (walletType === WalletType.METAMASK) {\n    const global: any = window;\n    eth = global.ethereum;\n\n    if (!eth) {\n      throw new Error(\n        \"Could not create provider, because ethereum has not been set\"\n      );\n    }\n  } else {\n    throw new Error(\n      `Unknown walletType attempting to setup provider: ${walletType}`\n    );\n  }\n\n  const provider = new providers.Web3Provider(eth);\n  setConfig({\n    provider: provider,\n    signer: provider.getSigner(),\n    store: new Store(),\n  });\n};\n\n/**\n * getSocialIdentities looks up all DSNP registrations for a given wallet address.\n * @param walletAddress address of an on-chain account.\n * @return all DSNP registration (DSNP id and handle) for which the given address is authorized to sign.\n */\nexport const getSocialIdentities =\n  core.contracts.registry.getRegistrationsByWalletAddress;\n\n/**\n * createNewDSNPRegistration creates a new DSNP identity for a given wallet address.\n * This function will register a new DSNP Id with the provided handle and then delegate authority\n * to managed the Id to the owner of the provided wallet address.\n * @param addr address of an on-chain account\n * @param handle handle to be registered with the new Id.\n * @returns the DSNPUserURI for the new account.\n * @throws if registration fails for any reason, or the handle is already registered.\n */\nexport const createNewDSNPRegistration = createRegistration;\n\n/**\n * startSubscriptions starts listenting for DNSP publication events and DSNP registration change\n * events. The subscriptions start with all previous events which will be immediately emitted to\n * the handlers, and then will continue listening for new events until the returned unsubscribe\n * function is called.\n * @param batchHandler a function called when a batch announcement is made on chain.\n * @param registryHandler a function called when a DSNP registration is made or changed.\n * @returns an unsubscribe function that will stop the subscriptions when called.\n */\nexport const startSubscriptions = async (\n  batchHandler: BatchAnnouncementHandler,\n  registryHandler: RegistryUpdateHandler\n): Promise<UnsubscribeFunction> => {\n  // subscribe to all announcements\n  const unsubscribeToBatchPublications = await core.contracts.subscription.subscribeToBatchPublications(\n    (announcement: BatchPublicationLogData) => {\n      batchHandler(announcement);\n    },\n    { fromBlock: 1 }\n  );\n\n  // subscribe to registry events\n  const unsubscribeToRegistryUpdate = await core.contracts.subscription.subscribeToRegistryUpdates(\n    (announcement: RegistryUpdateLogData) => {\n      registryHandler(announcement);\n    },\n    { fromBlock: 1 }\n  );\n\n  return () => {\n    unsubscribeToRegistryUpdate();\n    unsubscribeToBatchPublications();\n  };\n};\n\n/**\n * Load a DSNP batch file from a url in a batch announcment, parse it, and emit all rows in the batch\n * to the given handler.\n * @param batchAnnouncement batch announcment that specifies where to retrieve the batch file.\n * @param rowHandler handler function that receives all rows from the batch.\n * @throwss if batch cannot be read.\n */\nexport const readBatchFile = async (\n  batchAnnouncement: BatchPublicationLogData,\n  rowHandler: AnnouncementRowHandler\n): Promise<void> => {\n  let batchIndex = 0;\n  const reader = await core.batch.openURL(\n    (batchAnnouncement.fileUrl.toString() as any) as URL\n  );\n  await core.batch.readFile(reader, (announcementRow: SignedAnnouncement) =>\n    rowHandler(announcementRow, batchIndex++)\n  );\n};\n\n/**\n * isGraphChangeAnnouncment returns whether the provided object is likely a GraphChangeAnnouncment\n * @param obj any object\n * @returns true if object appears to be a graph change announcment\n */\nexport const isGraphChangeAnnouncement = (\n  obj: unknown\n): obj is GraphChangeAnnouncement => {\n  return (\n    (obj as Record<string, unknown>)[\"announcementType\"] ===\n    AnnouncementType.GraphChange\n  );\n};\n\n/**\n * isBroadcastAnnouncment returns whether the provided object is likely a BroadcastAnnouncment\n * @param obj any object\n * @returns true if object appears to be a broadcast announcment\n */\nexport const isBroadcastAnnouncement = (\n  obj: unknown\n): obj is BroadcastAnnouncement => {\n  const type = (obj as Record<string, unknown>)[\"announcementType\"];\n  return (\n    type === AnnouncementType.Profile ||\n    type === AnnouncementType.Broadcast ||\n    type === AnnouncementType.Reply\n  );\n};\n\n/**\n * batchAnnouncment takes a single announcement, creates a batch file\n * containing it in the store, and then publishes the batch on chain.\n * @param filename name used to store the parquet file in the store\n * @param announcement annoucement to batch and publish\n */\nexport const batchAnnouncement = async (\n  filename: string,\n  announcement: SignedAnnouncement\n): Promise<void> => {\n  const batchData = await core.batch.createFile(filename, [announcement]);\n\n  await core.contracts.publisher.publish([\n    {\n      announcementType: core.announcements.AnnouncementType.Broadcast,\n      fileUrl: batchData.url.toString(),\n      fileHash: batchData.hash,\n    },\n  ]);\n};\n\n/**\n * Creates a signed post announcement.\n * Note that the provider's active signing address must be an authorized\n * delegate for the DSNP account specified by from id for this to be valid.\n * @param fromId DSNP id of the user sending the post\n * @param url location of the post's activity content\n * @param hash has of the post's activity content\n * @returns a signed announcement ready for inclusion in a batch\n */\nexport const buildAndSignPostAnnouncement = async (\n  fromId: DSNPUserId,\n  url: string,\n  hash: string\n): Promise<SignedBroadcastAnnouncement> =>\n  core.announcements.sign(\n    core.announcements.createBroadcast(\n      core.identifiers.convertToDSNPUserURI(fromId),\n      url,\n      hash\n    )\n  );\n\n/**\n * Creates a signed reply announcement.\n * Note that the provider's active signing address must be an authorized\n * delegate for the DSNP account specified by from id for this to be valid.\n * @param fromId DSNP id of the user sending the reply\n * @param inReplyTo signature of the post to which this post is a response\n * @param url location of the reply's activity content\n * @param hash has of the reply's activity content\n * @returns a signed announcement ready for inclusion in a batch\n */\nexport const buildAndSignReplyAnnouncement = async (\n  fromId: HexString,\n  inReplyTo: HexString,\n  url: string,\n  hash: string\n): Promise<SignedReplyAnnouncement> =>\n  core.announcements.sign(\n    core.announcements.createReply(fromId, url, hash, inReplyTo)\n  );\n\n/**\n * Creates a signed profile announcement.\n * Note that the provider's active signing address must be an authorized\n * delegate for the DSNP account specified by from id for this to be valid.\n * @param fromId DSNP id of the profiled user\n * @param url location of the profile's activity content\n * @param hash has of the profile's activity content\n * @returns a signed announcement ready for inclusion in a batch\n */\nexport const buildAndSignProfile = async (\n  fromId: DSNPUserId,\n  url: string,\n  hash: string\n): Promise<SignedProfileAnnouncement> =>\n  core.announcements.sign(\n    core.announcements.createProfile(\n      core.identifiers.convertToDSNPUserURI(fromId),\n      url,\n      hash\n    )\n  );\n\n/**\n * Creates a signed follow announcement.\n * Note that the provider's active signing address must be an authorized\n * delegate for the DSNP account specified by from id for this to be valid.\n * @param fromId DSNP Id of user doing the following\n * @param followee DSNP Id of user being followed\n * @returns a signed announcement ready for inclusion in a batch\n */\nexport const buildAndSignFollowAnnouncement = async (\n  fromId: DSNPUserId,\n  followee: DSNPUserId\n): Promise<SignedGraphChangeAnnouncement> =>\n  core.announcements.sign(\n    core.announcements.createFollowGraphChange(\n      core.identifiers.convertToDSNPUserURI(fromId),\n      core.identifiers.convertToDSNPUserURI(followee)\n    )\n  );\n\n/**\n * Creates a signed unfollow announcement.\n * Note that the provider's active signing address must be an authorized\n * delegate for the DSNP account specified by from id for this to be valid.\n * @param fromId DSNP Id of user doing the unfollowing\n * @param followee DSNP Id of user being unfollowed\n * @returns a signed announcement ready for inclusion in a batch\n */\nexport const buildAndSignUnfollowAnnouncement = async (\n  fromId: DSNPUserId,\n  followee: DSNPUserId\n): Promise<SignedGraphChangeAnnouncement> =>\n  core.announcements.sign(\n    core.announcements.createUnfollowGraphChange(\n      core.identifiers.convertToDSNPUserURI(fromId),\n      core.identifiers.convertToDSNPUserURI(followee)\n    )\n  );\n","import { Button, Popover, Spin } from \"antd\";\nimport * as wallet from \"../services/wallets/wallet\";\nimport React from \"react\";\nimport { userUpdateWalletType } from \"../redux/slices/userSlice\";\nimport { useAppDispatch } from \"../redux/hooks\";\nimport { upsertSessionWalletType } from \"../services/session\";\n\ninterface LoginButtonProps {\n  popoverVisible: boolean;\n  setPopoverVisible: any;\n  loginWalletOptions: wallet.WalletType;\n  loading: boolean;\n  loginWithWalletType: (wallet: wallet.WalletType) => void;\n}\n\nconst LoginButton = ({\n  popoverVisible,\n  setPopoverVisible,\n  loginWalletOptions,\n  loading,\n  loginWithWalletType,\n}: LoginButtonProps): JSX.Element => {\n  const handleVisibleChange = (visible: boolean) => {\n    setPopoverVisible(visible);\n  };\n\n  const dispatch = useAppDispatch();\n\n  const setWalletType = (wtype: wallet.WalletType) => {\n    dispatch(userUpdateWalletType(wtype));\n    upsertSessionWalletType(wtype);\n    loginWithWalletType(wtype);\n  };\n\n  const HeaderLoginButton = (\n    <Popover\n      placement=\"bottomRight\"\n      trigger=\"click\"\n      visible={popoverVisible}\n      onVisibleChange={handleVisibleChange}\n      content={\n        <div className=\"LoginButton__loginOptions\">\n          <Button\n            className=\"LoginButton__loginTorus\"\n            onClick={() => setWalletType(wallet.WalletType.TORUS)}\n          >\n            Torus\n          </Button>\n          <Button\n            className=\"LoginButton__loginMetamask\"\n            onClick={() => setWalletType(wallet.WalletType.METAMASK)}\n          >\n            MetaMask\n          </Button>\n        </div>\n      }\n    >\n      <Button className=\"LoginButton__loginButton\" aria-label=\"Login\">\n        Log In\n        {loading && <Spin className=\"LoginButton__spinner\" size=\"small\" />}\n      </Button>\n    </Popover>\n  );\n\n  const QuickStartLoginButton = (\n    <Button\n      className=\"LoginButton__loginButton LoginButton__loginButton--quickStart\"\n      aria-label=\"Login\"\n      onClick={() => loginWithWalletType(loginWalletOptions)}\n    >\n      Log In With {loginWalletOptions}\n      {loading && <Spin className=\"LoginButton__spinner\" size=\"small\" />}\n    </Button>\n  );\n\n  return (\n    <>\n      {loginWalletOptions === wallet.WalletType.NONE\n        ? HeaderLoginButton\n        : QuickStartLoginButton}\n    </>\n  );\n};\nexport default LoginButton;\n","import React from \"react\";\nimport { Avatar } from \"antd\";\nimport { HexString } from \"../utilities/types\";\nimport * as blockies from \"blockies-ts\";\n\nconst avatarSizeOptions = new Map([\n  [\"small\", 32],\n  [\"medium\", 50],\n  [\"large\", 100],\n]);\n\ninterface UserAvatarProps {\n  icon: string | undefined;\n  profileAddress: HexString | undefined;\n  avatarSize: string;\n}\n\nconst UserAvatar = ({\n  icon,\n  profileAddress,\n  avatarSize,\n}: UserAvatarProps): JSX.Element => {\n  const iconURL =\n    icon ||\n    (profileAddress && blockies.create({ seed: profileAddress }).toDataURL());\n  return (\n    <Avatar\n      className=\"UserAvatar\"\n      alt={profileAddress || \"anonymous\"}\n      src={iconURL}\n      size={avatarSizeOptions.get(avatarSize)}\n    />\n  );\n};\n\nexport default UserAvatar;\n","import React from \"react\";\nimport { Alert, Button, Form, Input, Popover } from \"antd\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport UserAvatar from \"./UserAvatar\";\nimport { core } from \"@dsnp/sdk\";\nimport * as dsnp from \"../services/dsnp\";\nimport * as registry from \"@dsnp/sdk/core/contracts/registry\";\nimport { HexString, Profile } from \"../utilities/types\";\nimport { Registration } from \"@dsnp/sdk/core/contracts/registry\";\nimport { DSNPUserURI } from \"@dsnp/sdk/dist/types/core/identifiers\";\n\ninterface RegistrationModalProps {\n  children: JSX.Element;\n  visible: boolean;\n  registrations: registry.Registration[];\n  walletAddress: HexString;\n  onIdResolved: (uri: DSNPUserURI) => void;\n  onCancel: () => void;\n}\n\nconst RegistrationModal = ({\n  children,\n  visible,\n  registrations,\n  walletAddress,\n  onIdResolved,\n  onCancel,\n}: RegistrationModalProps): JSX.Element => {\n  const [hasRegistrations, setHasRegistrations] = React.useState<boolean>(\n    false\n  );\n\n  const [\n    isCreatingRegistration,\n    setIsCreatingRegistration,\n  ] = React.useState<boolean>(true);\n\n  const [registrationError, setRegistrationError] = React.useState<\n    string | undefined\n  >(undefined);\n\n  const [selectedRegistration, setRegistration] = React.useState<\n    registry.Registration | undefined\n  >(undefined);\n\n  const profiles: Record<HexString, Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n\n  if (registrations.length) {\n    // Flip to select registration if we see registrations increase\n    if (!hasRegistrations) {\n      setHasRegistrations(true);\n      setIsCreatingRegistration(false);\n    }\n  } else {\n    // Flip to create registration if we see registrations decrease to zero\n    if (hasRegistrations) {\n      setHasRegistrations(false);\n      setIsCreatingRegistration(true);\n    }\n  }\n\n  // convert registration to uri before calling callback\n  const commitRegistration = () => {\n    if (!selectedRegistration) return;\n    onIdResolved(selectedRegistration.dsnpUserURI);\n  };\n\n  // create new DSNP registration\n  const register = async (formValues: { handle: string }) => {\n    try {\n      const userURI = await dsnp.createNewDSNPRegistration(\n        walletAddress,\n        formValues.handle\n      );\n      onIdResolved(core.identifiers.convertToDSNPUserId(userURI).toString());\n    } catch (error) {\n      console.error(error);\n      setRegistrationError(\n        `Error registering: ${error.message || error.toString()}`\n      );\n    }\n  };\n\n  // Find the profile photo a given DSNP registration\n  const iconForRegistration = (\n    registration: registry.Registration\n  ): string | undefined =>\n    profiles[\n      core.identifiers.convertToDSNPUserId(registration.dsnpUserURI).toString()\n    ]?.icon?.[0].href;\n\n  /**\n   * New Registration Form\n   */\n  const registerNewHandleForm = (\n    <Form\n      name=\"createHandle\"\n      className=\"RegistrationModal__createHandle\"\n      initialValues={{\n        remember: true,\n      }}\n      onFinish={register}\n    >\n      {registrationError && (\n        <>\n          <Alert message={registrationError} type=\"error\" />\n        </>\n      )}\n      <p>Please create a handle:</p>\n      <Form.Item\n        name=\"handle\"\n        className=\"RegistrationModal__handleInput\"\n        rules={[\n          {\n            required: true,\n            message: \"Handle cannot be blank\",\n          },\n        ]}\n      >\n        <Input />\n      </Form.Item>\n      <div className=\"RegistrationModal__footer\">\n        {hasRegistrations && (\n          <button\n            onClick={(e) => {\n              e.preventDefault();\n              setIsCreatingRegistration(false);\n            }}\n            className=\"RegisrationModal__changeMode\"\n          >\n            Select Existing Handle\n          </button>\n        )}\n        <Button\n          type=\"primary\"\n          htmlType=\"submit\"\n          className=\"RegistrationModal__footerBtn\"\n        >\n          Choose handle\n        </Button>\n      </div>\n    </Form>\n  );\n\n  /**\n   * Select Existing Handle UI\n   */\n  const selectHandleContent = (\n    <div>\n      <p>You have multiple handles associated with your account.</p>\n      <h3>Select an account:</h3>\n      <div className=\"RegistrationModal__registrations\">\n        {registrations.map((registration: Registration) => (\n          <button\n            className={`RegistrationModal__registration${\n              registration === selectedRegistration\n                ? \" RegistrationModal__registration--selected\"\n                : \"\"\n            }`}\n            onClick={() => setRegistration(registration)}\n            key={registration.dsnpUserURI}\n          >\n            <UserAvatar\n              icon={iconForRegistration(registration)}\n              profileAddress={registration.dsnpUserURI}\n              avatarSize=\"small\"\n            />\n            {`@${registration.handle}`}\n          </button>\n        ))}\n      </div>\n      <div className=\"RegistrationModal__footer\">\n        <button\n          onClick={() => setIsCreatingRegistration(true)}\n          className=\"RegisrationModal__changeMode\"\n        >\n          Create New Handle\n        </button>\n        <Button\n          className=\"RegistrationModal__footerBtn\"\n          key=\"post\"\n          type=\"primary\"\n          disabled={!selectedRegistration}\n          onClick={commitRegistration}\n        >\n          Select Handle\n        </Button>\n      </div>\n    </div>\n  );\n\n  /**\n   * Create a popover with either registration or handle selection UI.\n   */\n  return (\n    <Popover\n      placement=\"bottomRight\"\n      visible={visible}\n      content={\n        <div className=\"RegistrationModal\">\n          <Button\n            type=\"link\"\n            className=\"RegistrationModal__cancel\"\n            onClick={onCancel}\n          >\n            Cancel\n          </Button>\n          <h2>Welcome!</h2>\n          {isCreatingRegistration ? registerNewHandleForm : selectHandleContent}\n        </div>\n      }\n    >\n      {children}\n    </Popover>\n  );\n};\n\nexport default RegistrationModal;\n","import React from \"react\";\nimport { Badge, Button } from \"antd\";\nimport { WalletOutlined } from \"@ant-design/icons\";\nimport { useAppDispatch, useAppSelector } from \"../redux/hooks\";\nimport { userLogout, userUpdateId } from \"../redux/slices/userSlice\";\nimport * as dsnp from \"../services/dsnp\";\nimport * as wallet from \"../services/wallets/wallet\";\nimport * as session from \"../services/session\";\nimport LoginButton from \"./LoginButton\";\nimport { Registration } from \"@dsnp/sdk/core/contracts/registry\";\nimport RegistrationModal from \"./RegistrationModal\";\nimport { core } from \"@dsnp/sdk\";\nimport ethereum from \"../services/wallets/metamask/ethereum\";\nimport { HexString } from \"../utilities/types\";\n\ninterface LoginProps {\n  isPrimary: boolean;\n  loginWalletOptions: wallet.WalletType;\n}\n\nconst Login = ({ isPrimary, loginWalletOptions }: LoginProps): JSX.Element => {\n  const [loading, startLoading] = React.useState<boolean>(false);\n  const [popoverVisible, setPopoverVisible] = React.useState<boolean>(false);\n  const [registrationVisible, setRegistrationVisible] = React.useState<boolean>(\n    false\n  );\n\n  const [walletAddress, setWalletAddress] = React.useState<string>(\"\");\n  const [registrations, setRegistrations] = React.useState<Registration[]>([]);\n\n  const dispatch = useAppDispatch();\n  const userId = useAppSelector((state) => state.user.id);\n  const currentWalletType = useAppSelector((state) => state.user.walletType);\n\n  const setUserID = (fromURI: string) => {\n    const fromId = core.identifiers.convertToDSNPUserId(fromURI);\n    dispatch(userUpdateId(fromId.toString()));\n    session.upsertSessionUserId(fromId);\n    setRegistrationVisible(false);\n  };\n\n  const loginWithWalletAddress = async (\n    waddr: HexString,\n    selectedType: wallet.WalletType\n  ) => {\n    setWalletAddress(waddr);\n    dsnp.setupProvider(selectedType);\n    const registrations = await dsnp.getSocialIdentities(waddr);\n    if (registrations.length === 1) {\n      setUserID(registrations[0].dsnpUserURI);\n    } else {\n      setRegistrations(registrations);\n      setRegistrationVisible(true);\n    }\n  };\n\n  const login = async (selectedType: wallet.WalletType) => {\n    if (loading) return;\n    startLoading(true);\n    try {\n      const waddr = await wallet.wallet(selectedType).login();\n      await loginWithWalletAddress(waddr, selectedType);\n    } catch (error) {\n      logout();\n      setPopoverVisible(false);\n      startLoading(false);\n    }\n  };\n\n  const logout = () => {\n    startLoading(false);\n    setRegistrationVisible(false);\n    setWalletAddress(\"\");\n    if (!userId) return;\n    session.clearSession();\n    if (currentWalletType !== wallet.WalletType.NONE) {\n      wallet.wallet(currentWalletType)?.logout();\n    }\n    dispatch(userLogout());\n  };\n\n  // Listen for wallet account changes if this is the primary login button (there should only be one).\n  if (isPrimary) {\n    const handleAccountsChange = async (waddrs: HexString[]) => {\n      logout();\n      if (waddrs[0] && currentWalletType !== wallet.WalletType.NONE) {\n        startLoading(true);\n        await loginWithWalletAddress(waddrs[0], currentWalletType);\n      }\n    };\n\n    ethereum\n      ?.removeAllListeners(\"accountsChanged\")\n      .on(\"accountsChanged\", handleAccountsChange);\n  }\n\n  return (\n    <div className=\"Login__block\">\n      {!userId ? (\n        <RegistrationModal\n          visible={registrationVisible}\n          registrations={registrations}\n          onIdResolved={setUserID}\n          onCancel={logout}\n          walletAddress={walletAddress}\n        >\n          <LoginButton\n            popoverVisible={popoverVisible}\n            setPopoverVisible={setPopoverVisible}\n            loginWalletOptions={loginWalletOptions}\n            loading={loading}\n            loginWithWalletType={login}\n          />\n        </RegistrationModal>\n      ) : (\n        <>\n          <Badge\n            count={<WalletOutlined style={{ color: \"#52C41A\" }} />}\n            offset={[-48, 8]}\n          >\n            <img\n              className=\"Login__walletIcon\"\n              src={wallet.wallet(currentWalletType).icon}\n              alt=\"Wallet Symbol\"\n            />\n          </Badge>\n\n          <Button\n            className=\"Login__logOutButton\"\n            aria-label=\"Logout\"\n            onClick={logout}\n          >\n            Log Out\n          </Button>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Login;\n","import React from \"react\";\nimport Login from \"./Login\";\nimport * as wallet from \"../services/wallets/wallet\";\n\nconst Header = (): JSX.Element => {\n  return (\n    <div className=\"Header__block\">\n      <h1 className=\"Header__title\">Example Client</h1>\n      <Login loginWalletOptions={wallet.WalletType.NONE} isPrimary={true} />\n    </div>\n  );\n};\nexport default Header;\n","export default __webpack_public_path__ + \"static/media/Camera.a7abe56b.svg\";","import { Alert, Input, Spin } from \"antd\";\nimport { CloseCircleTwoTone } from \"@ant-design/icons\";\nimport React from \"react\";\nimport cameraIcon from \"../images/Camera.svg\";\nimport { HexString } from \"../utilities/types\";\nimport { Button } from \"antd\";\n\ninterface NewPostImageUploadProps {\n  onNewPostImageUpload: (uris: string[]) => void;\n}\n\nconst NewPostImageUpload = ({\n  onNewPostImageUpload,\n}: NewPostImageUploadProps): JSX.Element => {\n  const [previewLoading, setPreviewLoading] = React.useState<boolean>(false);\n  const [urlErrorMsg, setUrlErrorMsg] = React.useState<string | null>(null);\n  const [newUri, setNewUri] = React.useState<string>(\"\");\n  const [uriList, setUriList] = React.useState<string[]>([]);\n  const hasValidPostURI = newUri && newUri.match(/.+\\..+\\//);\n\n  const newContentItem = (value: HexString) => {\n    setNewUri(value);\n    setUrlErrorMsg(null);\n  };\n\n  const addContentToList = () => {\n    if (hasValidPostURI) {\n      const newUriList = [...uriList, newUri];\n      setUriList(newUriList);\n      onNewPostImageUpload(newUriList);\n      setNewUri(\"\");\n    } else {\n      setUrlErrorMsg(\"Invalid URL.\");\n    }\n  };\n\n  const deleteImage = (toBeDeletedIndex: number) => {\n    const deletedImageArray = [...uriList];\n    deletedImageArray.splice(toBeDeletedIndex, 1);\n    setUriList(deletedImageArray);\n    onNewPostImageUpload(deletedImageArray);\n  };\n  return (\n    <>\n      <div className=\"NewPostImageUpload__cover\">\n        {uriList &&\n          uriList.map((image, index) => {\n            return (\n              <div className=\"NewPostImageUpload__imageBlock\" key={index}>\n                <img\n                  alt=\"\"\n                  className=\"NewPostImageUpload__image\"\n                  src={image}\n                  onLoad={() => setPreviewLoading(false)}\n                />\n                <CloseCircleTwoTone\n                  className=\"NewPostImageUpload__imageDelete\"\n                  onClick={() => deleteImage(index)}\n                  twoToneColor=\"#9e9e9e\"\n                />\n              </div>\n            );\n          })}\n        {newUri && (\n          <Spin\n            className=\"NewPostImageUpload__spinner\"\n            spinning={previewLoading}\n          />\n        )}\n      </div>\n      <div className=\"NewPostImageUpload__urlInputBlock\">\n        <img\n          className=\"NewPostImageUpload__icon\"\n          src={cameraIcon}\n          alt=\"camera\"\n        />\n        <Input\n          className=\"NewPostImageUpload__urlInput\"\n          placeholder=\"Image URL\"\n          value={newUri || \"\"}\n          onChange={(e) => {\n            setPreviewLoading(true);\n            newContentItem(e.target.value);\n          }}\n        />\n        <Button\n          className=\"NewPostImageUpload__urlInputBtn\"\n          onClick={addContentToList}\n        >\n          Add\n        </Button>\n      </div>\n      {urlErrorMsg && (\n        <Alert\n          className=\"NewPostImageUpload__alert\"\n          type=\"error\"\n          message={urlErrorMsg}\n        />\n      )}\n    </>\n  );\n};\nexport default NewPostImageUpload;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { FeedItem, HexString } from \"../../utilities/types\";\n\ninterface isPostLoadingType {\n  loading: boolean;\n  currentUserId: HexString | undefined;\n}\n\ninterface isReplyLoadingType {\n  loading: boolean;\n  parent: HexString | undefined;\n}\n\ninterface feedState {\n  feedItems: FeedItem[];\n  isPostLoading: isPostLoadingType;\n  isReplyLoading: isReplyLoadingType;\n}\n\nconst initialState: feedState = {\n  feedItems: [],\n  isPostLoading: { loading: false, currentUserId: undefined },\n  isReplyLoading: { loading: false, parent: undefined },\n};\n\nconst newPostLoadingState = (\n  state: isPostLoadingType,\n  item: FeedItem\n): isPostLoadingType => {\n  if (state.loading && state.currentUserId === item.fromId)\n    return { loading: false, currentUserId: undefined };\n  return state;\n};\n\nconst newReplyLoadingState = (\n  state: isReplyLoadingType,\n  item: FeedItem\n): isReplyLoadingType => {\n  if (state.loading && state.parent === item.inReplyTo) {\n    return { loading: false, parent: undefined };\n  }\n  return state;\n};\n\nexport const feedSlice = createSlice({\n  name: \"feed\",\n  initialState,\n  reducers: {\n    addFeedItem: (state, action: PayloadAction<FeedItem>) => {\n      const newFeedItem = action.payload;\n      return {\n        ...state,\n        feedItems: [...state.feedItems, newFeedItem],\n        isPostLoading: newPostLoadingState(state.isPostLoading, newFeedItem),\n        isReplyLoading: newReplyLoadingState(state.isReplyLoading, newFeedItem),\n      };\n    },\n    clearFeedItems: (state) => {\n      return {\n        ...state,\n        feedItems: [],\n      };\n    },\n    postLoading: (state, isLoading: PayloadAction<isPostLoadingType>) => {\n      return {\n        ...state,\n        isPostLoading: {\n          loading: isLoading.payload.loading,\n          currentUserId: isLoading.payload.currentUserId,\n        },\n      };\n    },\n    replyLoading: (state, isLoading: PayloadAction<isReplyLoadingType>) => {\n      return {\n        ...state,\n        isReplyLoading: {\n          loading: isLoading.payload.loading,\n          parent: isLoading.payload.parent,\n        },\n      };\n    },\n  },\n});\n\nexport const {\n  addFeedItem,\n  clearFeedItems,\n  postLoading,\n  replyLoading,\n} = feedSlice.actions;\n\nexport default feedSlice.reducer;\n","export interface BatchedMessage {\n  // block containing last observed change to this relationship\n  blockNumber: number;\n\n  // index of log message in block contaiing batch\n  blockIndex: number;\n\n  // index of graph change within batch\n  batchIndex: number;\n}\n\n// choose latest profile comparing by blockNumber then blockIndex then batchIndex\nexport const latestBatchedMessage = <T extends BatchedMessage>(\n  a: T,\n  b: T\n): T => {\n  if (!a || a.blockNumber === undefined) return b;\n  if (!b || b.blockNumber === undefined) return a;\n  if (b.blockNumber !== a.blockNumber) {\n    return b.blockNumber > a.blockNumber ? b : a;\n  } else if (b.blockIndex !== a.blockIndex) {\n    return b.blockIndex > a.blockIndex ? b : a;\n  }\n  return b.batchIndex > a.batchIndex ? b : a;\n};\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { latestBatchedMessage } from \"../../utilities/sort\";\nimport { HexString, Profile } from \"../../utilities/types\";\n\ninterface profileState {\n  profiles: Record<HexString, Profile>;\n}\n\nconst initialState: profileState = {\n  profiles: {},\n};\n\nexport const profileSlice = createSlice({\n  name: \"profiles\",\n  initialState,\n  reducers: {\n    upsertProfile: (state, action: PayloadAction<Profile>) => {\n      const key = action.payload.fromId;\n      const oldProfile = state.profiles[key];\n      const newProfile = oldProfile\n        ? { ...oldProfile, ...action.payload }\n        : action.payload;\n      return {\n        profiles: {\n          ...state.profiles,\n          [key]: latestBatchedMessage(oldProfile, newProfile),\n        },\n      };\n    },\n    removeProfile: (state, action: PayloadAction<HexString>) => {\n      const { [action.payload]: _, ...newProfiles } = state.profiles;\n      return { profiles: newProfiles };\n    },\n  },\n});\nexport const { upsertProfile, removeProfile } = profileSlice.actions;\nexport default profileSlice.reducer;\n","import React from \"react\";\nimport Post from \"./Post\";\nimport { FeedItem } from \"../utilities/types\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport {\n  RelationshipState,\n  RelationshipStatus,\n} from \"../redux/slices/graphSlice\";\nimport BlankPost from \"./BlankPost\";\n\nenum FeedTypes {\n  MY_FEED,\n  MY_POSTS,\n  DISCOVER,\n  DISPLAY_ID_POSTS,\n}\n\ninterface PostListProps {\n  feedType: FeedTypes;\n}\n\nconst sortFeed = (feed: FeedItem[]): FeedItem[] => {\n  feed.sort(\n    (firstFeedItem: FeedItem, secondFeedItem: FeedItem) =>\n      secondFeedItem.blockNumber - firstFeedItem.blockNumber\n  );\n  return feed;\n};\n\nconst PostList = ({ feedType }: PostListProps): JSX.Element => {\n  const userId: string | undefined = useAppSelector((state) => state.user.id);\n  const displayId: string | undefined = useAppSelector(\n    (state) => state.user.displayId\n  );\n  const myGraph: Record<string, RelationshipState> = useAppSelector(\n    (state) => (userId && state.graphs.following[userId]) || {}\n  );\n\n  const initialFeed: FeedItem[] = useAppSelector(\n    (state) => state.feed.feedItems\n  ).filter(\n    (post) => post?.content?.type === \"Note\" && post?.inReplyTo === undefined\n  );\n  const loading: boolean = useAppSelector(\n    (state) => state.feed.isPostLoading.loading\n  );\n\n  const feed: FeedItem[] = sortFeed(initialFeed);\n\n  let currentFeed: FeedItem[] = [];\n\n  if (feedType === FeedTypes.MY_FEED) {\n    currentFeed = feed.filter(\n      (post) =>\n        post.fromId === userId ||\n        myGraph[post.fromId]?.status === RelationshipStatus.FOLLOWING\n    );\n  } else if (feedType === FeedTypes.MY_POSTS) {\n    currentFeed = feed.filter((post) => userId === post?.fromId);\n  } else if (feedType === FeedTypes.DISPLAY_ID_POSTS) {\n    currentFeed = feed.filter((post) => displayId === post?.fromId);\n  } else {\n    currentFeed = feed;\n  }\n\n  return (\n    <div className=\"PostList__block\">\n      {loading && <BlankPost />}\n      {currentFeed.length > 0 ? (\n        <>\n          {currentFeed.map((post, index) => (\n            <Post key={index} feedItem={post} />\n          ))}\n        </>\n      ) : (\n        \"Empty Feed!\"\n      )}\n    </div>\n  );\n};\n\nexport default PostList;\n","import { FeedItem, Reply } from \"../utilities/types\";\nimport { core } from \"@dsnp/sdk\";\nimport { RegistryUpdateLogData } from \"@dsnp/sdk/core/contracts/registry\";\nimport { addFeedItem, clearFeedItems } from \"../redux/slices/feedSlice\";\nimport { upsertProfile } from \"../redux/slices/profileSlice\";\nimport { AnyAction, ThunkDispatch } from \"@reduxjs/toolkit\";\nimport {\n  ActivityContentNote,\n  ActivityContentProfile,\n  isActivityContentNoteType,\n  isActivityContentProfileType,\n  createProfile,\n} from \"@dsnp/sdk/core/activityContent\";\nimport {\n  BroadcastAnnouncement,\n  ReplyAnnouncement,\n  GraphChangeAnnouncement,\n  DSNPGraphChangeType,\n} from \"@dsnp/sdk/core/announcements\";\nimport { BatchPublicationLogData } from \"@dsnp/sdk/core/contracts/subscription\";\nimport { upsertGraph } from \"../redux/slices/graphSlice\";\nimport * as dsnp from \"./dsnp\";\nimport { UnsubscribeFunction } from \"@dsnp/sdk/dist/types/core/contracts/utilities\";\nimport { keccak256 } from \"web3-utils\";\nimport { HexString } from \"@dsnp/sdk/dist/types/types/Strings\";\nimport { DSNPUserId } from \"@dsnp/sdk/dist/types/core/identifiers\";\n\n//\n// Content Package\n// This package manages content interaction between the DSNP network, storage, and the redux store.\n// It also provides functions to initiate the creation of new content.\n//\n\n//\n// Parameter types\n//\n\ntype Dispatch = ThunkDispatch<any, Record<string, any>, AnyAction>;\n\n//\n// Exported Functions\n//\n\n/**\n * startSubscription initializes subscriptions for DSNP content, processes the\n * results, and routes them to the redux store.\n * @param dispatch thunk dispatch used to interact with the redux store when content arrives\n * @returns unsubscribe function that can be used to stop the subscriptions.\n */\nexport const startSubscriptions = async (\n  dispatch: Dispatch\n): Promise<UnsubscribeFunction> => {\n  dispatch(clearFeedItems());\n\n  return dsnp.startSubscriptions(\n    handleBatchAnnouncement(dispatch),\n    handleRegistryUpdate(dispatch)\n  );\n};\n\n/**\n * sendPost stores a post, creates an announcement for it, stores that in a batch, and publishes the batch.\n * @param post the post content to add\n * @returns a promise pending completion\n */\nexport const sendPost = async (post: FeedItem): Promise<void> => {\n  if (!post.content) return;\n  const hash = await storeActivityContent(post.content);\n  const announcement = await dsnp.buildAndSignPostAnnouncement(\n    post.fromId,\n    `${process.env.REACT_APP_UPLOAD_HOST}/${hash}.json`,\n    hash\n  );\n\n  await dsnp.batchAnnouncement(`${hash}.parquet`, announcement);\n};\n\n/**\n * sendReply stores a reply, creates an announcement for it, stores that in a batch, and publishes the batch.\n * @param post the post content to add\n * @returns a promise pending completion\n */\nexport const sendReply = async (\n  reply: Reply,\n  inReplyTo: HexString\n): Promise<void> => {\n  if (!reply.content || !inReplyTo) return;\n\n  const hash = await storeActivityContent(reply.content);\n  const announcement = await dsnp.buildAndSignReplyAnnouncement(\n    reply.fromId,\n    inReplyTo,\n    `${process.env.REACT_APP_UPLOAD_HOST}/${hash}.json`,\n    hash\n  );\n\n  await dsnp.batchAnnouncement(`${hash}.parquet`, announcement);\n};\n\n/**\n * sendProfile stores a profile, creates an announcement for it, stores that in a batch, and publishes the batch.\n * @param post the profile content to add\n * @returns a promise pending completion\n */\nexport const saveProfile = async (\n  fromId: DSNPUserId,\n  profile: ActivityContentProfile\n): Promise<void> => {\n  const hash = await storeActivityContent(profile);\n  const announcement = await dsnp.buildAndSignProfile(\n    fromId,\n    `${process.env.REACT_APP_UPLOAD_HOST}/${hash}.json`,\n    hash\n  );\n\n  await dsnp.batchAnnouncement(`${hash}.parquet`, announcement);\n};\n\n/**\n * followUser creates and announces a DSNP follow graph change event.\n * @param fromId DSNP Id of user doing the following\n * @param followee DSNP Id of the user being followed\n */\nexport const followUser = async (\n  fromId: DSNPUserId,\n  followee: DSNPUserId\n): Promise<void> => {\n  const announcement = await dsnp.buildAndSignFollowAnnouncement(\n    fromId,\n    followee\n  );\n  const hash = core.announcements.serialize(announcement);\n  await dsnp.batchAnnouncement(hash, announcement);\n};\n\n/**\n * unfollowUser creates and announces a DSNP unfollow graph change event.\n * @param fromId DSNP Id of user doing the unfollowing\n * @param followee DSNP Id of the user being unfollowed\n */\nexport const unfollowUser = async (\n  fromId: DSNPUserId,\n  followee: DSNPUserId\n): Promise<void> => {\n  const announcement = await dsnp.buildAndSignUnfollowAnnouncement(\n    fromId,\n    followee\n  );\n  const hash = core.announcements.serialize(announcement);\n  await dsnp.batchAnnouncement(hash, announcement);\n};\n\n//\n// Internal Functions\n//\n\n/**\n * dispatchActivityContent determines what type of content its receiving and\n * routes it to the correct redux store\n * @param dispatch function used to dispatch to store\n * @param message announcment information from batch\n * @param activityContent activity content retrieved from announcment\n * @param blockNumber number of block containing the publication\n * @param blockIndex index of log message (relative to other DSNP logs) within the block\n * @param batchIndex index of announcment within the batch\n */\nconst dispatchActivityContent = (\n  dispatch: Dispatch,\n  message: BroadcastAnnouncement,\n  activityContent: ActivityContentNote | ActivityContentProfile,\n  blockNumber: number,\n  blockIndex: number,\n  batchIndex: number\n) => {\n  if (isActivityContentNoteType(activityContent)) {\n    return dispatchFeedItem(\n      dispatch,\n      message,\n      activityContent as ActivityContentNote,\n      blockNumber\n    );\n  } else if (isActivityContentProfileType(activityContent)) {\n    return dispatchProfile(\n      dispatch,\n      message,\n      activityContent as ActivityContentProfile,\n      blockNumber,\n      blockIndex,\n      batchIndex\n    );\n  }\n};\n\n/**\n * dispatchFeedItem dispatches a feed item to the redux store\n * @param dispatch function used to dispatch to store\n * @param message announcment information from batch\n * @param content activity content retrieved from announcment\n * @param blockNumber number of block containing the publication\n */\nconst dispatchFeedItem = (\n  dispatch: Dispatch,\n  message: BroadcastAnnouncement | ReplyAnnouncement,\n  content: ActivityContentNote,\n  blockNumber: number\n) => {\n  dispatch(\n    addFeedItem({\n      fromId: message.fromId.toString(),\n      blockNumber: blockNumber,\n      hash: message.contentHash,\n      published: content.published,\n      uri: message.url,\n      content: content,\n      inReplyTo:\n        message.announcementType === core.announcements.AnnouncementType.Reply\n          ? message.inReplyTo\n          : undefined,\n    })\n  );\n};\n\n/**\n * dispatchProfile dispatches a profile to the redux store\n * @param dispatch function used to dispatch to store\n * @param message announcment information from batch\n * @param profile profile to dispatch\n * @param blockNumber number of block containing the publication\n * @param blockIndex index of log message (relative to other DSNP logs) within the block\n * @param batchIndex index of announcment within the batch\n */\nconst dispatchProfile = (\n  dispatch: Dispatch,\n  message: BroadcastAnnouncement,\n  profile: ActivityContentProfile,\n  blockNumber: number,\n  blockIndex: number,\n  batchIndex: number\n) => {\n  dispatch(\n    upsertProfile({\n      ...profile,\n      fromId: message.fromId.toString(),\n      blockNumber,\n      blockIndex,\n      batchIndex,\n    })\n  );\n};\n\n/**\n * handleRegistryUpdate dispatches a profile update for the handle when a registry update is made.\n * @param dispatch function used to dispatch to store\n * @param update registry log message containg DSNP uri and handle\n */\nconst handleRegistryUpdate = (dispatch: Dispatch) => (\n  update: RegistryUpdateLogData\n) => {\n  dispatch(\n    upsertProfile({\n      ...createProfile(),\n      fromId: core.identifiers\n        .convertToDSNPUserId(update.dsnpUserURI)\n        .toString(),\n      handle: update.handle,\n      blockNumber: update.blockNumber,\n      blockIndex: update.transactionIndex,\n      batchIndex: 0, // batchIndex doesn't apply to registry updates\n    })\n  );\n};\n\n/**\n * fetchAndDispatchContent retrieves activity content for an annoucement and then dispatches\n * it to the redux store.\n * @param dispatch function used to dispatch to store\n * @param message broadcast annoucnement containing activity content url\n * @param blockNumber block number of block containing publication\n * @param blockIndex index of publication within block\n * @param batchIndex index of announcment within batch\n * @throws if content cannot be retrieved\n */\nconst fetchAndDispatchContent = async (\n  dispatch: Dispatch,\n  message: BroadcastAnnouncement,\n  blockNumber: number,\n  blockIndex: number,\n  batchIndex: number\n) => {\n  try {\n    const res = await fetch(message.url);\n    const activityContent = await res.json();\n    dispatchActivityContent(\n      dispatch,\n      message,\n      activityContent,\n      blockNumber,\n      blockIndex,\n      batchIndex\n    );\n  } catch (err) {\n    console.log(err);\n  }\n};\n\n/**\n * dipatchGraphChange updates the social graph in redux with a graph change announcment.\n * @param dispatch function used to dispatch to store\n * @param graphChange graph change announcment\n * @param blockNumber block number of block containing publication\n * @param blockIndex index of publication within block\n * @param batchIndex index of announcment within batch\n */\nconst dispatchGraphChange = (\n  dispatch: Dispatch,\n  graphChange: GraphChangeAnnouncement,\n  blockNumber: number,\n  blockIndex: number,\n  batchIndex: number\n) => {\n  dispatch(\n    upsertGraph({\n      follower: graphChange.fromId.toString(),\n      followee: graphChange.objectId.toString(),\n      unfollow: graphChange.changeType === DSNPGraphChangeType.Unfollow,\n      blockNumber,\n      blockIndex,\n      batchIndex,\n    })\n  );\n};\n\n/**\n * handleBatchAnnouncment retrieves and parses a batch and then routes its contents\n * to the redux store.\n * @param dispatch function used to dispatch to the store\n * @param batchAnnouncement announcement of batch (publication) to handle\n */\nconst handleBatchAnnouncement = (dispatch: Dispatch) => (\n  batchAnnouncement: BatchPublicationLogData\n) => {\n  dsnp.readBatchFile(batchAnnouncement, (announcementRow, batchIndex) => {\n    try {\n      const announcement = announcementRow as unknown;\n      if (dsnp.isGraphChangeAnnouncement(announcement)) {\n        dispatchGraphChange(\n          dispatch,\n          announcement,\n          batchAnnouncement.blockNumber,\n          batchAnnouncement.transactionIndex,\n          batchIndex++\n        );\n      } else if (dsnp.isBroadcastAnnouncement(announcement)) {\n        fetchAndDispatchContent(\n          dispatch,\n          announcement,\n          batchAnnouncement.blockNumber,\n          batchAnnouncement.transactionIndex,\n          batchIndex++\n        );\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  });\n};\n\n/**\n * storeActivityContent stores activity content on the static server\n * @param content the content to store\n * @returns hash of content (from which url can be derived)\n */\nconst storeActivityContent = async (\n  content: ActivityContentNote | ActivityContentProfile\n): Promise<string> => {\n  const hash = keccak256(JSON.stringify(content));\n  await fetch(\n    `${process.env.REACT_APP_UPLOAD_HOST}/upload?filename=${encodeURIComponent(\n      hash + \".json\"\n    )}`,\n    {\n      method: \"POST\",\n      mode: \"cors\",\n      body: JSON.stringify(content),\n    }\n  );\n  return hash;\n};\n","import React from \"react\";\nimport { Profile } from \"../utilities/types\";\n\ninterface FromTitleProps {\n  profile: Partial<Profile>;\n  isHoveringProfile?: boolean;\n}\n\nexport const FromTitle = ({\n  profile,\n  isHoveringProfile,\n}: FromTitleProps): JSX.Element => {\n  const atHandle = profile.handle && \"@\" + profile.handle;\n  const primary = profile.name || atHandle || profile.fromId;\n  const secondary = profile.name ? atHandle : undefined;\n\n  return (\n    <span className=\"FromTitle__block\">\n      <span className={isHoveringProfile ? \"FromTitle__primary--active\" : \"\"}>\n        {primary}\n      </span>\n      {secondary && <span className=\"FromLine__secondary\">{secondary}</span>}\n    </span>\n  );\n};\n","import React from \"react\";\nimport { Button, Space, Spin, Modal, Input } from \"antd\";\nimport { useAppDispatch, useAppSelector } from \"../redux/hooks\";\nimport UserAvatar from \"./UserAvatar\";\nimport NewPostImageUpload from \"./NewPostImageUpload\";\nimport { FeedItem, HexString, Profile } from \"../utilities/types\";\nimport { createNote } from \"../services/Storage\";\nimport { sendPost } from \"../services/content\";\nimport { createProfile } from \"@dsnp/sdk/core/activityContent\";\nimport { FromTitle } from \"./FromTitle\";\nimport { postLoading } from \"../redux/slices/feedSlice\";\n\ninterface NewPostProps {\n  onSuccess: () => void;\n  onCancel: () => void;\n}\n\nconst NewPost = ({ onSuccess, onCancel }: NewPostProps): JSX.Element => {\n  const dispatch = useAppDispatch();\n  const [saving, setSaving] = React.useState<boolean>(false);\n  const [uriList, setUriList] = React.useState<string[]>([]);\n  const [postMessage, setPostMessage] = React.useState<string>(\"\");\n  const [isValidPost, setIsValidPost] = React.useState<boolean>(false);\n\n  const userId: string | undefined = useAppSelector((state) => state.user.id);\n\n  const profiles: Record<HexString, Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n\n  const profile = (userId && profiles[userId]) || {\n    ...createProfile(),\n    fromId: userId || \"\",\n  };\n\n  const success = () => {\n    setSaving(false);\n    onSuccess();\n  };\n\n  const createPost = async () => {\n    if (!userId) return;\n    const newPostFeedItem: FeedItem = await createNote(\n      postMessage,\n      uriList,\n      userId\n    );\n    await sendPost(newPostFeedItem);\n    dispatch(postLoading({ loading: true, currentUserId: userId }));\n    success();\n  };\n\n  const handleMessageInputChange = (\n    e: React.ChangeEvent<HTMLTextAreaElement>\n  ) => {\n    if (saving) return;\n    e.target.value !== \"\" ? setIsValidPost(true) : setIsValidPost(false);\n    setPostMessage(e.target.value);\n  };\n\n  return (\n    <Modal\n      className=\"NewPost\"\n      visible={true}\n      onCancel={onCancel}\n      width=\"535px\"\n      centered={true}\n      title={\"Create a post\"}\n      footer={[\n        <Spin spinning={saving} key={1}>\n          <Space>\n            <Button\n              className=\"NewPost__footerBtn\"\n              key=\"post\"\n              type=\"primary\"\n              disabled={!isValidPost || saving}\n              onClick={createPost}\n            >\n              Post\n            </Button>\n          </Space>\n        </Spin>,\n      ]}\n    >\n      <div className=\"NewPost__profileBlock\">\n        <UserAvatar\n          icon={profile?.icon?.[0]?.href}\n          profileAddress={userId}\n          avatarSize={\"small\"}\n        />\n        <h3 className=\"NewPost__profileBlockName\">\n          <FromTitle profile={profile} />\n        </h3>\n      </div>\n      <Input.TextArea\n        className=\"NewPost__textArea\"\n        placeholder=\"Message\"\n        value={postMessage || \"\"}\n        onChange={(e) => handleMessageInputChange(e)}\n        rows={6}\n      />\n      <NewPostImageUpload onNewPostImageUpload={setUriList} />\n    </Modal>\n  );\n};\n\nexport default NewPost;\n","import React from \"react\";\nimport ReactPlayer from \"react-player\";\nimport { Carousel } from \"antd\";\nimport { RightOutlined, LeftOutlined } from \"@ant-design/icons\";\nimport {\n  ActivityContentAttachment,\n  ActivityContentImage,\n  ActivityContentVideo,\n  ActivityContentAudio,\n} from \"@dsnp/sdk/core/activityContent\";\n\ninterface PostMediaProps {\n  attachment: ActivityContentAttachment[];\n}\n\nconst PostMedia = ({ attachment }: PostMediaProps): JSX.Element => {\n  const getPostMediaItems = () => {\n    return attachment.map((item, index) => {\n      const type = item?.type?.toLowerCase();\n      return (\n        <div key={index} className=\"PostMedia__cover\">\n          {type === \"image\" && (\n            <a\n              href={(item as ActivityContentImage).url[0].href}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <img\n                alt={item.name}\n                className=\"PostMedia__img\"\n                src={(item as ActivityContentImage).url[0].href}\n              />\n            </a>\n          )}\n          {(type === \"video\" || type === \"audio\") && (\n            <ReactPlayer\n              controls\n              playsinline\n              className=\"PostMedia__img\"\n              url={\n                (item as ActivityContentVideo | ActivityContentAudio).url[0]\n                  .href\n              }\n              width={670}\n              height={type === \"video\" ? 400 : 55}\n              muted\n            />\n          )}\n        </div>\n      );\n    });\n  };\n\n  return (\n    <Carousel\n      nextArrow={<RightOutlined />}\n      prevArrow={<LeftOutlined />}\n      dots={true}\n    >\n      {getPostMediaItems()}\n    </Carousel>\n  );\n};\nexport default PostMedia;\n","import React from \"react\";\n\nconst getMonthName = (monthNum: number) => {\n  monthNum--;\n  const months = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sept\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n  return months[monthNum];\n};\n\nconst getRelativeTime = (postTime: string) => {\n  const timeOfPost = new Date(postTime);\n  const currentTime = new Date();\n  const secondsPast = (currentTime.getTime() - timeOfPost.getTime()) / 1000;\n  if (secondsPast < 60) {\n    return Math.floor(secondsPast) + \"s •\";\n  }\n  if (secondsPast < 3600) {\n    return Math.floor(secondsPast / 60) + \"m •\";\n  }\n  if (secondsPast <= 86400) {\n    return Math.floor(secondsPast / 3600) + \"h •\";\n  }\n  if (secondsPast > 86400) {\n    return `${getMonthName(\n      timeOfPost.getMonth()\n    )} ${timeOfPost.getDate()}, ${timeOfPost.getFullYear()} •`;\n  }\n};\n\ninterface RelativeTimeProps {\n  published: string;\n  postStyle: boolean;\n}\n\nconst RelativeTime = ({\n  published,\n  postStyle,\n}: RelativeTimeProps): JSX.Element => {\n  return (\n    <p className={`RelativeTime ${postStyle ? \"RelativeTime--post\" : \"\"}`}>\n      {getRelativeTime(published)}\n    </p>\n  );\n};\n\nexport default RelativeTime;\n","import React, { useState } from \"react\";\nimport { Menu, Dropdown } from \"antd\";\nimport { CheckCircleOutlined, EllipsisOutlined } from \"@ant-design/icons\";\nimport {\n  buildDSNPAnnouncementURI,\n  DSNPUserId,\n  DSNPAnnouncementURI,\n} from \"@dsnp/sdk/core/identifiers\";\nimport { HexString } from \"../utilities/types\";\n\ninterface PostHashDropdownProps {\n  hash: HexString;\n  fromId: DSNPUserId;\n  isReply?: boolean;\n}\n\nconst PostHashDropdown = ({\n  hash,\n  fromId,\n  isReply,\n}: PostHashDropdownProps): JSX.Element => {\n  const [isCopied, setIsCopied] = useState<boolean>(false);\n  const [isVisible, setIsVisible] = useState<boolean>(false);\n\n  const announcementURI: DSNPAnnouncementURI = buildDSNPAnnouncementURI(\n    fromId,\n    hash\n  );\n\n  const menu = (\n    <Menu onClick={() => setIsVisible(true)}>\n      <Menu.Item\n        key=\"valid\"\n        onClick={() => {\n          setIsCopied(true);\n          setTimeout(function () {\n            setIsCopied(false);\n          }, 2000);\n        }}\n      >\n        {isCopied ? (\n          <div>\n            <CheckCircleOutlined /> Copied!\n          </div>\n        ) : (\n          <div\n            className=\"PostHashDropdown__menuHash\"\n            onClick={() => navigator.clipboard.writeText(announcementURI)}\n          >\n            DSNP Announcement URI: {announcementURI}\n          </div>\n        )}\n      </Menu.Item>\n    </Menu>\n  );\n  return (\n    <Dropdown\n      className={\n        isReply ? \"PostHashDropdown__replyBlock\" : \"PostHashDropdown__block\"\n      }\n      overlay={menu}\n      visible={isVisible}\n      onVisibleChange={(e) => setIsVisible(e)}\n      placement=\"bottomRight\"\n    >\n      <button\n        className=\"PostHashDropdown__button\"\n        onClick={(e) => e.preventDefault()}\n      >\n        <EllipsisOutlined />\n      </button>\n    </Dropdown>\n  );\n};\n\nexport default PostHashDropdown;\n","import React, { useEffect, useState } from \"react\";\nimport * as types from \"../utilities/types\";\nimport UserAvatar from \"./UserAvatar\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport PostHashDropdown from \"./PostHashDropdown\";\n\ninterface ReplyProps {\n  reply: types.Reply;\n}\n\nconst Reply = ({ reply }: ReplyProps): JSX.Element => {\n  const cachedProfiles: Record<string, types.Profile> = useAppSelector(\n    (state) => state.profiles.profiles\n  );\n  const [fromProfile, setFromProfile] = useState<types.Profile | undefined>(\n    undefined\n  );\n\n  useEffect(() => {\n    setFromProfile(cachedProfiles[reply.fromId]);\n  }, [cachedProfiles, reply]);\n\n  return (\n    <div className=\"Reply__block\">\n      <PostHashDropdown\n        hash={reply.hash}\n        fromId={reply.fromId}\n        isReply={true}\n      />\n      <UserAvatar\n        icon={fromProfile?.icon?.[0]?.href}\n        profileAddress={reply.fromId}\n        avatarSize=\"small\"\n      />\n      <div className=\"Reply__message\">\n        <div className=\"Reply__name\">\n          {fromProfile?.name || fromProfile?.fromId}\n        </div>\n        {reply.content.content}\n      </div>\n    </div>\n  );\n};\n\nexport default Reply;\n","import { Input } from \"antd\";\nimport React, { useState } from \"react\";\nimport { createNote } from \"../services/Storage\";\nimport { sendReply } from \"../services/content\";\nimport { HexString } from \"../utilities/types\";\nimport { useAppDispatch, useAppSelector } from \"../redux/hooks\";\nimport { replyLoading } from \"../redux/slices/feedSlice\";\n\ninterface ReplyInputProps {\n  parent: HexString;\n}\n\nconst ReplyInput = ({ parent }: ReplyInputProps): JSX.Element => {\n  const dispatch = useAppDispatch();\n  const userId = useAppSelector((state) => state.user.id);\n  const [saving, setSaving] = React.useState<boolean>(false);\n  const [replyValue, setReplyValue] = useState<string>(\"\");\n\n  const createReply = async (\n    event: React.KeyboardEvent<HTMLTextAreaElement>\n  ) => {\n    event.preventDefault();\n    if (!userId) return;\n    setSaving(true);\n    const newReplyFeedItem = await createNote(replyValue, [], userId);\n    await sendReply(newReplyFeedItem, parent);\n    dispatch(replyLoading({ loading: true, parent: parent }));\n    setReplyValue(\"\");\n    setSaving(false);\n  };\n\n  return (\n    <div className=\"ReplyInput__newReplyBlock\">\n      <Input.TextArea\n        className=\"ReplyInput__input\"\n        placeholder=\"Reply...\"\n        value={replyValue}\n        onChange={(e) => {\n          if (saving) return;\n          setReplyValue(e.target.value);\n        }}\n        autoSize={true}\n        onPressEnter={(event) => createReply(event)}\n      />\n    </div>\n  );\n};\n\nexport default ReplyInput;\n","import React from \"react\";\nimport UserAvatar from \"./UserAvatar\";\n\nconst BlankReply = (): JSX.Element => {\n  return (\n    <div className=\"BlankReply__block\">\n      <UserAvatar\n        icon={undefined}\n        profileAddress={undefined}\n        avatarSize=\"small\"\n      />\n      <div className=\"BlankReply__messageBlock\">\n        <div className=\"BlankReply__name\"> </div>\n        <div className=\"BlankReply__message\"> </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BlankReply;\n","import React from \"react\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport { FeedItem, HexString } from \"../utilities/types\";\nimport Reply from \"./Reply\";\nimport ReplyInput from \"./ReplyInput\";\nimport BlankReply from \"./BlankReply\";\n\ninterface isReplyLoadingType {\n  loading: boolean;\n  parent: HexString | undefined;\n}\n\ninterface ReplyBlockProps {\n  parent: HexString;\n}\n\nconst ReplyBlock = ({ parent }: ReplyBlockProps): JSX.Element => {\n  const replyFeed: FeedItem[] = useAppSelector(\n    (state) => state.feed.feedItems\n  ).filter((reply) => {\n    return reply?.content?.type === \"Note\" && reply?.inReplyTo === parent;\n  }) as FeedItem[];\n\n  const loading: isReplyLoadingType = useAppSelector(\n    (state) => state.feed.isReplyLoading\n  );\n\n  return (\n    <>\n      {(parent === loading?.parent || replyFeed.length > 0) && (\n        <div className=\"ReplyBlock__repliesList\">\n          {replyFeed.length > 0 && (\n            <>\n              {replyFeed.map((reply, index) => (\n                <Reply reply={reply} key={index} />\n              ))}\n            </>\n          )}\n          {parent === loading?.parent && <BlankReply />}\n        </div>\n      )}\n      <ReplyInput parent={parent} />\n    </>\n  );\n};\n\nexport default ReplyBlock;\n","import React, { useState } from \"react\";\nimport { Card } from \"antd\";\nimport { FeedItem, HexString, Profile } from \"../utilities/types\";\nimport UserAvatar from \"./UserAvatar\";\nimport PostMedia from \"./PostMedia\";\nimport RelativeTime from \"./RelativeTime\";\nimport ReplyBlock from \"./ReplyBlock\";\nimport PostHashDropdown from \"./PostHashDropdown\";\nimport { ActivityContentImage } from \"@dsnp/sdk/core/activityContent\";\nimport { FromTitle } from \"./FromTitle\";\nimport { setDisplayId } from \"../redux/slices/userSlice\";\nimport { useAppDispatch, useAppSelector } from \"../redux/hooks\";\n\ninterface PostProps {\n  feedItem: FeedItem;\n}\n\nconst Post = ({ feedItem }: PostProps): JSX.Element => {\n  const dispatch = useAppDispatch();\n\n  const noteContent = feedItem.content;\n  const attachments = noteContent.attachment;\n\n  const [isHoveringProfile, setIsHoveringProfile] = useState(false);\n\n  const profiles: Record<HexString, Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n\n  const profile: Profile = profiles[feedItem.fromId] || {\n    fromId: feedItem.fromId,\n  };\n\n  return (\n    <Card key={feedItem.hash} className=\"Post__block\" bordered={false}>\n      <div\n        onClick={() => dispatch(setDisplayId(feedItem.fromId))}\n        onMouseEnter={() => setIsHoveringProfile(true)}\n        onMouseLeave={() => setIsHoveringProfile(false)}\n        className=\"Post__metaBlock\"\n      >\n        <Card.Meta\n          avatar={\n            <UserAvatar\n              icon={profile.icon?.[0]?.href}\n              profileAddress={feedItem.fromId}\n              avatarSize={\"medium\"}\n            />\n          }\n          title={\n            <FromTitle\n              profile={profile}\n              isHoveringProfile={isHoveringProfile}\n            />\n          }\n          description={\n            noteContent.published && (\n              <RelativeTime\n                published={noteContent.published}\n                postStyle={true}\n              />\n            )\n          }\n        />\n      </div>\n      <PostHashDropdown hash={feedItem.hash} fromId={feedItem.fromId} />\n      <div className=\"Post__caption\">{noteContent.content}</div>\n      {attachments && (\n        <PostMedia attachment={attachments as ActivityContentImage[]} />\n      )}\n      <ReplyBlock parent={feedItem.hash} />\n    </Card>\n  );\n};\n\nexport default Post;\n","import React from \"react\";\nimport { Card } from \"antd\";\nimport UserAvatar from \"./UserAvatar\";\n\nconst BlankPost = (): JSX.Element => {\n  return (\n    <Card className=\"BlankPost__block\" bordered={false}>\n      <Card.Meta\n        avatar={\n          <UserAvatar\n            icon={undefined}\n            profileAddress={undefined}\n            avatarSize={\"medium\"}\n          />\n        }\n        title={<div className=\"BlankPost__title\"> </div>}\n        description={<div className=\"BlankPost__description\"> </div>}\n      />\n      <div className=\"BlankPost__contentLine1\"> </div>\n      <div className=\"BlankPost__contentLine2\"> </div>\n      <div className=\"BlankPost__contentLine3\"> </div>\n    </Card>\n  );\n};\n\nexport default BlankPost;\n","import React, { useEffect, useState } from \"react\";\nimport NewPost from \"./NewPost\";\nimport PostList from \"./PostList\";\nimport { Button } from \"antd\";\nimport { useAppDispatch, useAppSelector } from \"../redux/hooks\";\nimport * as types from \"../utilities/types\";\nimport { ArrowLeftOutlined } from \"@ant-design/icons\";\nimport { setDisplayId } from \"../redux/slices/userSlice\";\n\nenum FeedTypes {\n  MY_FEED,\n  MY_POSTS,\n  DISCOVER,\n  DISPLAY_ID_POSTS,\n}\n\nconst Feed = (): JSX.Element => {\n  const dispatch = useAppDispatch();\n\n  const userId = useAppSelector((state) => state.user.id);\n  const displayId = useAppSelector((state) => state.user.displayId);\n\n  const profiles: Record<types.HexString, types.Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n  const profile: types.Profile | undefined = displayId\n    ? profiles[displayId]\n    : undefined;\n\n  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\n  const [feedType, setFeedType] = useState<FeedTypes>(FeedTypes.DISCOVER);\n  const [showDisplayIdNav, setShowDisplayIdNav] = useState<boolean>(false);\n\n  const feedNavClassName = (navItemType: FeedTypes) =>\n    feedType === navItemType\n      ? \"Feed__navigationItem Feed__navigationItem--active\"\n      : \"Feed__navigationItem\";\n\n  const resetFeed = () => {\n    userId && dispatch(setDisplayId(userId));\n    setShowDisplayIdNav(false);\n    setFeedType(FeedTypes.DISCOVER);\n  };\n\n  useEffect(() => {\n    if (!(userId && displayId && displayId !== userId)) return;\n    setShowDisplayIdNav(true);\n  }, [userId, displayId]);\n\n  useEffect(() => {\n    showDisplayIdNav && setFeedType(FeedTypes.DISPLAY_ID_POSTS);\n  }, [showDisplayIdNav, displayId]);\n\n  return (\n    <div className=\"Feed__block\">\n      <div className=\"Feed__header\">\n        <nav className=\"Feed__navigation\">\n          {showDisplayIdNav && (\n            <>\n              <div className=\"Feed__backArrow\" onClick={() => resetFeed()}>\n                <ArrowLeftOutlined />\n              </div>\n              <div\n                className={feedNavClassName(FeedTypes.DISPLAY_ID_POSTS)}\n                onClick={() => setFeedType(FeedTypes.DISPLAY_ID_POSTS)}\n              >\n                {profile?.name || profile?.handle}'s Posts\n              </div>\n              <div className=\"Feed__navigationSpacer\"></div>\n            </>\n          )}\n          <div\n            className={feedNavClassName(FeedTypes.DISCOVER)}\n            onClick={() => setFeedType(FeedTypes.DISCOVER)}\n          >\n            Discover\n          </div>\n          <div className=\"Feed__navigationSpacer\"></div>\n          <div\n            className={feedNavClassName(FeedTypes.MY_FEED)}\n            onClick={() => setFeedType(FeedTypes.MY_FEED)}\n          >\n            My Feed\n          </div>\n          <div className=\"Feed__navigationSpacer\"></div>\n          <div\n            className={feedNavClassName(FeedTypes.MY_POSTS)}\n            onClick={() => setFeedType(FeedTypes.MY_POSTS)}\n          >\n            My Posts\n          </div>\n        </nav>\n        {userId && (\n          <Button\n            className=\"Feed__newPostButton\"\n            onClick={() => setIsModalOpen(true)}\n          >\n            New Post\n          </Button>\n        )}\n        {isModalOpen && (\n          <NewPost\n            onSuccess={() => setIsModalOpen(false)}\n            onCancel={() => setIsModalOpen(false)}\n          />\n        )}\n      </div>\n      <PostList feedType={feedType} />\n    </div>\n  );\n};\nexport default Feed;\n","import React from \"react\";\nimport UserAvatar from \"./UserAvatar\";\nimport { Profile } from \"../utilities/types\";\nimport { HexString } from \"@dsnp/sdk/dist/types/types/Strings\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport { createProfile } from \"@dsnp/sdk/core/activityContent\";\nimport { AnnouncementType } from \"@dsnp/sdk/core/announcements\";\nimport {\n  RelationshipState,\n  RelationshipStatus,\n} from \"../redux/slices/graphSlice\";\nimport GraphChangeButton from \"./GraphChangeButton\";\n\nenum ListStatus {\n  CLOSED,\n  FOLLOWERS,\n  FOLLOWING,\n}\n\ninterface ConnectionsListProfilesProps {\n  userId: string;\n  listStatus: ListStatus;\n  followedByDisplayUser: Record<string, RelationshipState>;\n  followingDisplayUser: Record<string, RelationshipState>;\n}\n\nconst ConnectionsListProfiles = ({\n  userId,\n  listStatus,\n  followedByDisplayUser,\n  followingDisplayUser,\n}: ConnectionsListProfilesProps): JSX.Element => {\n  const profiles: Record<HexString, Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n\n  const followedByCurrentUser = useAppSelector(\n    (state) => (userId && state.graphs.following[userId]) || {}\n  );\n\n  const profileForId = (userId: string): Profile =>\n    profiles[userId] || {\n      ...createProfile({ name: \"Anonymous\" }),\n      contentHash: \"\",\n      url: \"\",\n      announcementType: AnnouncementType.Profile,\n      fromId: userId,\n      handle: \"unknown\",\n      createdAt: new Date().getTime(),\n    };\n\n  const relations =\n    listStatus === ListStatus.FOLLOWERS\n      ? followingDisplayUser\n      : listStatus === ListStatus.FOLLOWING\n      ? followedByDisplayUser\n      : {};\n\n  const connectionsList = Object.keys(relations)\n    .map(profileForId)\n    .filter(\n      (profile) =>\n        relations[profile.fromId]?.status !== RelationshipStatus.UNFOLLOWING\n    );\n\n  return (\n    <>\n      {connectionsList.map((profile) => (\n        <div className=\"ConnectionsListProfiles__profile\" key={profile.fromId}>\n          <UserAvatar\n            icon={profiles[profile.fromId]?.icon?.[0]?.href}\n            avatarSize=\"small\"\n            profileAddress={profile.fromId}\n          />\n          <div className=\"ConnectionsListProfiles__name\">\n            {profile.name || profile.fromId || \"Anonymous\"}\n          </div>\n          <GraphChangeButton\n            userId={userId}\n            profile={profile}\n            following={followedByCurrentUser}\n          ></GraphChangeButton>\n        </div>\n      ))}\n    </>\n  );\n};\nexport default ConnectionsListProfiles;\n","import { Tabs } from \"antd\";\nimport { isInstalled } from \"../services/wallets/metamask/metamask\";\nimport Login from \"./Login\";\nimport * as wallet from \"../services/wallets/wallet\";\nimport React from \"react\";\n\nconst LoginSetupInstructions = (): JSX.Element => {\n  return (\n    <>\n      <div className=\"ProfileBlock__loginHeaderText\"> Login Quick Start</div>\n      <p>\n        To use the Example Client, you must log in with either MetaMask or\n        Torus. Read the guides below to get started!\n      </p>\n      <Tabs defaultActiveKey=\"1\">\n        <Tabs.TabPane tab=\"MetaMask\" key=\"1\">\n          <div className=\"ProfileBlock__loginTitleText\">\n            MetaMask Log In Guide\n          </div>\n          {isInstalled() ? (\n            <>\n              <p>\n                You already have MetaMask installed! Just click the{\" \"}\n                <code>Log In &#8594; MetaMask</code> button.\n              </p>\n              <Login\n                loginWalletOptions={wallet.WalletType.METAMASK}\n                isPrimary={false}\n              />\n            </>\n          ) : (\n            <>\n              <p>\n                Before we can access the browser we need to install MetaMask to\n                give us a cryptowallet. MetaMask is a browser extension Chrome\n                or Firefox are recommended. Download them from your chosen\n                browsers extension manager. Pin MetaMask to your extension bar.\n              </p>\n              <p>\n                Once{\" \"}\n                <a href=\"https://metamask.io/download.html\" target=\"__blank\">\n                  installed correctly\n                </a>\n                , setup MetaMask by following these steps:\n              </p>\n              <ul>\n                <li>Use an existing account do not create a new one.</li>\n                <li>\n                  For account data use the following seed:{\" \"}\n                  <code>\n                    stove ankle number crucial clay heavy toilet entire bid\n                    betray cluster degree\n                  </code>\n                </li>\n                <li>\n                  Connect to a new Custom RPC.\n                  <ul>\n                    <li>Connect to a new Custom RPC.</li>\n                    <li>\n                      Name: <code>*determined by user</code>\n                    </li>\n                    <li>\n                      New RPC URL: <code>http://localhost:8545</code>\n                    </li>\n                    <li>\n                      ChainID: <code>1337</code>\n                    </li>\n                  </ul>\n                </li>\n                <li>Once setup, select/connect to that Custom RPC.</li>\n              </ul>\n              <Login\n                loginWalletOptions={wallet.WalletType.METAMASK}\n                isPrimary={false}\n              />\n            </>\n          )}\n        </Tabs.TabPane>\n        <Tabs.TabPane tab=\"Torus\" key=\"2\">\n          <div className=\"ProfileBlock__loginTitleText\">Torus Log In Guide</div>\n          <p>\n            There is no setup required for Torus. Just click the{\" \"}\n            <code>Log In &#8594; Torus</code> button.\n          </p>\n          <Login\n            loginWalletOptions={wallet.WalletType.TORUS}\n            isPrimary={false}\n          />\n        </Tabs.TabPane>\n      </Tabs>\n    </>\n  );\n};\n\nexport default LoginSetupInstructions;\n","import React from \"react\";\nimport { Button, Spin } from \"antd\";\nimport { useAppDispatch } from \"../redux/hooks\";\nimport {\n  RelationshipState,\n  RelationshipStatus,\n  updateRelationshipStatus,\n} from \"../redux/slices/graphSlice\";\nimport { followUser, unfollowUser } from \"../services/content\";\nimport { Profile } from \"../utilities/types\";\n\ninterface FollowButtonProps {\n  userId: string;\n  profile: Profile;\n  following: Record<string, RelationshipState>;\n}\n\nconst GraphChangeButton = ({\n  userId,\n  profile,\n  following,\n}: FollowButtonProps): JSX.Element => {\n  const dispatch = useAppDispatch();\n\n  const isFollowing = (profile: Profile): boolean =>\n    [RelationshipStatus.FOLLOWING, RelationshipStatus.UPDATING].includes(\n      following[profile.fromId]?.status\n    );\n\n  const isFollowingUpdating = (profile: Profile): boolean =>\n    following[profile.fromId]?.status === RelationshipStatus.UPDATING;\n\n  const buttonText = (profile: Profile): string =>\n    isFollowingUpdating(profile)\n      ? \"updating\"\n      : isFollowing(profile)\n      ? \"Unfollow\"\n      : \"Follow\";\n\n  const changeGraphState = async (profile: Profile) => {\n    if (isFollowing(profile)) {\n      await unfollowUser(BigInt(userId), BigInt(profile.fromId));\n    } else {\n      await followUser(BigInt(userId), BigInt(profile.fromId));\n    }\n    dispatch(\n      updateRelationshipStatus({\n        follower: userId,\n        followee: profile.fromId,\n        status: RelationshipStatus.UPDATING,\n      })\n    );\n  };\n\n  return (\n    <Button\n      className=\"GraphChangeButton\"\n      name={buttonText(profile)}\n      onClick={() => changeGraphState(profile)}\n      disabled={isFollowingUpdating(profile)}\n    >\n      {buttonText(profile)}\n      {isFollowingUpdating(profile) ? (\n        <Spin></Spin>\n      ) : (\n        <div\n          className={\n            buttonText(profile) === \"Follow\"\n              ? \"GraphChangeButton__followIcon\"\n              : \"GraphChangeButton__unfollowIcon\"\n          }\n        >\n          &#10005;\n        </div>\n      )}\n    </Button>\n  );\n};\nexport default GraphChangeButton;\n","import React, { useState } from \"react\";\nimport { Button } from \"antd\";\nimport ConnectionsListProfiles from \"./ConnectionsListProfiles\";\nimport { useAppSelector } from \"../redux/hooks\";\n\nenum ListStatus {\n  CLOSED,\n  FOLLOWERS,\n  FOLLOWING,\n}\n\nconst ConnectionsList = (): JSX.Element => {\n  const { id: userId, displayId } = useAppSelector((state) => state.user);\n\n  const followedByDisplayUser = useAppSelector(\n    (state) => (displayId && state.graphs.following[displayId]) || {}\n  );\n  const followingDisplayUser = useAppSelector(\n    (state) => (displayId && state.graphs.followers[displayId]) || {}\n  );\n\n  const [selectedListTitle, setSelectedListTitle] = useState<ListStatus>(\n    ListStatus.CLOSED\n  );\n\n  const handleClick = (listTitle: ListStatus) => {\n    if (selectedListTitle === listTitle)\n      setSelectedListTitle(ListStatus.CLOSED);\n    else {\n      setSelectedListTitle(listTitle);\n    }\n  };\n\n  const getClassName = (name: ListStatus) => {\n    return selectedListTitle === name\n      ? \"ConnectionsList__button ConnectionsList__button--active\"\n      : \"ConnectionsList__button\";\n  };\n\n  return (\n    <div className=\"ConnectionsList__block\">\n      <div className=\"ConnectionsList__buttonBlock\">\n        <Button\n          className={getClassName(ListStatus.FOLLOWERS)}\n          onClick={() => handleClick(ListStatus.FOLLOWERS)}\n        >\n          <div className=\"ConnectionsList__buttonCount\">\n            {Object.keys(followingDisplayUser).length}\n          </div>\n          Followers\n        </Button>\n\n        {selectedListTitle === ListStatus.CLOSED && (\n          <div className=\"ConnectionsList__buttonSeparator\"> </div>\n        )}\n        <Button\n          className={getClassName(ListStatus.FOLLOWING)}\n          onClick={() => handleClick(ListStatus.FOLLOWING)}\n        >\n          <div className=\"ConnectionsList__buttonCount\">\n            {Object.keys(followedByDisplayUser).length}\n          </div>\n          Following\n        </Button>\n      </div>\n      {userId && (\n        <ConnectionsListProfiles\n          userId={userId}\n          listStatus={selectedListTitle}\n          followedByDisplayUser={followedByDisplayUser}\n          followingDisplayUser={followingDisplayUser}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ConnectionsList;\n","import UserAvatar from \"./UserAvatar\";\nimport { Button } from \"antd\";\nimport ConnectionsList from \"./ConnectionsList\";\nimport React, { useEffect, useState } from \"react\";\nimport { useAppSelector } from \"../redux/hooks\";\nimport * as types from \"../utilities/types\";\nimport { saveProfile } from \"../services/content\";\nimport { core } from \"@dsnp/sdk\";\nimport GraphChangeButton from \"./GraphChangeButton\";\n\nconst Profile = (): JSX.Element => {\n  const userId: string | undefined = useAppSelector((state) => state.user.id);\n\n  const followedByCurrentuser = useAppSelector(\n    (state) => (userId && state.graphs.following[userId]) || {}\n  );\n\n  const displayId: string | undefined = useAppSelector(\n    (state) => state.user.displayId\n  );\n\n  const profiles: Record<types.HexString, types.Profile> = useAppSelector(\n    (state) => state.profiles?.profiles || {}\n  );\n\n  const profile: types.Profile | undefined = displayId\n    ? profiles[displayId]\n    : undefined;\n\n  const handle = profile?.handle;\n  const [newName, setNewName] = useState<string | undefined>();\n  const [newHandle, setNewHandle] = useState<string | undefined>();\n  const [didEditProfile, setDidEditProfile] = useState<boolean>(false);\n\n  const profileName = profile?.name || \"Anonymous\";\n\n  useEffect(() => {\n    if (\n      (newName && newName !== profileName) ||\n      (newHandle && newHandle !== handle)\n    ) {\n      setDidEditProfile(true);\n      return;\n    }\n    setDidEditProfile(false);\n  }, [newName, newHandle, profileName, handle]);\n  const [isEditing, setIsEditing] = useState<boolean>(false);\n\n  const getClassName = (sectionName: string) => {\n    return isEditing\n      ? `ProfileBlock__${sectionName} ProfileBlock__editing`\n      : `ProfileBlock__${sectionName}`;\n  };\n\n  const saveEditProfile = async () => {\n    setIsEditing(!isEditing);\n    if (userId === undefined || newName === undefined) return;\n    const newProfile = core.activityContent.createProfile({\n      name: newName,\n      icon: profile?.icon,\n    });\n    await saveProfile(BigInt(userId), newProfile);\n  };\n\n  const cancelEditProfile = () => {\n    setIsEditing(!isEditing);\n    setNewName(undefined);\n    setNewHandle(undefined);\n  };\n\n  return (\n    <>\n      <div className=\"ProfileBlock__personalInfoBlock\">\n        <div className=\"ProfileBlock__avatarBlock\">\n          <UserAvatar\n            icon={(profile?.icon || [])[0]?.href}\n            profileAddress={displayId}\n            avatarSize=\"large\"\n          />\n          {userId === displayId &&\n            (isEditing ? (\n              <>\n                <Button\n                  className=\"ProfileBlock__editButton\"\n                  onClick={() => saveEditProfile()}\n                  disabled={!didEditProfile}\n                >\n                  save\n                </Button>\n                <Button\n                  className=\"ProfileBlock__editButton\"\n                  onClick={() => cancelEditProfile()}\n                >\n                  cancel\n                </Button>\n              </>\n            ) : (\n              <Button\n                className=\"ProfileBlock__editButton\"\n                onClick={() => setIsEditing(!isEditing)}\n              >\n                edit\n              </Button>\n            ))}\n          {userId && userId !== displayId && profile && (\n            <GraphChangeButton\n              userId={userId}\n              profile={profile}\n              following={followedByCurrentuser}\n            ></GraphChangeButton>\n          )}\n        </div>\n        <div className=\"ProfileBlock__personalInfo\">\n          <label className=\"ProfileBlock__personalInfoLabel\">NAME</label>\n          <input\n            className={getClassName(\"name\")}\n            value={newName || newName === \"\" ? newName : profileName}\n            onChange={(e) => setNewName(e.target.value)}\n            disabled={!isEditing}\n          />\n          <label className=\"ProfileBlock__personalInfoLabel\">HANDLE</label>\n          <input\n            className=\"ProfileBlock__handle\"\n            value={newHandle || newHandle === \"\" ? newHandle : handle}\n            onChange={(e) => setNewHandle(e.target.value)}\n            disabled={true}\n          />\n          <label className=\"ProfileBlock__personalInfoLabel\">\n            SOCIAL ADDRESS\n          </label>\n          <input\n            className=\"ProfileBlock__dsnpUserId\"\n            value={displayId || \"Anonymous\"}\n            disabled={true}\n          />\n        </div>\n      </div>\n      <ConnectionsList />\n    </>\n  );\n};\n\nexport default Profile;\n","import React from \"react\";\nimport LoginSetupInstructions from \"./LoginSetupInstructions\";\nimport Profile from \"./Profile\";\nimport { useAppSelector } from \"../redux/hooks\";\n\nconst ProfileBlock = (): JSX.Element => {\n  const userId: string | undefined = useAppSelector((state) => state.user.id);\n\n  const displayId: string | undefined = useAppSelector(\n    (state) => state.user.displayId\n  );\n\n  const displayProfileBlockElement = () => {\n    if (userId) {\n      return <Profile />;\n    }\n    return displayId ? <Profile /> : <LoginSetupInstructions />;\n  };\n\n  return (\n    <div className=\"ProfileBlock__block\">{displayProfileBlockElement()}</div>\n  );\n};\nexport default ProfileBlock;\n","import React, { useEffect } from \"react\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport \"./App.scss\";\nimport \"antd/dist/antd.less\";\nimport Header from \"./components/Header\";\nimport Feed from \"./components/Feed\";\nimport ProfileBlock from \"./components/ProfileBlock\";\nimport * as wallet from \"./services/wallets/wallet\";\nimport { useAppDispatch, useAppSelector } from \"./redux/hooks\";\nimport { setupProvider } from \"./services/dsnp\";\nimport { startSubscriptions } from \"./services/content\";\nimport { userUpdateWalletType } from \"./redux/slices/userSlice\";\nimport { upsertSessionWalletType } from \"./services/session\";\n\nconst App = (): JSX.Element => {\n  const dispatch = useAppDispatch();\n\n  const walletType = useAppSelector((state) => state.user.walletType);\n  useEffect(() => {\n    if (!walletType) return;\n    if (walletType === wallet.WalletType.NONE) return;\n    let unsubscribeFunctions: Record<string, any>;\n\n    (async () => {\n      try {\n        await wallet.wallet(walletType).reload();\n        setupProvider(walletType);\n        unsubscribeFunctions = await dispatch(startSubscriptions);\n      } catch (e) {\n        if (e.message.match(/login cancelled/i)) {\n          dispatch(userUpdateWalletType(wallet.WalletType.NONE));\n          upsertSessionWalletType(wallet.WalletType.NONE);\n        } else {\n          console.error(e);\n        }\n      }\n    })();\n\n    return () => {\n      if (!unsubscribeFunctions) return;\n\n      Object.values(unsubscribeFunctions).forEach((unsubscribe: any) =>\n        unsubscribe()\n      );\n    };\n  });\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Header />\n        <main className=\"App__content\">\n          <Feed />\n          <ProfileBlock />\n        </main>\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport userSlice from \"./slices/userSlice\";\nimport profileSlice from \"./slices/profileSlice\";\nimport graphSlice from \"./slices/graphSlice\";\nimport feedSlice from \"./slices/feedSlice\";\n\nconst store = configureStore({\n  reducer: {\n    user: userSlice,\n    profiles: profileSlice,\n    graphs: graphSlice,\n    feed: feedSlice,\n  },\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}