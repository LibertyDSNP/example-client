(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1010:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(61),c=n.n(o),i=n(1),l=n.n(i),s=n(28),u=n(477),d=(n(487),n(47)),m=n.n(d),f=n(471),p=n.n(f),v=n(29),b=n(1025),A=n(190),g=function(){return Object(A.b)()},h=A.c,E=n(22),O=n(103),w=n(136),k=n.n(w),y=window.ethereum;y&&(y.autoRefreshOnNetworkChange=!1);var N,j=y,_=new k.a(j),I=function(){return Boolean(null===j||void 0===j?void 0:j.isMetaMask)},x=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===j||void 0===j?void 0:j.request({method:"eth_requestAccounts"});case 2:if(t=e.sent){e.next=5;break}throw new Error("Metamask not installed");case 5:return e.abrupt("return",t.result?t.result[0]:t[0]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C={icon:"https://cdn.iconscout.com/icon/free/png-512/metamask-2728406-2261817.png",login:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I()){e.next=2;break}throw new Error("Metamask not installed");case 2:return e.abrupt("return",x());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){},reload:function(){},getAddress:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getWeb3:function(){return function(){if(!I())throw new Error("Metamask not installed");return _}()}},B=n(464),P=n.n(B),S={},L={theme:{isDark:!1,colors:{torusBrand1:"#000000",torusGray2:"#FBF7F3"}},logoDark:"https://avatars.githubusercontent.com/u/78103996?s=200&v=4",logoLight:"https://avatars.githubusercontent.com/u/78103996?s=200&v=4"},R={web3:new k.a,torus:null,initialized:!1,setweb3:function(e){var t=new k.a(e);R.web3=t,this.web3.setProvider(e)},initialize:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new P.a(S),e.next=3,n.init({buildEnv:"testing",network:{host:"https://qa-chain.liberti.social",chainId:Number("1884")||1337,networkName:"QAchain"},showTorusButton:!0,whiteLabel:L});case 3:return this.initialized=!0,e.prev=4,e.next=7,n.login({verifier:void 0});case 7:R.setweb3(n.provider),R.torus=n,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(4),n.clearInit(),this.initialized=!1,new Error("Login Cancelled");case 16:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},U=R,T=["google","reddit","discord"],F=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.initialize(t||"production");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){return U.initialized},Q=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=U.torus)||void 0===t?void 0:t.getUserInfo("This site is requesting your information");case 2:if(n=e.sent){e.next=5;break}throw new Error("Unable to find user's info");case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(a=U.torus)||void 0===a?void 0:a.getPublicAddress({verifier:t,verifierId:n,isExtended:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:return t=e.sent,n=t.verifier,a=t.verifierId,r=D(n),e.next=8,V(r,a);case 8:if(o=e.sent){e.next=11;break}throw new Error("No Wallet Address found for User");case 11:if("string"!==typeof o){e.next=13;break}return e.abrupt("return",o);case 13:return e.abrupt("return",o.address);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t=T.find((function(t){return e.includes(t)}));if(!t)throw new Error("Unknown Verifier");return t},W={icon:"data:image/jpeg;base64,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",login:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return e.next=4,q();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){M()&&function(){var e;null===(e=U.torus)||void 0===e||e.cleanUp().then((function(){sessionStorage.setItem("pageUsingTorus","false")}))}()},reload:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,F();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAddress:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getWeb3:function(){return U.web3}};!function(e){e.NONE="NONE",e.TORUS="TORUS",e.METAMASK="METAMASK"}(N||(N={}));var K,H,z,G,Y=function(e){switch(e){case N.NONE:return J;case N.TORUS:return W;case N.METAMASK:return C}},J={icon:"https://icons.veryicon.com/png/o/business/business-style-icon/wallet-62.png",login:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,"";case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){},reload:function(){},getAddress:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,"";case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getWeb3:function(){return new k.a}},X=function(e){return sessionStorage.setItem("session",JSON.stringify(e)),e},Z=function(){try{var e=sessionStorage.getItem("session");return e?JSON.parse(e):null}catch(t){return null}},$={id:sessionStorage.getItem("session")?null===(K=Z())||void 0===K?void 0:K.id:void 0,walletType:null!==(H=null===(z=Z())||void 0===z?void 0:z.walletType)&&void 0!==H?H:N.NONE},ee=Object(O.b)({name:"user",initialState:$,reducers:{userLogin:function(e,t){return Object(E.a)(Object(E.a)({},e),t.payload)},userLogout:function(e){return{walletType:N.NONE}},userUpdateId:function(e,t){return Object(E.a)(Object(E.a)({},e),{},{id:t.payload})},userUpdateWalletType:function(e,t){return Object(E.a)(Object(E.a)({},e),{},{walletType:t.payload})}}}),te=ee.actions,ne=(te.userLogin,te.userLogout),ae=te.userUpdateId,re=te.userUpdateWalletType,oe=ee.reducer,ce=(n(465),n(56)),ie=n(118),le=n(74),se=n(76),ue={feedItems:[],isPostLoading:{loading:!1,currentUserId:void 0},isReplyLoading:{loading:!1,parent:void 0}},de=function(e,t){return e.loading&&e.currentUserId===t.fromId?{loading:!1,currentUserId:void 0}:e},me=function(e,t){return e.loading&&e.parent===t.inReplyTo?{loading:!1,parent:void 0}:e},fe=Object(O.b)({name:"feed",initialState:ue,reducers:{addFeedItem:function(e,t){var n=t.payload;return Object(E.a)(Object(E.a)({},e),{},{feedItems:[].concat(Object(se.a)(e.feedItems),[n]),isPostLoading:de(e.isPostLoading,n),isReplyLoading:me(e.isReplyLoading,n)})},clearFeedItems:function(e){return Object(E.a)(Object(E.a)({},e),{},{feedItems:[]})},postLoading:function(e,t){return Object(E.a)(Object(E.a)({},e),{},{isPostLoading:{loading:t.payload.loading,currentUserId:t.payload.currentUserId}})},replyLoading:function(e,t){return Object(E.a)(Object(E.a)({},e),{},{isReplyLoading:{loading:t.payload.loading,parent:t.payload.parent}})}}}),pe=fe.actions,ve=pe.addFeedItem,be=pe.clearFeedItems,Ae=pe.postLoading,ge=pe.replyLoading,he=fe.reducer,Ee=n(191),Oe=n(192),we=n(57),ke=Object(O.b)({name:"profiles",initialState:{profiles:{}},reducers:{upsertProfile:function(e,t){var n,a,r=t.payload.fromId,o=e.profiles[r],c=o?Object(E.a)(Object(E.a)({},o),t.payload):t.payload;return{profiles:Object(E.a)(Object(E.a)({},e.profiles),{},Object(we.a)({},r,(n=o,a=c,n&&void 0!==n.blockNumber?a&&void 0!==a.blockNumber?a.blockNumber!==n.blockNumber?a.blockNumber>n.blockNumber?a:n:a.blockIndex!==n.blockIndex?a.blockIndex>n.blockIndex?a:n:a.batchIndex>n.batchIndex?a:n:n:a)))}},removeProfile:function(e,t){var n=e.profiles,a=t.payload;n[a];return{profiles:Object(Ee.a)(n,[a].map(Oe.a))}}}}),ye=ke.actions,Ne=ye.upsertProfile,je=(ye.removeProfile,ke.reducer),_e=n(6),Ie=n(7),xe=function(e){return"function"==typeof e},Ce=function(e){return"object"==typeof e&&e.constructor===Uint8Array},Be=n(182),Pe=n.n(Be),Se=n(52),Le=function(e){var t=Pe.a.extname(e).replace(".",""),n=new URL(e).host,a=[Object(Se.createHash)(e)];if(/(youtu\.be|youtube\.com|vimeo\.com|soundcloud.com)$/.test(n)){var r=Object(Se.createVideoLink)(e,"text/html",a);return Object(Se.createVideoAttachment)([r])}switch(t){case"mp4":return Object(Se.createVideoAttachment)([Object(Se.createVideoLink)(e,"video/mp4",a)]);case"wmv":return Object(Se.createVideoAttachment)([Object(Se.createVideoLink)(e,"video/x-ms-wmv",a)]);case"mov":return Object(Se.createVideoAttachment)([Object(Se.createVideoLink)(e,"video/quicktime",a)]);case"webm":return Object(Se.createVideoAttachment)([Object(Se.createVideoLink)(e,"video/webm",a)]);case"mp3":return Object(Se.createAudioAttachment)([Object(Se.createAudioLink)(e,"audio/mpeg",a)]);case"ogg":return Object(Se.createAudioAttachment)([Object(Se.createAudioLink)(e,"audio/ogg",a)]);default:return Object(Se.createImageAttachment)([Object(Se.createImageLink)(e,"image/".concat(t),a)])}},Re=function(e,t){var n={"@context":"https://www.w3.org/ns/activitystreams",type:"Note",mediaType:"text/plain",content:e,published:(new Date).toISOString()};return t&&(n.attachment=t.map(Le)),n},Ue=function(){var e=Object(s.a)(l.a.mark((function e(t,n,a){var r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Re(t,n),o={fromId:a,content:r},e.abrupt("return",o);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Te=function(){function e(){Object(_e.a)(this,e)}return Object(Ie.a)(e,[{key:"put",value:function(e,t){return Promise.resolve(new URL("".concat("http://localhost:8080","/").concat(e)))}},{key:"putStream",value:function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Fe(t),e.next=3,n(a);case 3:return e.abrupt("return",new URL("".concat("http://localhost:8080","/").concat(t)));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Fe=function(){function e(t){Object(_e.a)(this,e),Object(we.a)(this,"chunks",[]),Object(we.a)(this,"targetPath",void 0),this.targetPath=t}return Object(Ie.a)(e,[{key:"write",value:function(e,t,n){var a="string"==typeof t?n:t;return this.chunks.push(e),a&&a(null),!0}},{key:"end",value:function(){var e;Ce(arguments.length<=0?void 0:arguments[0])&&this.chunks.push(arguments.length<=0?void 0:arguments[0]),e=xe(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:xe(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2];for(var t=this.chunks.reduce((function(e,t){return e+t.length}),0),n=new ArrayBuffer(t),a=new Uint8Array(n),r=0,o=0;r<this.chunks.length;r++)a.set(this.chunks[r],o),o+=this.chunks[r].length;fetch("".concat("http://localhost:8080","/upload?filename=").concat(encodeURIComponent(this.targetPath)),{method:"POST",mode:"cors",body:n}).then((function(t){if(201!==t.status)throw Error("failed to post stream: ".concat(t.status," ").concat(t.statusText));e&&e()}))}}]),e}(),Me=n(124),Qe=Object(O.b)({name:"graphs",initialState:{following:{},followers:{}},reducers:{upsertGraph:function(e,t){var n=t.payload,a=n.follower,r=n.followee;if(t.payload.unfollow){var o=e.following[a]||{},c=(o[r],Object(Ee.a)(o,[r].map(Oe.a))),i=e.followers[r]||{},l=(i[a],Object(Ee.a)(i,[a].map(Oe.a)));return{following:Object(E.a)(Object(E.a)({},e.following),{},Object(we.a)({},a,c)),followers:Object(E.a)(Object(E.a)({},e.followers),{},Object(we.a)({},r,l))}}return{following:Object(E.a)(Object(E.a)({},e.following),{},Object(we.a)({},a,Object(E.a)(Object(E.a)({},e.following[a]||{}),{},Object(we.a)({},r,!0)))),followers:Object(E.a)(Object(E.a)({},e.followers),{},Object(we.a)({},r,Object(E.a)(Object(E.a)({},e.followers[r]||{}),{},Object(we.a)({},a,!0))))}}}}),Ve=Qe.actions.upsertGraph,qe=Qe.reducer,De=ce.a.contracts.registry.getRegistrationsByWalletAddress,We=ce.b,Ke=function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.batch.createFile(t+".parquet",[n]);case 2:return a=e.sent,r=Xe(a,ce.a.announcements.AnnouncementType.Broadcast),e.next=6,ce.a.contracts.publisher.publish([r]);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),He=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.content){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,rt(t.content);case 4:return n=e.sent,e.next=7,ot(n,t);case 7:return a=e.sent,e.next=10,Ke(n,a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.content&&n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,rt(t.content);case 4:return a=e.sent,e.next=7,ct(a,t.fromId,n);case 7:return r=e.sent,e.next=10,Ke(a,r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(n);case 2:return a=e.sent,e.next=5,it(t,a);case 5:return r=e.sent,e.next=8,Ke(a,r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(be()),a=0,e.next=4,ce.a.contracts.subscription.subscribeToBatchPublications((function(e){e.blockNumber!==n?(n=e.blockNumber,a=0):a++,at(t,e,a)}),{fromBlock:1});case 4:return r=e.sent,e.next=7,ce.a.contracts.subscription.subscribeToRegistryUpdates(tt(t),{fromBlock:1});case 7:return o=e.sent,e.abrupt("return",{unsubscribeToRegistryUpdate:o,unsubscribeToBatchPublications:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(e){var t;if(e===N.TORUS)t=W.getWeb3().currentProvider;else{if(e!==N.METAMASK)throw new Error("Unknown walletType attempting to setup provider: ".concat(e));if(!(t=window.ethereum))throw new Error("Could not create provider, because ethereum has not been set")}var n=new ie.providers.Web3Provider(t);Object(ce.c)({provider:n,signer:n.getSigner(),store:new Te})},Xe=function(e,t){return{announcementType:t,fileUrl:e.url.toString(),fileHash:e.hash}},Ze=function(e,t,n,a,r,o){return Object(Se.isActivityContentNoteType)(n)?$e(e,t,n,a):Object(Se.isActivityContentProfileType)(n)?et(e,t,n,a,r,o):void 0},$e=function(e,t,n,a){var r=new TextDecoder;e(ve({fromId:r.decode(t.fromId),blockNumber:a,hash:r.decode(t.contentHash),published:n.published,uri:r.decode(t.url),content:n,inReplyTo:t.announcementType===ce.a.announcements.AnnouncementType.Reply?r.decode(t.inReplyTo):void 0}))},et=function(e,t,n,a,r,o){var c=new TextDecoder;e(Ne(Object(E.a)(Object(E.a)({},n),{},{fromId:c.decode(t.fromId),blockNumber:a,blockIndex:r,batchIndex:o})))},tt=function(e){return function(t){e(Ne(Object(E.a)(Object(E.a)({},Object(Se.createProfile)()),{},{fromId:ce.a.identifiers.convertDSNPUserURIToDSNPUserId(t.dsnpUserURI),handle:t.handle})))}},nt=function(){var e=Object(s.a)(l.a.mark((function e(t,n,a,r,o){var c,i,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new TextDecoder,e.prev=1,i=c.decode(n.url),e.next=5,fetch(i);case 5:return s=e.sent,e.next=8,s.json();case 8:u=e.sent,Ze(t,n,u,a,r,o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),at=function(e,t,n){var a=0;ce.a.batch.openURL(t.fileUrl.toString()).then((function(r){return ce.a.batch.readFile(r,(function(r){var o=r;o.announcementType===Me.AnnouncementType.GraphChange?function(e,t){var n=new TextDecoder;e(Ve({follower:n.decode(t.fromId),followee:n.decode(t.objectId),unfollow:t.changeType===Me.DSNPGraphChangeType.Unfollow}))}(e,o):function(e){var t=e.announcementType;return t===Me.AnnouncementType.Profile||t===Me.AnnouncementType.Broadcast||t===Me.AnnouncementType.Reply}(o)&&nt(e,o,t.blockNumber,n,a++)}))})).catch((function(e){return console.log(e)}))},rt=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(le.keccak256)(ce.a.activityContent.serialize(t)),e.next=3,fetch("".concat("http://localhost:8080","/upload?filename=").concat(encodeURIComponent(n+".json")),{method:"POST",mode:"cors",body:JSON.stringify(t)});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(){var e=Object(s.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(E.a)(Object(E.a)({},ce.a.announcements.createBroadcast(n.fromId,"".concat("http://localhost:8080","/").concat(t,".json"),t)),{},{signature:"0x00000000"}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ct=function(){var e=Object(s.a)(l.a.mark((function e(t,n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(E.a)(Object(E.a)({},ce.a.announcements.createReply(n,"".concat("http://localhost:8080","/").concat(t,".json"),t,a)),{},{signature:"0x00000000"}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),it=function(){var e=Object(s.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(E.a)(Object(E.a)({},ce.a.announcements.createProfile(t,"".concat("http://localhost:8080","/").concat(n,".json"),n)),{},{signature:"0x00000000"}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),lt=n(183),st=n.n(lt),ut=n(138),dt=n.n(ut),mt=function(e){var t=e.popoverVisible,n=e.setPopoverVisible,a=e.loginWalletOptions,o=e.loading,c=e.loginWithWalletType,i=g(),l=function(e){i(re(e)),function(e){var t=Z()||{id:void 0,walletType:N.NONE};X(Object(E.a)(Object(E.a)({},t),{},{walletType:e}))}(e),c(e)},s=r.a.createElement(st.a,{placement:"bottomRight",trigger:"click",visible:t,onVisibleChange:function(e){n(e)},content:r.a.createElement("div",{className:"LoginButton__loginOptions"},r.a.createElement(m.a,{className:"LoginButton__loginTorus",onClick:function(){return l(N.TORUS)}},"Torus"),r.a.createElement(m.a,{className:"LoginButton__loginMetamask",onClick:function(){return l(N.METAMASK)}},"MetaMask"))},r.a.createElement(m.a,{className:"LoginButton__loginButton","aria-label":"Login"},"Log In",o&&r.a.createElement(dt.a,{className:"LoginButton__spinner",size:"small"}))),u=r.a.createElement(m.a,{className:"LoginButton__loginButton LoginButton__loginButton--quickStart","aria-label":"Login",onClick:function(){return c(a)}},"Log In With ",a,o&&r.a.createElement(dt.a,{className:"LoginButton__spinner",size:"small"}));return r.a.createElement(r.a.Fragment,null,a===N.NONE?s:u)},ft=n(305),pt=n.n(ft),vt=n(122),bt=n.n(vt),At=n(184),gt=n.n(At),ht=n(470),Et=n.n(ht),Ot=n(469),wt=new Map([["small",32],["medium",50],["large",100]]),kt=function(e){var t=e.icon,n=e.profileAddress,a=e.avatarSize,o=t||n&&Ot.create({seed:n}).toDataURL();return r.a.createElement(Et.a,{className:"UserAvatar",alt:n||"anonymous",src:o,size:wt.get(a)})},yt=function(e){var t=e.children,n=e.visible,a=e.registrations,o=e.walletAddress,c=e.onIdResolved,i=r.a.useState(!1),u=Object(v.a)(i,2),d=u[0],f=u[1],p=r.a.useState(!0),b=Object(v.a)(p,2),A=b[0],g=b[1],E=r.a.useState(void 0),O=Object(v.a)(E,2),w=O[0],k=O[1],y=r.a.useState(void 0),N=Object(v.a)(y,2),j=N[0],_=N[1],I=h((function(e){var t;return(null===(t=e.profiles)||void 0===t?void 0:t.profiles)||{}}));a.length&&!d&&(f(!0),g(!1));var x=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We(o,t.handle);case 3:n=e.sent,c(ce.a.identifiers.convertDSNPUserURIToDSNPUserId(n)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),k("Error registering: ".concat(e.t0.message||e.t0.toString()));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t,n;return null===(t=I[ce.a.identifiers.convertDSNPUserURIToDSNPUserId(e.dsnpUserURI)])||void 0===t||null===(n=t.icon)||void 0===n?void 0:n[0].href},B=r.a.createElement(pt.a,{name:"createHandle",className:"RegistrationModal__createHandle",initialValues:{remember:!0},onFinish:x},w&&r.a.createElement(gt.a,{message:w,type:"error"}),r.a.createElement("p",null,"Please create a handle:"),r.a.createElement(pt.a.Item,{name:"handle",className:"RegistrationModal__handleInput",rules:[{required:!0,message:"Handle cannot be blank"}]},r.a.createElement(bt.a,null)),r.a.createElement("div",{className:"RegistrationModal__footer"},d&&r.a.createElement("button",{onClick:function(e){e.preventDefault(),g(!1)},className:"RegisrationModal__changeMode"},"Select Existing Handle"),r.a.createElement(m.a,{type:"primary",htmlType:"submit",className:"RegistrationModal__footerBtn"},"Choose handle"))),P=r.a.createElement("div",null,r.a.createElement("p",null,"You have multiple handles associated with your account."),r.a.createElement("h3",null,"Select an account:"),r.a.createElement("div",{className:"RegistrationModal__registrations"},a.map((function(e){return r.a.createElement("button",{className:"RegistrationModal__registration".concat(e===j?" RegistrationModal__registration--selected":""),onClick:function(){return _(e)},key:e.dsnpUserURI},r.a.createElement(kt,{icon:C(e),profileAddress:e.dsnpUserURI,avatarSize:"small"}),"@".concat(e.handle))}))),r.a.createElement("div",{className:"RegistrationModal__footer"},r.a.createElement("button",{onClick:function(){return g(!0)},className:"RegisrationModal__changeMode"},"Create New Handle"),r.a.createElement(m.a,{className:"RegistrationModal__footerBtn",key:"post",type:"primary",disabled:!j,onClick:function(){j&&c(j.dsnpUserURI)}},"Select Handle")));return r.a.createElement(st.a,{placement:"bottomRight",visible:n,content:r.a.createElement("div",{className:"RegistrationModal"},r.a.createElement("h2",null,"Welcome!"),A?B:P)},t)},Nt=function(e){var t=e.loginWalletOptions,n=r.a.useState(!1),a=Object(v.a)(n,2),o=a[0],c=a[1],i=r.a.useState(!1),u=Object(v.a)(i,2),d=u[0],f=u[1],A=r.a.useState(!1),O=Object(v.a)(A,2),w=O[0],k=O[1],y=r.a.useState(""),j=Object(v.a)(y,2),_=j[0],I=j[1],x=r.a.useState([]),C=Object(v.a)(x,2),B=C[0],P=C[1],S=g(),L=h((function(e){return e.user.id})),R=h((function(e){return e.user.walletType})),U=function(e){var t=ce.a.identifiers.convertDSNPUserURIToDSNPUserId(e);S(ae(t)),function(e){var t=Z()||{id:void 0,walletType:N.NONE};X(Object(E.a)(Object(E.a)({},t),{},{id:e}))}(t),k(!1)},T=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return c(!0),e.prev=3,e.next=6,Y(t).login();case 6:return n=e.sent,I(n),Je(t),e.next=11,De(n);case 11:1===(a=e.sent).length?U(a[0].dsnpUserURI):(P(a),k(!0)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),F();case 18:return e.prev=18,f(!1),c(!1),e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,22]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){sessionStorage.removeItem("session"),k(!1),I(""),R!==N.NONE&&Y(R).logout(),S(ne())};return r.a.createElement("div",{className:"Login__block"},L?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{count:r.a.createElement(b.a,{style:{color:"#52C41A"}}),offset:[-48,8]},r.a.createElement("img",{className:"Login__walletIcon",src:Y(R).icon,alt:"Wallet Symbol"})),r.a.createElement(m.a,{className:"Login__logOutButton","aria-label":"Logout",onClick:F},"Log Out")):r.a.createElement(yt,{visible:w,registrations:B,onIdResolved:U,walletAddress:_},r.a.createElement(mt,{popoverVisible:d,setPopoverVisible:f,loginWalletOptions:t,loading:o,loginWithWalletType:T})))},jt=function(){return r.a.createElement("div",{className:"Header__block"},r.a.createElement("h1",{className:"Header__title"},"Example Client"),r.a.createElement(Nt,{loginWalletOptions:N.NONE}))},_t=n(472),It=n.n(_t),xt=n(301),Ct=n.n(xt),Bt=n(1026),Pt=n.p+"static/media/Camera.a7abe56b.svg",St=function(e){var t=e.onNewPostImageUpload,n=r.a.useState(!1),a=Object(v.a)(n,2),o=a[0],c=a[1],i=r.a.useState(null),l=Object(v.a)(i,2),s=l[0],u=l[1],d=r.a.useState(""),f=Object(v.a)(d,2),p=f[0],b=f[1],A=r.a.useState([]),g=Object(v.a)(A,2),h=g[0],E=g[1],O=p&&p.match(/.+\..+\//);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"NewPostImageUpload__cover"},h&&h.map((function(e,n){return r.a.createElement("div",{className:"NewPostImageUpload__imageBlock",key:n},r.a.createElement("img",{alt:"",className:"NewPostImageUpload__image",src:e,onLoad:function(){return c(!1)}}),r.a.createElement(Bt.a,{className:"NewPostImageUpload__imageDelete",onClick:function(){return function(e){var n=Object(se.a)(h);n.splice(e,1),E(n),t(n)}(n)},twoToneColor:"#9e9e9e"}))})),p&&r.a.createElement(dt.a,{className:"NewPostImageUpload__spinner",spinning:o})),r.a.createElement("div",{className:"NewPostImageUpload__urlInputBlock"},r.a.createElement("img",{className:"NewPostImageUpload__icon",src:Pt,alt:"camera"}),r.a.createElement(bt.a,{className:"NewPostImageUpload__urlInput",placeholder:"Image URL",value:p||"",onChange:function(e){var t;c(!0),t=e.target.value,b(t),u(null)}}),r.a.createElement(m.a,{className:"NewPostImageUpload__urlInputBtn",onClick:function(){if(O){var e=[].concat(Object(se.a)(h),[p]);E(e),t(e),b("")}else u("Invalid URL.")}},"Add")),s&&r.a.createElement(gt.a,{className:"NewPostImageUpload__alert",type:"error",message:s}))},Lt=function(e){var t=e.profile,n=t.handle&&"@"+t.handle,a=t.name||n||t.fromId,o=t.name?n:void 0;return r.a.createElement("span",null,a,o&&r.a.createElement("span",{className:"FromLine__secondary"},o))},Rt=function(e){var t,n,a=e.onSuccess,o=e.onCancel,c=g(),i=r.a.useState(!1),u=Object(v.a)(i,2),d=u[0],f=u[1],p=r.a.useState([]),b=Object(v.a)(p,2),A=b[0],O=b[1],w=r.a.useState(""),k=Object(v.a)(w,2),y=k[0],N=k[1],j=r.a.useState(!1),_=Object(v.a)(j,2),I=_[0],x=_[1],C=h((function(e){return e.user.id})),B=h((function(e){var t;return(null===(t=e.profiles)||void 0===t?void 0:t.profiles)||{}})),P=C&&B[C]||Object(E.a)(Object(E.a)({},Object(Se.createProfile)()),{},{fromId:C||""}),S=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ue(y,A,C);case 4:return t=e.sent,e.next=7,He(t);case 7:c(Ae({loading:!0,currentUserId:C})),f(!1),a();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(It.a,{className:"NewPost",visible:!0,onCancel:o,width:"535px",centered:!0,title:"Create a post",footer:[r.a.createElement(dt.a,{spinning:d,key:1},r.a.createElement(Ct.a,null,r.a.createElement(m.a,{className:"NewPost__footerBtn",key:"post",type:"primary",disabled:!I||d,onClick:S},"Post")))]},r.a.createElement("div",{className:"NewPost__profileBlock"},r.a.createElement(kt,{icon:null===P||void 0===P||null===(t=P.icon)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.href,profileAddress:C,avatarSize:"small"}),r.a.createElement("h3",{className:"NewPost__profileBlockName"},r.a.createElement(Lt,{profile:P}))),r.a.createElement(bt.a.TextArea,{className:"NewPost__textArea",placeholder:"Message",value:y||"",onChange:function(e){return function(e){d||(""!==e.target.value?x(!0):x(!1),N(e.target.value))}(e)},rows:6}),r.a.createElement(St,{onNewPostImageUpload:O}))},Ut=n(163),Tt=n.n(Ut),Ft=n(474),Mt=n.n(Ft),Qt=n(473),Vt=n.n(Qt),qt=n(1027),Dt=n(1028),Wt=function(e){var t=e.attachment;return r.a.createElement(Mt.a,{nextArrow:r.a.createElement(qt.a,null),prevArrow:r.a.createElement(Dt.a,null),dots:!0},t.map((function(e,t){var n=e.type.toLowerCase();return r.a.createElement("div",{key:t,className:"PostMedia__cover"},"image"===n&&r.a.createElement("a",{href:e.url[0].href,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{alt:e.name,className:"PostMedia__img",src:e.url[0].href})),("video"===n||"audio"===n)&&r.a.createElement(Vt.a,{controls:!0,playsinline:!0,className:"PostMedia__img",url:e.url[0].href,width:670,height:"video"===n?400:55,muted:!0}))})))},Kt=function(e){var t=e.published,n=e.postStyle;return r.a.createElement("p",{className:"RelativeTime ".concat(n?"RelativeTime--post":"")},function(e){var t,n=new Date(e),a=((new Date).getTime()-n.getTime())/1e3;return a<60?Math.floor(a)+"s \u2022":a<3600?Math.floor(a/60)+"m \u2022":a<=86400?Math.floor(a/3600)+"h \u2022":a>86400?"".concat((t=n.getMonth(),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][--t])," ").concat(n.getDate(),", ").concat(n.getFullYear()," \u2022"):void 0}(t))},Ht=n(475),zt=n.n(Ht),Gt=n(306),Yt=n.n(Gt),Jt=n(1029),Xt=n(1030),Zt=function(e){var t=e.hash,n=e.isReply,o=Object(a.useState)(!1),c=Object(v.a)(o,2),i=c[0],l=c[1],s=Object(a.useState)(!1),u=Object(v.a)(s,2),d=u[0],m=u[1],f=r.a.createElement(Yt.a,{onClick:function(){return m(!0)}},r.a.createElement(Yt.a.Item,{key:"valid",onClick:function(){l(!0),setTimeout((function(){l(!1)}),2e3)}},i?r.a.createElement("div",null,r.a.createElement(Jt.a,null)," Copied!"):r.a.createElement("div",{className:"PostHashDropdown__menuHash",onClick:function(){return navigator.clipboard.writeText(t)}},"Hash: ",t)));return r.a.createElement(zt.a,{className:n?"PostHashDropdown__replyBlock":"PostHashDropdown__block",overlay:f,visible:d,onVisibleChange:function(e){return m(e)},placement:"bottomRight"},r.a.createElement("button",{className:"PostHashDropdown__button",onClick:function(e){return e.preventDefault()}},r.a.createElement(Xt.a,null)))},$t=function(e){var t,n,o=e.reply,c=h((function(e){return e.profiles.profiles})),i=Object(a.useState)(void 0),l=Object(v.a)(i,2),s=l[0],u=l[1];return Object(a.useEffect)((function(){u(c[o.fromId])}),[c,o]),r.a.createElement("div",{className:"Reply__block"},r.a.createElement(Zt,{hash:o.hash,isReply:!0}),r.a.createElement(kt,{icon:null===s||void 0===s||null===(t=s.icon)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.href,profileAddress:o.fromId,avatarSize:"small"}),r.a.createElement("div",{className:"Reply__message"},r.a.createElement("div",{className:"Reply__name"},(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.fromId)),o.content.content))},en=function(e){var t=e.parent,n=g(),o=h((function(e){return e.user.id})),c=r.a.useState(!1),i=Object(v.a)(c,2),u=i[0],d=i[1],m=Object(a.useState)(""),f=Object(v.a)(m,2),p=f[0],b=f[1],A=function(){var e=Object(s.a)(l.a.mark((function e(a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),o){e.next=3;break}return e.abrupt("return");case 3:return d(!0),e.next=6,Ue(p,[],o);case 6:return r=e.sent,e.next=9,ze(r,t);case 9:n(ge({loading:!0,parent:t})),b(""),d(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"ReplyInput__newReplyBlock"},r.a.createElement(bt.a.TextArea,{className:"ReplyInput__input",placeholder:"Reply...",value:p,onChange:function(e){u||b(e.target.value)},autoSize:!0,onPressEnter:function(e){return A(e)}}))},tn=function(){return r.a.createElement("div",{className:"BlankReply__block"},r.a.createElement(kt,{icon:void 0,profileAddress:void 0,avatarSize:"small"}),r.a.createElement("div",{className:"BlankReply__messageBlock"},r.a.createElement("div",{className:"BlankReply__name"}," "),r.a.createElement("div",{className:"BlankReply__message"}," ")))},nn=function(e){var t=e.parent,n=h((function(e){return e.feed.feedItems})).filter((function(e){var n;return"Note"===(null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.type)&&(null===e||void 0===e?void 0:e.inReplyTo)===t})),a=h((function(e){return e.feed.isReplyLoading}));return r.a.createElement(r.a.Fragment,null,(t===(null===a||void 0===a?void 0:a.parent)||n.length>0)&&r.a.createElement("div",{className:"ReplyBlock__repliesList"},n.length>0&&r.a.createElement(r.a.Fragment,null,n.map((function(e,t){return r.a.createElement($t,{reply:e,key:t})}))),t===(null===a||void 0===a?void 0:a.parent)&&r.a.createElement(tn,null)),r.a.createElement(en,{parent:t}))},an=function(e){var t,n,a=e.feedItem,o=a.content,c=o.attachment,i=h((function(e){var t;return(null===(t=e.profiles)||void 0===t?void 0:t.profiles)||{}}))[a.fromId]||{fromId:a.fromId};return r.a.createElement(Tt.a,{key:a.hash,className:"Post__block",bordered:!1},r.a.createElement(Tt.a.Meta,{avatar:r.a.createElement(kt,{icon:null===(t=i.icon)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.href,profileAddress:a.fromId,avatarSize:"medium"}),title:r.a.createElement(Lt,{profile:i}),description:o.published&&r.a.createElement(Kt,{published:o.published,postStyle:!0})}),r.a.createElement(Zt,{hash:a.hash}),r.a.createElement("div",{className:"Post__caption"},o.content),c&&r.a.createElement(Wt,{attachment:c}),r.a.createElement(nn,{parent:a.hash}))},rn=function(){return r.a.createElement(Tt.a,{className:"BlankPost__block",bordered:!1},r.a.createElement(Tt.a.Meta,{avatar:r.a.createElement(kt,{icon:void 0,profileAddress:void 0,avatarSize:"medium"}),title:r.a.createElement("div",{className:"BlankPost__title"}," "),description:r.a.createElement("div",{className:"BlankPost__description"}," ")}),r.a.createElement("div",{className:"BlankPost__contentLine1"}," "),r.a.createElement("div",{className:"BlankPost__contentLine2"}," "),r.a.createElement("div",{className:"BlankPost__contentLine3"}," "))};!function(e){e[e.MY_FEED=0]="MY_FEED",e[e.MY_POSTS=1]="MY_POSTS",e[e.DISCOVER=2]="DISCOVER"}(G||(G={}));var on,cn=function(e){var t=e.feedType,n=h((function(e){return e.user.id})),a=h((function(e){return(n?e.graphs.following[n]:void 0)||{}})),o=h((function(e){return e.feed.feedItems})).filter((function(e){var t;return"Note"===(null===e||void 0===e||null===(t=e.content)||void 0===t?void 0:t.type)&&void 0===(null===e||void 0===e?void 0:e.inReplyTo)})),c=h((function(e){return e.feed.isPostLoading.loading})),i=function(e){return e.sort((function(e,t){return t.blockNumber-e.blockNumber})),e}(o),l=[];return l=t===G.MY_FEED?i.filter((function(e){return(null===e||void 0===e?void 0:e.fromId)===n||(null===e||void 0===e?void 0:e.fromId)in a})):t===G.MY_POSTS?i.filter((function(e){return n===(null===e||void 0===e?void 0:e.fromId)})):i,r.a.createElement("div",{className:"PostList__block"},c&&r.a.createElement(rn,null),l.length>0?r.a.createElement(r.a.Fragment,null,l.map((function(e,t){return r.a.createElement(an,{key:t,feedItem:e})}))):"Empty Feed!")};!function(e){e[e.MY_FEED=0]="MY_FEED",e[e.MY_POSTS=1]="MY_POSTS",e[e.DISCOVER=2]="DISCOVER"}(on||(on={}));var ln,sn=function(){var e=h((function(e){return e.user.id})),t=Object(a.useState)(!1),n=Object(v.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(on.DISCOVER),l=Object(v.a)(i,2),s=l[0],u=l[1],d=function(e){return s===e?"Feed__navigationItem Feed__navigationItem--active":"Feed__navigationItem"};return r.a.createElement("div",{className:"Feed__block"},r.a.createElement("div",{className:"Feed__header"},r.a.createElement("nav",{className:"Feed__navigation"},r.a.createElement("div",{className:d(on.DISCOVER),onClick:function(){return u(on.DISCOVER)}},"Discover"),r.a.createElement("div",{className:"Feed__navigationSpacer"}),r.a.createElement("div",{className:d(on.MY_FEED),onClick:function(){return u(on.MY_FEED)}},"My Feed"),r.a.createElement("div",{className:"Feed__navigationSpacer"}),r.a.createElement("div",{className:d(on.MY_POSTS),onClick:function(){return u(on.MY_POSTS)}},"My Posts")),e&&r.a.createElement(m.a,{className:"Feed__newPostButton",onClick:function(){return c(!0)}},"New Post"),o&&r.a.createElement(Rt,{onSuccess:function(){return c(!1)},onCancel:function(){return c(!1)}})),r.a.createElement(cn,{feedType:s}))},un=n(189),dn=n.n(un),mn=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ProfileBlock__loginHeaderText"}," Login Quick Start"),r.a.createElement("p",null,"To use the Example Client, you must log in with either MetaMask or Torus. Read the guides below to get started!"),r.a.createElement(dn.a,{defaultActiveKey:"1"},r.a.createElement(dn.a.TabPane,{tab:"MetaMask",key:"1"},r.a.createElement("div",{className:"ProfileBlock__loginTitleText"},"MetaMask Log In Guide"),I()?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"You already have MetaMask installed! Just click the"," ",r.a.createElement("code",null,"Log In \u2192 MetaMask")," button."),r.a.createElement(Nt,{loginWalletOptions:N.METAMASK})):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Before we can access the browser we need to install MetaMask to give us a cryptowallet. MetaMask is a browser extension Chrome or Firefox are recommended. Download them from your chosen browsers extension manager. Pin MetaMask to your extension bar."),r.a.createElement("p",null,"Once"," ",r.a.createElement("a",{href:"https://metamask.io/download.html",target:"__blank"},"installed correctly"),", setup MetaMask by following these steps:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Use an existing account do not create a new one."),r.a.createElement("li",null,"For account data use the following seed:"," ",r.a.createElement("code",null,"stove ankle number crucial clay heavy toilet entire bid betray cluster degree")),r.a.createElement("li",null,"Connect to a new Custom RPC.",r.a.createElement("ul",null,r.a.createElement("li",null,"Connect to a new Custom RPC."),r.a.createElement("li",null,"Name: ",r.a.createElement("code",null,"*determined by user")),r.a.createElement("li",null,"New RPC URL: ",r.a.createElement("code",null,"http://localhost:8545")),r.a.createElement("li",null,"ChainID: ",r.a.createElement("code",null,"1337")))),r.a.createElement("li",null,"Once setup, select/connect to that Custom RPC.")),r.a.createElement(Nt,{loginWalletOptions:N.METAMASK}))),r.a.createElement(dn.a.TabPane,{tab:"Torus",key:"2"},r.a.createElement("div",{className:"ProfileBlock__loginTitleText"},"Torus Log In Guide"),r.a.createElement("p",null,"There is no setup required for Torus. Just click the"," ",r.a.createElement("code",null,"Log In \u2192 Torus")," button."),r.a.createElement(Nt,{loginWalletOptions:N.TORUS}))))};!function(e){e[e.CLOSED=0]="CLOSED",e[e.FOLLOWERS=1]="FOLLOWERS",e[e.FOLLOWING=2]="FOLLOWING"}(ln||(ln={}));var fn,pn=function(e){var t=e.listStatus,n=e.following,a=e.followers,o=function(e){return n[e.fromId]?"Unfollow":"Follow"},c=h((function(e){var t;return(null===(t=e.profiles)||void 0===t?void 0:t.profiles)||{}})),i=function(e){return c[e]||Object(E.a)(Object(E.a)({},Object(Se.createProfile)({name:"Anonymous"})),{},{contentHash:"",url:"",announcementType:Me.AnnouncementType.Profile,fromId:e,handle:"unknown",createdAt:(new Date).getTime()})},l=t===ln.FOLLOWERS?Object.keys(a).map(i):t===ln.FOLLOWING?Object.keys(n).map(i):[];return r.a.createElement(r.a.Fragment,null,l.map((function(e){var t,n,a;return r.a.createElement("div",{className:"ConnectionsListProfiles__profile",key:e.fromId},r.a.createElement(kt,{icon:null===(t=c[e.fromId])||void 0===t||null===(n=t.icon)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.href,avatarSize:"small",profileAddress:e.fromId}),r.a.createElement("div",{className:"ConnectionsListProfiles__name"},e.name||e.fromId||"Anonymous"),r.a.createElement(m.a,{className:"ConnectionsListProfiles__button",name:o(e)},o(e),r.a.createElement("div",{className:"Follow"===o(e)?"ConnectionsListProfiles__buttonFollowIcon":"ConnectionsListProfiles__buttonUnfollowIcon"},"\u2715")))})))};!function(e){e[e.CLOSED=0]="CLOSED",e[e.FOLLOWERS=1]="FOLLOWERS",e[e.FOLLOWING=2]="FOLLOWING"}(fn||(fn={}));var vn=function(){var e=h((function(e){return e.user.id})),t=h((function(t){return e&&t.graphs.following[e]||{}})),n=h((function(t){return e&&t.graphs.followers[e]||{}})),o=Object(a.useState)(fn.CLOSED),c=Object(v.a)(o,2),i=c[0],l=c[1],s=function(e){l(i===e?fn.CLOSED:e)},u=function(e){return i===e?"ConnectionsList__button ConnectionsList__button--active":"ConnectionsList__button"};return r.a.createElement("div",{className:"ConnectionsList__block"},r.a.createElement("div",{className:"ConnectionsList__buttonBlock"},r.a.createElement(m.a,{className:u(fn.FOLLOWERS),onClick:function(){return s(fn.FOLLOWERS)}},r.a.createElement("div",{className:"ConnectionsList__buttonCount"},Object.keys(n).length),"Followers"),i===fn.CLOSED&&r.a.createElement("div",{className:"ConnectionsList__buttonSeparator"}," "),r.a.createElement(m.a,{className:u(fn.FOLLOWING),onClick:function(){return s(fn.FOLLOWING)}},r.a.createElement("div",{className:"ConnectionsList__buttonCount"},Object.keys(t).length),"Following")),r.a.createElement(pn,{listStatus:i,following:t,followers:n}))},bn=function(){var e,t=h((function(e){return e.user.id})),n=h((function(e){var t;return(null===(t=e.profiles)||void 0===t?void 0:t.profiles)||{}})),o=t?n[t]:void 0,c=null===o||void 0===o?void 0:o.handle,i=Object(a.useState)(),u=Object(v.a)(i,2),d=u[0],f=u[1],p=Object(a.useState)(),b=Object(v.a)(p,2),A=b[0],g=b[1],E=Object(a.useState)(!1),O=Object(v.a)(E,2),w=O[0],k=O[1],y=(null===o||void 0===o?void 0:o.name)||"Anonymous";Object(a.useEffect)((function(){k(!!(d&&d!==y||A&&A!==c))}),[d,A,y,c]);var N,j=Object(a.useState)(!1),_=Object(v.a)(j,2),I=_[0],x=_[1],C=function(){var e=Object(s.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!I),void 0!==t&&void 0!==d){e.next=3;break}return e.abrupt("return");case 3:return n=ce.a.activityContent.createProfile({name:d,icon:null===o||void 0===o?void 0:o.icon}),e.next=6,Ge(t,n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ProfileBlock__personalInfoBlock"},r.a.createElement("div",{className:"ProfileBlock__avatarBlock"},r.a.createElement(kt,{icon:null===(e=((null===o||void 0===o?void 0:o.icon)||[])[0])||void 0===e?void 0:e.href,profileAddress:t,avatarSize:"large"}),I?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"ProfileBlock__editButton",onClick:function(){return C()},disabled:!w},"save"),r.a.createElement(m.a,{className:"ProfileBlock__editButton",onClick:function(){return x(!I),f(void 0),void g(void 0)}},"cancel")):r.a.createElement(m.a,{className:"ProfileBlock__editButton",onClick:function(){return x(!I)}},"edit")),r.a.createElement("div",{className:"ProfileBlock__personalInfo"},r.a.createElement("label",{className:"ProfileBlock__personalInfoLabel"},"NAME"),r.a.createElement("input",{className:(N="name",I?"ProfileBlock__".concat(N," ProfileBlock__editing"):"ProfileBlock__".concat(N)),value:d||""===d?d:y,onChange:function(e){return f(e.target.value)},disabled:!I}),r.a.createElement("label",{className:"ProfileBlock__personalInfoLabel"},"HANDLE"),r.a.createElement("input",{className:"ProfileBlock__handle",value:A||""===A?A:c,onChange:function(e){return g(e.target.value)},disabled:!0}),r.a.createElement("label",{className:"ProfileBlock__personalInfoLabel"},"SOCIAL ADDRESS"),r.a.createElement("input",{className:"ProfileBlock__dsnpUserId",value:t||"Anonymous",disabled:!0}))),r.a.createElement(vn,null))},An=function(){var e=h((function(e){return e.user.id}));return r.a.createElement("div",{className:"ProfileBlock__block"},e?r.a.createElement(bn,null):r.a.createElement(mn,null))},gn=function(){var e=g(),t=h((function(e){return e.user.walletType}));return Object(a.useEffect)((function(){var n;if(t&&t!==N.NONE)return Object(s.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Y(t).reload();case 2:return Je(t),a.next=5,e(Ye);case 5:n=a.sent;case 6:case"end":return a.stop()}}),a)})))(),function(){n&&Object.values(n).forEach((function(e){return e()}))}})),r.a.createElement(u.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(jt,null),r.a.createElement("main",{className:"App__content"},r.a.createElement(sn,null),r.a.createElement(An,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var hn=Object(O.a)({reducer:{user:oe,profiles:je,graphs:qe,feed:he}});c.a.render(r.a.createElement(A.a,{store:hn},r.a.createElement(gn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},482:function(e,t,n){e.exports=n(1010)},505:function(e,t){},529:function(e,t){},531:function(e,t){},605:function(e,t){},607:function(e,t){},617:function(e,t){},619:function(e,t){},644:function(e,t){},650:function(e,t){},663:function(e,t){},685:function(e,t){}},[[482,1,2]]]);
//# sourceMappingURL=main.c751b498.chunk.js.map